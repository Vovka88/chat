/*! For license information please see main.d7a778b2.js.LICENSE.txt */
(()=>{var e={5513:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,s=Object.assign;function a(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function d(e){return e.length}function f(e){return e.length}function p(e,t){return t.push(e),e}var m=1,g=1,y=0,v=0,b=0,w="";function _(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:m,column:g,length:s,return:""}}function S(e,t){return s(_("",null,null,"",null,null,0),e,{length:-e.length},t)}function I(){return b=v>0?u(w,--v):0,g--,10===b&&(g=1,m--),b}function k(){return b=v<y?u(w,v++):0,g++,10===b&&(g=1,m++),b}function E(){return u(w,v)}function C(){return v}function T(e,t){return h(w,e,t)}function x(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function A(e){return m=g=1,y=d(w=e),v=0,[]}function N(e){return w="",e}function P(e){return a(T(v-1,O(91===e?e+2:40===e?e+1:e)))}function R(e){for(;(b=E())&&b<33;)k();return x(e)>2||x(b)>3?"":" "}function D(e,t){for(;--t&&k()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return T(e,C()+(t<6&&32==E()&&32==k()))}function O(e){for(;k();)switch(b){case e:return v;case 34:case 39:34!==e&&39!==e&&O(b);break;case 40:41===e&&O(e);break;case 92:k()}return v}function M(e,t){for(;k()&&e+b!==57&&(e+b!==84||47!==E()););return"/*"+T(t,v-1)+"*"+o(47===e?e:k())}function L(e){for(;!x(E());)k();return T(e,v)}var F="-ms-",U="-moz-",z="-webkit-",j="comm",V="rule",B="decl",q="@keyframes";function W(e,t){for(var n="",r=f(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function K(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case B:return e.return=e.return||e.value;case j:return"";case q:return e.return=e.value+"{"+W(e.children,r)+"}";case V:e.value=e.props.join(",")}return d(n=W(e.children,r))?e.return=e.value+"{"+n+"}":""}function H(e){return N(G("",null,null,null,[""],e=A(e),0,[0],e))}function G(e,t,n,r,i,s,a,h,f){for(var m=0,g=0,y=a,v=0,b=0,w=0,_=1,S=1,T=1,x=0,A="",N=i,O=s,F=r,U=A;S;)switch(w=x,x=k()){case 40:if(108!=w&&58==u(U,y-1)){-1!=c(U+=l(P(x),"&","&\f"),"&\f")&&(T=-1);break}case 34:case 39:case 91:U+=P(x);break;case 9:case 10:case 13:case 32:U+=R(w);break;case 92:U+=D(C()-1,7);continue;case 47:switch(E()){case 42:case 47:p(Y(M(k(),C()),t,n),f);break;default:U+="/"}break;case 123*_:h[m++]=d(U)*T;case 125*_:case 59:case 0:switch(x){case 0:case 125:S=0;case 59+g:-1==T&&(U=l(U,/\f/g,"")),b>0&&d(U)-y&&p(b>32?$(U+";",r,n,y-1):$(l(U," ","")+";",r,n,y-2),f);break;case 59:U+=";";default:if(p(F=Q(U,t,n,m,g,i,h,A,N=[],O=[],y),s),123===x)if(0===g)G(U,t,F,F,N,s,y,h,O);else switch(99===v&&110===u(U,3)?100:v){case 100:case 108:case 109:case 115:G(e,F,F,r&&p(Q(e,F,F,0,0,i,h,A,i,N=[],y),O),i,O,y,h,r?N:O);break;default:G(U,F,F,F,[""],O,0,h,O)}}m=g=b=0,_=T=1,A=U="",y=a;break;case 58:y=1+d(U),b=w;default:if(_<1)if(123==x)--_;else if(125==x&&0==_++&&125==I())continue;switch(U+=o(x),x*_){case 38:T=g>0?1:(U+="\f",-1);break;case 44:h[m++]=(d(U)-1)*T,T=1;break;case 64:45===E()&&(U+=P(k())),v=E(),g=y=d(A=U+=L(C())),x++;break;case 45:45===w&&2==d(U)&&(_=0)}}return s}function Q(e,t,n,r,o,s,c,u,d,p,m){for(var g=o-1,y=0===o?s:[""],v=f(y),b=0,w=0,S=0;b<r;++b)for(var I=0,k=h(e,g+1,g=i(w=c[b])),E=e;I<v;++I)(E=a(w>0?y[I]+" "+k:l(k,/&\f/g,y[I])))&&(d[S++]=E);return _(e,t,n,0===o?V:u,d,p,m)}function Y(e,t,n){return _(e,t,n,j,o(b),h(e,2,-2),0)}function $(e,t,n,r){return _(e,t,n,B,h(e,0,r),h(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,i=0;r=i,i=E(),38===r&&12===i&&(t[n]=1),!x(i);)k();return T(e,v)},X=function(e,t){return N(function(e,t){var n=-1,r=44;do{switch(x(r)){case 0:38===r&&12===E()&&(t[n]=1),e[n]+=J(v-1,t,n);break;case 2:e[n]+=P(r);break;case 4:if(44===r){e[++n]=58===E()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=k());return e}(A(e),t))},Z=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Z.get(n))&&!r){Z.set(e,!0);for(var i=[],o=X(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+U+e+F+e+e;case 6828:case 4268:return z+e+F+e+e;case 6165:return z+e+F+"flex-"+e+e;case 5187:return z+e+l(e,/(\w+).+(:[^]+)/,z+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return z+e+F+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return z+e+F+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+F+l(e,"shrink","negative")+e;case 5292:return z+e+F+l(e,"basis","preferred-size")+e;case 6060:return z+"box-"+l(e,"-grow","")+z+e+F+l(e,"grow","positive")+e;case 4554:return z+l(e,/([^-])(transform)/g,"$1"+z+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,z+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+z+"$2-$3$1"+U+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,d(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+z)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===u(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+F+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case B:e.return=ne(e.value,e.length);break;case q:return W([S(e,{value:l(e.value,"@","@"+z)})],r);case V:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([S(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return W([S(e,{props:[l(t,/:(plac\w+)/,":"+z+"input-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var o,s,a={},l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;l.push(e)}));var c,u,h=[K,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],d=function(e){var t=f(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([ee,te].concat(i,h));s=function(e,t,n,r){c=n,W(H(e?e+"{"+t.styles+"}":t.styles),d),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:s};return p.sheet.hydrate(l),p}},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},5756:(e,t,n)=>{"use strict";n.d(t,{C:()=>a,T:()=>c,i:()=>o,w:()=>l});var r=n(5043),i=n(5513),o=(n(2830),n(9436),!0),s=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null);var a=s.Provider,l=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(s);return e(t,i,n)}))};o||(l=function(e){return function(t){var n=(0,r.useContext)(s);return null===n?(n=(0,i.A)({key:"css"}),r.createElement(s.Provider,{value:n},e(t,n))):e(t,n)}});var c=r.createContext({})},3290:(e,t,n)=>{"use strict";n.d(t,{AH:()=>c,i7:()=>u,mL:()=>l});var r=n(5756),i=n(5043),o=n(1722),s=n(9436),a=n(2830),l=(n(5513),n(219),(0,r.w)((function(e,t){var n=e.styles,l=(0,a.J)([n],void 0,i.useContext(r.T));if(!r.i){for(var c,u=l.name,h=l.styles,d=l.next;void 0!==d;)u+=" "+d.name,h+=d.styles,d=d.next;var f=!0===t.compat,p=t.insert("",{name:u,styles:h},t.sheet,f);return f?null:i.createElement("style",((c={})["data-emotion"]=t.key+"-global "+u,c.dangerouslySetInnerHTML={__html:p},c.nonce=t.sheet.nonce,c))}var m=i.useRef();return(0,s.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),m.current=[n,r],function(){n.flush()}}),[t]),(0,s.i)((function(){var e=m.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.sk)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null})));function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.J)(t)}var u=function(){var e=c.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},2830:(e,t,n)=>{"use strict";n.d(t,{J:()=>p});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},l=function(e){return null!=e&&"boolean"!==typeof e},c=(0,i.A)((function(e){return a(e)?e:e.replace(o,"-$&").toLowerCase()})),u=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return d={name:t,styles:n,next:d},t}))}return 1===r[e]||a(e)||"number"!==typeof t||0===t?t:t+"px"};function h(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return d={name:n.name,styles:n.styles,next:d},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)d={name:r.name,styles:r.styles,next:d},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=h(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":l(s)&&(r+=c(o)+":"+u(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=h(e,t,s);switch(o){case"animation":case"animationName":r+=c(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var d=0;d<s.length;d++)l(s[d])&&(r+=c(o)+":"+u(o,s[d])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=d,o=n(e);return d=i,h(e,t,o)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var d,f=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var p=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";d=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=h(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=h(n,t,e[s]),r&&(i+=o[s]);f.lastIndex=0;for(var a,l="";null!==(a=f.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:d}}},9436:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>a,s:()=>s});var i=n(5043),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=o||function(e){return e()},a=o||i.useLayoutEffect},1722:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},5881:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case d:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case h:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},805:(e,t,n)=>{"use strict";n(5881)},869:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(5043);var r=n(3290),i=n(579);function o(e){const{styles:t,defaultTheme:n={}}=e,o="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,i.jsx)(r.mL,{styles:o})}},3174:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>I.A,StyledEngineProvider:()=>S,ThemeContext:()=>l.T,css:()=>v.AH,default:()=>k,internal_processStyles:()=>E,keyframes:()=>v.i7});var r=n(8168),i=n(5043),o=n(918),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,o.A)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),l=n(5756),c=n(1722),u=n(2830),h=n(9436),d=a,f=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:f},m=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,c.SF)(t,n,r),(0,h.s)((function(){return(0,c.sk)(t,n,r)})),null},y=function e(t,n){var o,s,a=t.__emotion_real===t,h=a&&t.__emotion_base||t;void 0!==n&&(o=n.label,s=n.target);var d=m(t,n,a),f=d||p(h),y=!f("as");return function(){var v=arguments,b=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&b.push("label:"+o+";"),null==v[0]||void 0===v[0].raw)b.push.apply(b,v);else{0,b.push(v[0][0]);for(var w=v.length,_=1;_<w;_++)b.push(v[_],v[0][_])}var S=(0,l.w)((function(e,t,n){var r=y&&e.as||h,o="",a=[],m=e;if(null==e.theme){for(var v in m={},e)m[v]=e[v];m.theme=i.useContext(l.T)}"string"===typeof e.className?o=(0,c.Rk)(t.registered,a,e.className):null!=e.className&&(o=e.className+" ");var w=(0,u.J)(b.concat(a),t.registered,m);o+=t.key+"-"+w.name,void 0!==s&&(o+=" "+s);var _=y&&void 0===d?p(r):f,S={};for(var I in e)y&&"as"===I||_(I)&&(S[I]=e[I]);return S.className=o,S.ref=n,i.createElement(i.Fragment,null,i.createElement(g,{cache:t,serialized:w,isStringTag:"string"===typeof r}),i.createElement(r,S))}));return S.displayName=void 0!==o?o:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",S.defaultProps=t.defaultProps,S.__emotion_real=S,S.__emotion_base=h,S.__emotion_styles=b,S.__emotion_forwardProp=d,Object.defineProperty(S,"toString",{value:function(){return"."+s}}),S.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:m(S,i,!0)})).apply(void 0,b)},S}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){y[e]=y(e)}));var v=n(3290),b=n(5513),w=n(579);let _;function S(e){const{injectFirst:t,children:n}=e;return t&&_?(0,w.jsx)(l.C,{value:_,children:n}):n}"object"===typeof document&&(_=(0,b.A)({key:"css",prepend:!0}));var I=n(869);function k(e,t){return y(e,t)}const E=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},7266:(e,t,n)=>{"use strict";var r=n(4994);t.X4=f,t.e$=p,t.eM=function(e,t){const n=d(e),r=d(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=m;var i=r(n(7245)),o=r(n(1098));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(e,t,n)}function a(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(a(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:r}}const c=e=>{const t=l(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function h(e){e=l(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const c=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(a+="a",c.push(t[3])),u({type:a,values:c})}function d(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(h(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function f(e,t){return e=l(e),t=s(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,u(e)}function p(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function m(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}},8052:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=p,slotShouldForwardProp:l=p}=e,u=e=>(0,c.default)((0,i.default)({},e,{theme:y((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:h,slot:f,skipVariantsResolver:m,skipSx:w,overridesResolver:_=v(g(f))}=c,S=(0,o.default)(c,d),I=void 0!==m?m:f&&"Root"!==f&&"root"!==f||!1,k=w||!1;let E=p;"Root"===f||"root"===f?E=r:f?E=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(E=void 0);const C=(0,s.default)(e,(0,i.default)({shouldForwardProp:E,label:undefined},S)),T=e=>"function"===typeof e&&e.__emotion_real!==e||(0,a.isPlainObject)(e)?r=>b(e,(0,i.default)({},r,{theme:y({theme:r.theme,defaultTheme:n,themeId:t})})):e,x=function(r){let o=T(r);for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];const c=a?a.map(T):[];h&&_&&c.push((e=>{const r=y((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[h]||!r.components[h].styleOverrides)return null;const o=r.components[h].styleOverrides,s={};return Object.entries(o).forEach((t=>{let[n,o]=t;s[n]=b(o,(0,i.default)({},e,{theme:r}))})),_(e,s)})),h&&!I&&c.push((e=>{var r;const o=y((0,i.default)({},e,{defaultTheme:n,themeId:t}));return b({variants:null==o||null==(r=o.components)||null==(r=r[h])?void 0:r.variants},(0,i.default)({},e,{theme:o}))})),k||c.push(u);const d=c.length-a.length;if(Array.isArray(r)&&d>0){const e=new Array(d).fill("");o=[...r,...e],o.raw=[...r.raw,...e]}const f=C(o,...c);return e.muiName&&(f.muiName=e.muiName),f};return C.withConfig&&(x.withConfig=C.withConfig),x}},t.MC=p;var i=r(n(4634)),o=r(n(4893)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(3174)),a=n(4534),l=(r(n(578)),r(n(2046)),r(n(4989))),c=r(n(3234));const u=["ownerState"],h=["variants"],d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,l.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function y(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function v(e){return e?(t,n)=>n[e]:null}function b(e,t){let{ownerState:n}=t,r=(0,o.default)(t,u);const s="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(s))return s.flatMap((e=>b(e,(0,i.default)({ownerState:n},r))));if(s&&"object"===typeof s&&Array.isArray(s.variants)){const{variants:e=[]}=s;let t=(0,o.default)(s,h);return e.forEach((e=>{let o=!0;"function"===typeof e.props?o=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(o=!1)})),o&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return s}},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>s,NI:()=>o,kW:()=>l,vf:()=>a,zu:()=>r});const r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(r[e],"px)")};function o(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const e=o.breakpoints||i;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=o.breakpoints||i;return Object.keys(t).reduce(((i,o)=>{if(-1!==Object.keys(e.values||r).indexOf(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function a(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function l(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let s;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[s],s=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[s],s=n):e[n]=t,e)),{})}},9703:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){return{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},4853:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8587),i=n(8168);const o=["values","unit","step"],s=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,l=(0,r.A)(e,o),c=s(t),u=Object.keys(c);function h(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function d(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-a/100).concat(n,")")}function f(e,r){const i=u.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-a/100).concat(n,")")}return(0,i.A)({keys:u,values:c,up:h,down:d,between:f,only:function(e){return u.indexOf(e)+1<u.length?f(e,u[u.indexOf(e)+1]):h(e)},not:function(e){const t=u.indexOf(e);return 0===t?h(u[1]):t===u.length-1?d(u[t]):f(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},8280:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(8168),i=n(8587),o=n(3216),s=n(4853);const a={borderRadius:4};var l=n(8604);var c=n(8812),u=n(7758),h=n(9703);const d=["breakpoints","palette","spacing","shape"];const f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:f,shape:p={}}=e,m=(0,i.A)(e,d),g=(0,s.A)(t),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(f);let v=(0,o.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:y,shape:(0,r.A)({},a,p)},m);v.applyStyles=h.A;for(var b=arguments.length,w=new Array(b>1?b-1:0),_=1;_<b;_++)w[_-1]=arguments[_];return v=w.reduce(((e,t)=>(0,o.A)(e,t)),v),v.unstable_sxConfig=(0,r.A)({},u.A,null==m?void 0:m.unstable_sxConfig),v.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},v}},4989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>o.A});var r=n(8280),i=n(4853),o=n(9703)},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(3216);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>p,MA:()=>f,_W:()=>m,Lc:()=>v,Ms:()=>b});var r=n(9751),i=n(7162),o=n(3815);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=s[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[...u,...h];function f(e,t,n,r){var o;const s=null!=(o=(0,i.Yn)(e,t,!1))?o:n;return"number"===typeof s?e=>"string"===typeof e?e:s*e:Array.isArray(s)?e=>"string"===typeof e?e:s[e]:"function"===typeof s?s:()=>{}}function p(e){return f(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(c(n),i),s=e[n];return(0,r.NI)(e,s,o)}function y(e,t){const n=p(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.A,{})}function v(e){return y(e,u)}function b(e){return y(e,h)}function w(e){return y(e,d)}v.propTypes={},v.filterProps=u,b.propTypes={},b.filterProps=h,w.propTypes={},w.filterProps=d},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,BO:()=>s,Yn:()=>o});var r=n(410),i=n(9751);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function s(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i,e)),r}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,a)||{};return(0,i.NI)(e,c,(e=>{let i=s(u,l,e);return e===i&&"string"===typeof e&&(i=s(u,l,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var r=n(8604),i=n(7162),o=n(3815);const s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,o.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var a=n(9751);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function c(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),h=c("borderTop",l),d=c("borderRight",l),f=c("borderBottom",l),p=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),y=c("borderRightColor"),v=c("borderBottomColor"),b=c("borderLeftColor"),w=c("outline",l),_=c("outlineColor"),S=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,a.NI)(e,e.borderRadius,n)}return null};S.propTypes={},S.filterProps=["borderRadius"];s(u,h,d,f,p,m,g,y,v,b,S,w,_);const I=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,a.NI)(e,e.gap,n)}return null};I.propTypes={},I.filterProps=["gap"];const k=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.columnGap,n)}return null};k.propTypes={},k.filterProps=["columnGap"];const E=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.rowGap,n)}return null};E.propTypes={},E.filterProps=["rowGap"];s(I,k,E,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function C(e,t){return"grey"===t?t:e}s((0,i.Ay)({prop:"color",themeKey:"palette",transform:C}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:C}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:C}));function T(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const x=(0,i.Ay)({prop:"width",transform:T}),A=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||a.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:T(t)}};return(0,a.NI)(e,e.maxWidth,t)}return null};A.filterProps=["maxWidth"];const N=(0,i.Ay)({prop:"minWidth",transform:T}),P=(0,i.Ay)({prop:"height",transform:T}),R=(0,i.Ay)({prop:"maxHeight",transform:T}),D=(0,i.Ay)({prop:"minHeight",transform:T}),O=((0,i.Ay)({prop:"size",cssProperty:"width",transform:T}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:T}),s(x,A,N,P,R,D,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:S},color:{themeKey:"palette",transform:C},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:C},backgroundColor:{themeKey:"palette",transform:C},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:I},rowGap:{style:E},columnGap:{style:k},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:T},maxWidth:{style:A},minWidth:{transform:T},height:{transform:T},maxHeight:{transform:T},minHeight:{transform:T},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8698:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(8168),i=n(8587),o=n(3216),s=n(7758);const a=["sx"],l=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:s.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function c(e){const{sx:t}=e,n=(0,i.A)(e,a),{systemProps:s,otherProps:c}=l(n);let u;return u=Array.isArray(t)?[s,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.Q)(e)?(0,r.A)({},s,e):s}:(0,r.A)({},s,t),(0,r.A)({},c,{sx:u})}},3234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>i.A,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>o.A});var r=n(8812),i=n(8698),o=n(7758)},8812:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>l});var r=n(410),i=n(3815),o=n(7162),s=n(9751),a=n(7758);function l(){function e(e,t,n,i){const a={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:h,style:d}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const f=(0,o.Yn)(n,u)||{};if(d)return d(a);return(0,s.NI)(a,t,(t=>{let n=(0,o.BO)(f,h,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(f,h,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:o,theme:l={}}=n||{};if(!o)return null;const c=null!=(r=l.unstable_sxConfig)?r:a.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,s.EU)(l.breakpoints),a=Object.keys(o);let u=o;return Object.keys(r).forEach((n=>{const o=(a=r[n],h=l,"function"===typeof a?a(h):a);var a,h;if(null!==o&&void 0!==o)if("object"===typeof o)if(c[n])u=(0,i.A)(u,e(n,o,l,c));else{const e=(0,s.NI)({theme:l},o,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,o)?u=(0,i.A)(u,e):u[n]=t({sx:o,theme:l})}else u=(0,i.A)(u,e(n,o,l,c))})),(0,s.vf)(a,u)}return Array.isArray(o)?o.map(u):u(o)}}const c=l();c.filterProps=["sx"];const u=c},410:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6632);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},578:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(410)},1098:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},3216:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,Q:()=>i});var r=n(8168);function i(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function o(e){if(!i(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=o(e[n])})),t}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.A)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?a[r]=s(e[r],t[r],n):n.clone?a[r]=i(t[r])?o(t[r]):t[r]:a[r]=t[r])})),a}},4534:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(3216)},6632:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},7245:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(6632)},2046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>o});var r=n(9565);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(e){const t="".concat(e).match(i);return t&&t[1]||""}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||o(e)||t}function a(e,t,n){const r=s(t);return e.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return s(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.ForwardRef:return a(e,e.render,"ForwardRef");case r.Memo:return a(e,e.type,"memo");default:return}}}},8609:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case d:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case h:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.ForwardRef=h,t.Memo=p},9565:(e,t,n)=>{"use strict";e.exports=n(8609)},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=u(n);h&&(s=s.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<s.length;++g){var y=s[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{c(t,y,v)}catch(b){}}}}return t}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function S(e){return _(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||_(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===a||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===b||e.$$typeof===w||e.$$typeof===y)},t.typeOf=_},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,F=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function j(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case S:return"Portal";case E:return"Profiler";case k:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ie=null,ke=null;function Ee(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function Ce(e){Ie?ke?ke.push(e):ke=[e]:Ie=e}function Te(){if(Ie){var e=Ie,t=ke;if(ke=Ie=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function xe(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return xe(e,t,n)}finally{Ne=!1,(null!==Ie||null!==ke)&&(Ae(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Me(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,Ue=!1,ze=null,je={onError:function(e){Le=!0,Fe=e}};function Ve(e,t,n,r,i,o,s,a,l){Le=!1,Fe=null,Me.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(o(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return We(i),e;if(s===r)return We(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,It,kt,Et,Ct=!1,Tt=[],xt=null,At=null,Nt=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function zt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Ct=!1,null!==xt&&Ut(xt)&&(xt=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(zt),Rt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Vt(xt,e),null!==At&&Vt(At,e),null!==Nt&&Vt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=bt,o=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,qt.transition=o}}function Ht(e,t,n,r){var i=bt,o=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,qt.transition=o}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Lt(xt,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Lt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,Lt(Rt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&_t(o),null===(o=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=F({},cn,{view:0,detail:0}),dn=on(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(F({},fn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),yn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),wn=on(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function En(){return kn}var Cn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(Cn),xn=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(Pn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,Fn=u&&(!On||Mn&&8<Mn&&11>=Mn),Un=String.fromCharCode(32),zn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ce(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},kr={};function Er(e){if(Ir[e])return Ir[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Ir[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Cr=Er("animationend"),Tr=Er("animationiteration"),xr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(o(198));var u=Fe;Le=!1,Fe=null,Ue||(Ue=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,c),o=l}}}if(Ue)throw e=ze,Ue=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=o,i=_e(n),s=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case Tr:case xr:l=yn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Kr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(s,a,l,u,!1),null!==c&&null!==h&&Qr(s,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Wn(a))if(Jn)g=sr;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Kn(s,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(s,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Hr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,Un);case"textInput":return(e=t.data)===Un&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Ur(s,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,n))&&r.unshift(Kr(e,o,i)),null!=(o=Re(e,t))&&r.push(Kr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,o))&&s.unshift(Kr(n,l,a)):i||null!=(l=Re(n,o))&&s.push(Kr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var Si=[],Ii=-1;function ki(e){return{current:e}}function Ei(e){0>Ii||(e.current=Si[Ii],Si[Ii]=null,Ii--)}function Ci(e,t){Ii++,Si[Ii]=e.current,e.current=t}var Ti={},xi=ki(Ti),Ai=ki(!1),Ni=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ai),Ei(xi)}function Oi(e,t,n){if(xi.current!==Ti)throw Error(o(168));Ci(xi,t),Ci(Ai,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=xi.current,Ci(xi,e),Ci(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Mi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(xi),Ci(xi,e)):Ei(Ai),Ci(Ai,n)}var Ui=null,zi=!1,ji=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,zi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{bt=t,ji=!1}}return null}var qi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Wi++]=Hi,qi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,$i=1<<32-st(t)+i|n<<i|r,Ji=o+e}else $i=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function to(e){for(;e===Ki;)Ki=qi[--Wi],qi[Wi]=null,Hi=qi[--Wi],qi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vo=ki(null),bo=null,wo=null,_o=null;function So(){_o=wo=bo=null}function Io(e){var t=vo.current;Ei(vo),e._currentValue=t}function ko(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){bo=e,_o=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===bo)throw Error(o(308));wo=e,bo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var To=null;function xo(e){null===To?To=[e]:To.push(e)}function Ao(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xo(t)):(n.next=i.next,i.next=n),t.interleaved=n,No(e,r)}function No(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Po=!1;function Ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,No(e,n)}return null===(i=r.interleaved)?(t.next=t,xo(r)):(t.next=i.next,i.next=t),r.interleaved=t,No(e,n)}function Lo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uo(e,t,n,r){var i=e.updateQueue;Po=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Po=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Fl|=s,e.lanes=s,e.memoizedState=h}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var jo=(new r.Component).refs;function Vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bo={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Oo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Mo(e,o,i))&&(rc(t,e,i,r),Lo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Oo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Mo(e,o,i))&&(rc(t,e,i,r),Lo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Mo(e,i,r))&&(rc(t,e,r,n),Lo(t,e,r))}};function qo(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Wo(e,t,n){var r=!1,i=Ti,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Ri(t)?Ni:xi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ko(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bo.enqueueReplaceState(t,t.state,null)}function Ho(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=jo,Ro(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Ri(t)?Ni:xi.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Vo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bo.enqueueReplaceState(i,i.state,null),Uo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Go(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===jo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function $o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&Yo(o)===t.type)?((r=i(t,n.props)).ref=Go(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Go(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Go(e,null,t),n.return=e,n;case S:return(t=zc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Qo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);Qo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);Qo(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),io&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return io&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Xi(i,m),c}function g(i,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),io&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return io&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),io&&Xi(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===I&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===I){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Yo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Go(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===I?((o=Lc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Mc(s.type,s.key,s.props,null,r.mode,l)).ref=Go(r,o,s),l.return=r,r=l)}return a(r);case S:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zc(s,r.mode,l)).return=r,r=o}return a(r);case R:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(M(s))return g(r,o,s,l);Qo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Uc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Jo=$o(!0),Xo=$o(!1),Zo={},es=ki(Zo),ts=ki(Zo),ns=ki(Zo);function rs(e){if(e===Zo)throw Error(o(174));return e}function is(e,t){switch(Ci(ns,t),Ci(ts,e),Ci(es,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(es),Ci(es,t)}function os(){Ei(es),Ei(ts),Ei(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=le(t,e.type);t!==n&&(Ci(ts,e),Ci(es,n))}function as(e){ts.current===e&&(Ei(es),Ei(ts))}var ls=ki(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function hs(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var ds=w.ReactCurrentDispatcher,fs=w.ReactCurrentBatchConfig,ps=0,ms=null,gs=null,ys=null,vs=!1,bs=!1,ws=0,_s=0;function Ss(){throw Error(o(321))}function Is(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ks(e,t,n,r,i,s){if(ps=s,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),bs){s=0;do{if(bs=!1,ws=0,25<=s)throw Error(o(301));s+=1,ys=gs=null,t.updateQueue=null,ds.current=ca,e=n(r,i)}while(bs)}if(ds.current=sa,t=null!==gs&&null!==gs.next,ps=0,ys=gs=ms=null,vs=!1,t)throw Error(o(300));return e}function Es(){var e=0!==ws;return ws=0,e}function Cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?ms.memoizedState=ys=e:ys=ys.next=e,ys}function Ts(){if(null===gs){var e=ms.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===ys?ms.memoizedState:ys.next;if(null!==t)ys=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===ys?ms.memoizedState=ys=e:ys=ys.next=e}return ys}function xs(e,t){return"function"===typeof t?t(e):t}function As(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=gs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((ps&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,ms.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ms.lanes|=s,Fl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ns(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(wa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ps(){}function Rs(e,t){var n=ms,r=Ts(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,wa=!0),r=r.queue,Ws(Ms.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ys&&1&ys.memoizedState.tag){if(n.flags|=2048,zs(9,Os.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(o(349));0!==(30&ps)||Ds(n,t,i)}return i}function Ds(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Os(e,t,n,r){t.value=n,t.getSnapshot=r,Ls(t)&&Fs(e)}function Ms(e,t,n){return n((function(){Ls(t)&&Fs(e)}))}function Ls(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fs(e){var t=No(e,1);null!==t&&rc(t,e,1,-1)}function Us(e){var t=Cs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,ms,e),[t.memoizedState,e]}function zs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function js(){return Ts().memoizedState}function Vs(e,t,n,r){var i=Cs();ms.flags|=e,i.memoizedState=zs(1|t,n,void 0,void 0===r?null:r)}function Bs(e,t,n,r){var i=Ts();r=void 0===r?null:r;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==r&&Is(r,s.deps))return void(i.memoizedState=zs(t,n,o,r))}ms.flags|=e,i.memoizedState=zs(1|t,n,o,r)}function qs(e,t){return Vs(8390656,8,e,t)}function Ws(e,t){return Bs(2048,8,e,t)}function Ks(e,t){return Bs(4,2,e,t)}function Hs(e,t){return Bs(4,4,e,t)}function Gs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4,4,Gs.bind(null,t,e),n)}function Ys(){}function $s(e,t){var n=Ts();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Is(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Js(e,t){var n=Ts();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Is(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xs(e,t,n){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ms.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{bt=n,fs.transition=r}}function ea(){return Ts().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Ao(e,t,n,r))){rc(n,e,r,tc()),oa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,xo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ao(e,t,i,r))&&(rc(n,e,r,i=tc()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===ms||null!==t&&t===ms}function ia(e,t){bs=vs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var sa={readContext:Co,useCallback:Ss,useContext:Ss,useEffect:Ss,useImperativeHandle:Ss,useInsertionEffect:Ss,useLayoutEffect:Ss,useMemo:Ss,useReducer:Ss,useRef:Ss,useState:Ss,useDebugValue:Ss,useDeferredValue:Ss,useTransition:Ss,useMutableSource:Ss,useSyncExternalStore:Ss,useId:Ss,unstable_isNewReconciler:!1},aa={readContext:Co,useCallback:function(e,t){return Cs().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:qs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4194308,4,Gs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vs(4,2,e,t)},useMemo:function(e,t){var n=Cs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Cs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,ms,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Cs().memoizedState=e},useState:Us,useDebugValue:Ys,useDeferredValue:function(e){return Cs().memoizedState=e},useTransition:function(){var e=Us(!1),t=e[0];return e=Zs.bind(null,e[1]),Cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ms,i=Cs();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Nl)throw Error(o(349));0!==(30&ps)||Ds(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,qs(Ms.bind(null,r,s,e),[e]),r.flags|=2048,zs(9,Os.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Cs(),t=Nl.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-st($i)-1)).toString(32)+n),0<(n=ws++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_s++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Co,useCallback:$s,useContext:Co,useEffect:Ws,useImperativeHandle:Qs,useInsertionEffect:Ks,useLayoutEffect:Hs,useMemo:Js,useReducer:As,useRef:js,useState:function(){return As(xs)},useDebugValue:Ys,useDeferredValue:function(e){return Xs(Ts(),gs.memoizedState,e)},useTransition:function(){return[As(xs)[0],Ts().memoizedState]},useMutableSource:Ps,useSyncExternalStore:Rs,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Co,useCallback:$s,useContext:Co,useEffect:Ws,useImperativeHandle:Qs,useInsertionEffect:Ks,useLayoutEffect:Hs,useMemo:Js,useReducer:Ns,useRef:js,useState:function(){return Ns(xs)},useDebugValue:Ys,useDeferredValue:function(e){var t=Ts();return null===gs?t.memoizedState=e:Xs(t,gs.memoizedState,e)},useTransition:function(){return[Ns(xs)[0],Ts().memoizedState]},useMutableSource:Ps,useSyncExternalStore:Rs,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Oo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Hl=r),da(0,t)},n}function ma(e,t,n){(n=Oo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oo(-1,1)).tag=2,Mo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=w.ReactCurrentOwner,wa=!1;function _a(e,t,n,r){t.child=null===e?Xo(t,null,n,r):Jo(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var o=t.ref;return Eo(t,i),r=ks(e,t,n,r,o,i),n=Es(),null===e||wa?(io&&n&&eo(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Dc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ka(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Oc(o,r)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ta(e,t,n,r,i)}function Ea(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Ol,Dl),Dl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Ol,Dl),Dl|=r;return _a(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var o=Ri(n)?Ni:xi.current;return o=Pi(t,o),Eo(t,i),n=ks(e,t,n,r,o,i),r=Es(),null===e||wa?(io&&r&&eo(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function xa(e,t,n,r,i){if(Ri(n)){var o=!0;Li(t)}else o=!1;if(Eo(t,i),null===t.stateNode)Wa(e,t),Wo(t,n,r),Ho(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Co(c):c=Pi(t,c=Ri(n)?Ni:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Ko(t,s,r,c),Po=!1;var d=t.memoizedState;s.state=d,Uo(t,r,s,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Po?("function"===typeof u&&(Vo(t,n,u,r),l=t.memoizedState),(a=Po||qo(t,n,a,r,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Do(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:yo(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Co(l):l=Pi(t,l=Ri(n)?Ni:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&Ko(t,s,r,l),Po=!1,d=t.memoizedState,s.state=d,Uo(t,r,s,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Po?("function"===typeof f&&(Vo(t,n,f,r),p=t.memoizedState),(c=Po||qo(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,o,i)}function Aa(e,t,n,r,i,o){Ca(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Fi(t,n,!1),Ka(e,t,o);r=t.stateNode,ba.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),is(e,t.containerInfo)}function Pa(e,t,n,r,i){return po(),mo(i),t.flags|=256,_a(e,t,n,r),t.child}var Ra,Da,Oa,Ma,La={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ci(ls,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=La,e):za(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(s=Lc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Jo(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=La,s);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,ja(e,t,a,r=ha(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,No(e,i),rc(r,e,i,-1))}return gc(),ja(e,t,a,r=ha(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Oc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&mo(r),Jo(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ko(e.return,t,n)}function Ba(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,o);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Ri(t.type)&&Di(),Ga(t),null;case 3:return r=t.stateNode,os(),Ei(Ai),Ei(xi),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Da(e,t),Ga(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ga(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":$(r,s),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zr("invalid",r);break;case"textarea":ie(r,s),zr("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":H(r),Z(r,s,!0);break;case"textarea":H(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&zr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ei(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Ml&&(Ml=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return os(),Da(e,t),null===e&&Br(t.stateNode.containerInfo),Ga(t),null;case 10:return Io(t.type._context),Ga(t),null;case 19:if(Ei(ls),null===(s=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ha(s,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Ha(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>ql&&(t.flags|=128,r=!0,Ha(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ga(t),null}else 2*Je()-s.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ha(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=ls.current,Ci(ls,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ya(e,t){switch(to(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Ei(Ai),Ei(xi),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ei(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ls),null;case 4:return os(),null;case 10:return Io(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ec(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(o(160));pl(s,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Ec(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":X(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Ec(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Ec(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Je())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gl(t,e),Ja=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,Za=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ec(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){Ec(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Za=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||$a;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=$a;var c=Ja;if($a=s,(Ja=l)&&!c)for(Za=i;null!==Za;)l=(s=Za).child,22===s.tag&&null!==s.memoizedState?Il(i):null!==l?(l.return=s,Za=l):Il(i);for(;null!==o;)Za=o,wl(o,t,n),o=o.sibling;Za=i,$a=a,Ja=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Za=o):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&zo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(o(163))}Ja||512&t.flags&&ol(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Il(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var o=t.return;try{ol(t)}catch(l){Ec(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Ec(t,s,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var kl,El=Math.ceil,Cl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,xl=w.ReactCurrentBatchConfig,Al=0,Nl=null,Pl=null,Rl=0,Dl=0,Ol=ki(0),Ml=0,Ll=null,Fl=0,Ul=0,zl=0,jl=null,Vl=null,Bl=0,ql=1/0,Wl=null,Kl=!1,Hl=null,Gl=null,Ql=!1,Yl=null,$l=0,Jl=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Al)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==go.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(o(185));yt(e,n,r),0!==(2&Al)&&e===Nl||(e===Nl&&(0===(2&Al)&&(Ul|=n),4===Ml&&lc(e,Rl)),ic(e,r),1===n&&0===Al&&0===(1&t.mode)&&(ql=Je()+500,zi&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Nl?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zi=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),si((function(){0===(6&Al)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Zl=-1,ec=0,0!==(6&Al))throw Error(o(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Al;Al|=2;var s=mc();for(Nl===e&&Rl===t||(Wl=null,ql=Je()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}So(),Cl.current=s,Al=i,null!==Pl?t=0:(Nl=null,Rl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,fc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(s=pt(e))&&(r=s,t=sc(e,s))),1===t))throw n=Ll,fc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Sc(e,Vl,Wl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,Vl,Wl),t);break}Sc(e,Vl,Wl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,Vl,Wl),r);break}Sc(e,Vl,Wl);break;default:throw Error(o(329))}}}return ic(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function sc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function lc(e,t){for(t&=~zl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Al))throw Error(o(327));Ic();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Vl,Wl),ic(e,Je()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=Je()+500,zi&&Bi())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Ic();var t=Al;Al|=1;var n=xl.transition,r=bt;try{if(xl.transition=null,bt=1,e)return e()}finally{bt=r,xl.transition=n,0===(6&(Al=t))&&Bi()}}function dc(){Dl=Ol.current,Ei(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:os(),Ei(Ai),Ei(xi),hs();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ei(ls);break;case 10:Io(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Pl=e=Oc(e.current,null),Rl=Dl=t,Ml=0,Ll=null,zl=Ul=Fl=0,Vl=jl=null,null!==To){for(t=0;t<To.length;t++)if(null!==(r=(n=To[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}To=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(So(),ds.current=sa,vs){for(var r=ms.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vs=!1}if(ps=0,ys=gs=ms=null,bs=!1,ws=0,Tl.current=null,null===n||null===n.return){Ml=1,Ll=t,Pl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(s,u,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),mo(ua(c,l));break e}}s=c=ua(c,l),4!==Ml&&(Ml=2),null===jl?jl=[s]:jl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,pa(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,ma(s,l,t));break e}}s=s.return}while(null!==s)}_c(n)}catch(w){t=w,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function mc(){var e=Cl.current;return Cl.current=sa,null===e?sa:e}function gc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Nl||0===(268435455&Fl)&&0===(268435455&Ul)||lc(Nl,Rl)}function yc(e,t){var n=Al;Al|=2;var r=mc();for(Nl===e&&Rl===t||(Wl=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(So(),Al=n,Cl.current=r,null!==Pl)throw Error(o(261));return Nl=null,Rl=0,Ml}function vc(){for(;null!==Pl;)wc(Pl)}function bc(){for(;null!==Pl&&!Ye();)wc(Pl)}function wc(e){var t=kl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?_c(e):Pl=t,Tl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Dl)))return void(Pl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ml=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ml&&(Ml=5)}function Sc(e,t,n){var r=bt,i=xl.transition;try{xl.transition=null,bt=1,function(e,t,n,r){do{Ic()}while(null!==Yl);if(0!==(6&Al))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Nl&&(Pl=Nl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Nc(tt,(function(){return Ic(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=xl.transition,xl.transition=null;var a=bt;bt=1;var l=Al;Al|=4,Tl.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(_){Ec(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,bl(n,e,i),$e(),Al=l,bt=a,xl.transition=s}else e.current=n;if(Ql&&(Ql=!1,Yl=e,$l=i),s=e.pendingLanes,0===s&&(Gl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Hl,Hl=null,e;0!==(1&$l)&&0!==e.tag&&Ic(),s=e.pendingLanes,0!==(1&s)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,Bi()}(e,t,n,r)}finally{xl.transition=i,bt=r}return null}function Ic(){if(null!==Yl){var e=wt($l),t=xl.transition,n=bt;try{if(xl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Al))throw Error(o(331));var i=Al;for(Al|=4,Za=e.current;null!==Za;){var s=Za,a=s.child;if(0!==(16&Za.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,s)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(sl(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Za=a;else e:for(;null!==Za;){if(0!==(2048&(s=Za).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Za=v;break e}Za=s.return}}var b=e.current;for(Za=b;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=b;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Ec(l,l.return,S)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Al=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,xl.transition=t}}return!1}function kc(e,t,n){e=Mo(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Mo(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Rl&n)===n&&(4===Ml||3===Ml&&(130023424&Rl)===Rl&&500>Je()-Bl?fc(e,0):zl|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=No(e,t))&&(yt(e,t,n),ic(e,n))}function xc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Lc(n.children,i,s,t);case k:a=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=s,e;case A:return(e=Rc(13,n,t,i)).elementType=A,e.lanes=s,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=s,e;case D:return Fc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case T:a=9;break e;case x:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,o,s,a,l){return e=new jc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Rc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ro(o),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Mi(e,n,t)}return t}function qc(e,t,n,r,i,o,s,a,l){return(e=Vc(n,r,!0,e,0,o,0,a,l)).context=Bc(null),n=e.current,(o=Oo(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Mo(n,o,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,o=tc(),s=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Mo(i,t,s))&&(rc(e,i,s,o),Lo(e,i,s)),s}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),po();break;case 5:ss(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(vo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(Ci(ls,1&ls.current),null!==(e=Ka(e,t,n))?e.sibling:null);Ci(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Ka(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,io&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Pi(t,xi.current);Eo(t,n),i=ks(null,t,r,e,i,n);var s=Es();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(s=!0,Li(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ro(t),i.updater=Bo,t.stateNode=i,i._reactInternals=t,Ho(t,r,e,n),t=Aa(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=yo(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,yo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Do(e,t),Uo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Pa(e,t,r,n,i=ua(Error(o(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ua(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ka(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ca(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ua(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Jo(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ci(vo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ai.current){t=Ka(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Oo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ko(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ko(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eo(t,n),r=r(i=Co(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),Ia(e,t,r,i=yo(r.type,i),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Wa(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Eo(t,n),Wo(t,r,i),Ho(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ea(e,t,n)}throw Error(o(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Kc(s);a.call(e)}}Wc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Kc(s);o.call(e)}}var s=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),hc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Kc(s)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Je()),0===(6&Al)&&(ql=Je()+500,Bi()))}break;case 13:hc((function(){var t=No(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},St=function(e){if(13===e.tag){var t=No(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},It=function(e){if(13===e.tag){var t=nc(e),n=No(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},kt=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));G(r),X(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=uc,Ae=hc;var tu={usingClientEntryPoint:!1,Events:[bi,wi,_i,Ce,Te,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,I={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!k.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:I.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+x(l,0):o,_(s)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(s,t,i,"",(function(e){return e}))):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var u=o+x(a=e[c],c);l+=A(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=o+x(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:I};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=I.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,D(S);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(C),C=-1),p=!0;var o=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,k=!1,E=null,C=-1,T=5,x=-1;function A(){return!(t.unstable_now()-x<T)}function N(){if(null!==E){var e=t.unstable_now();x=e;var n=!0;try{n=E(!0,e)}finally{n?I():(k=!1,E=null)}}else k=!1}if("function"===typeof b)I=function(){b(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,I=function(){R.postMessage(null)}}else I=function(){y(N,0)};function D(e){E=e,k||(k=!0,I())}function O(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(C),C=-1):g=!0,O(_,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{A:()=>r})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>ot,SDK_VERSION:()=>Cn,_DEFAULT_ENTRY_NAME:()=>un,_addComponent:()=>mn,_addOrOverwriteComponent:()=>gn,_apps:()=>dn,_clearComponents:()=>Sn,_components:()=>pn,_getProvider:()=>vn,_isFirebaseApp:()=>wn,_isFirebaseServerApp:()=>_n,_registerComponent:()=>yn,_removeServiceInstance:()=>bn,_serverApps:()=>fn,deleteApp:()=>Pn,getApp:()=>An,getApps:()=>Nn,initializeApp:()=>Tn,initializeServerApp:()=>xn,onLog:()=>Dn,registerVersion:()=>Rn,setLogLevel:()=>On});var t,r=n(5043),i=n.t(r,2),o=n(4391),s=n(7950),a=n.t(s,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,a=o.history,h=t.Pop,m=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){h=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:h,location:w.location,delta:n})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let w={get action(){return h},get location(){return e(o,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(c,v),m=e,()=>{o.removeEventListener(c,v),m=null}},createHref:e=>n(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(w.location,e,n);r&&r(i,e),g=y()+1;let l=d(i,g),c=w.createHref(i);try{a.pushState(l,"",c)}catch(Qx){if(Qx instanceof DOMException&&"DataCloneError"===Qx.name)throw Qx;o.location.assign(c)}s&&m&&m({action:h,location:w.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(w.location,e,n);r&&r(i,e),g=y();let o=d(i,g),l=w.createHref(i);a.replaceState(o,"",l),s&&m&&m({action:h,location:w.location,delta:0})},go:e=>a.go(e)};return w}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=R(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=b(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s){let e=P(r);o=A(i[s],e)}return o}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(u(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=F([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),b(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:x(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=w(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,S=3,I=2,k=1,E=10,C=-2,T=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=C),t&&(r+=I),n.filter((e=>!T(e))).reduce(((e,t)=>e+(_.test(t)?S:""===t?k:E)),r)}function A(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;o.push({params:r,pathname:F([i,c.pathname]),pathnameBase:U(F([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=F([i,c.pathnameBase]))}return o}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function P(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Qx){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Qx+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function M(e,t){let n=O(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:z(r),hash:j(i)}}(i,o),h=a&&"/"!==a&&a.endsWith("/"),d=(s||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",j=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const K=r.createContext(null);const H=r.createContext(null);const G=r.createContext(null);const Q=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const $=r.createContext(null);function J(){return null!=r.useContext(Q)}function X(){return J()||u(!1),r.useContext(Q).location}function Z(e){r.useContext(G).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=ue(le.UseNavigateStable),t=de(ce.UseNavigateStable),n=r.useRef(!1);Z((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))}),[e,t]);return i}():function(){J()||u(!1);let e=r.useContext(K),{basename:t,future:n,navigator:i}=r.useContext(G),{matches:o}=r.useContext(Y),{pathname:s}=X(),a=JSON.stringify(M(o,n.v7_relativeSplatPath)),l=r.useRef(!1);return Z((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let o=L(n,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:F([t,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[t,i,a,s,e])}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(G),{matches:o}=r.useContext(Y),{pathname:s}=X(),a=JSON.stringify(M(o,i.v7_relativeSplatPath));return r.useMemo((()=>L(e,JSON.parse(a),s,"path"===n)),[e,a,s,n])}function ne(e,n,i,o){J()||u(!1);let{navigator:s}=r.useContext(G),{matches:a}=r.useContext(Y),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=X();if(n){var p;let e="string"===typeof n?m(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let g=d.pathname||"/",y=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(e,{pathname:y});let w=ae(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([h,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,o);return n&&w?r.createElement(Q.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},w):w}function re(){let e=function(){var e;let t=r.useContext($),n=he(ce.UseRouteError),i=de(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,null)}const ie=r.createElement(re,null);class oe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(K);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function ae(e,t,n,i){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let a=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,u=!1,d=null,f=null;var p;n&&(s=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||ie,c&&(h<0&&0===o?(p="route-fallback",!1||fe[p]||(fe[p]=!0),u=!0,f=null):h===o&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,o+1)),g=()=>{let t;return t=s?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(se,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement(oe,{location:n.location,revalidation:n.revalidation,component:d,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let t=r.useContext(K);return t||u(!1),t}function he(e){let t=r.useContext(H);return t||u(!1),t}function de(e){let t=function(e){let t=r.useContext(Y);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const fe={};i.startTransition;function pe(e){u(!1)}function me(e){let{basename:n="/",children:i=null,location:o,navigationType:s=t.Pop,navigator:a,static:l=!1,future:c}=e;J()&&u(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof o&&(o=m(o));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=o,b=r.useMemo((()=>{let e=R(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:y,key:v},navigationType:s}}),[h,f,p,g,y,v,s]);return null==b?null:r.createElement(G.Provider,{value:d},r.createElement(Q.Provider,{children:i,value:b}))}function ge(e){let{children:t,location:n}=e;return ne(ye(t),n)}new Promise((()=>{}));r.Component;function ye(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ye(e.props.children,o));e.type!==pe&&u(!1),e.props.index&&e.props.children&&u(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ye(e.props.children,o)),n.push(s)})),n}function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}function be(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const we=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_e=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Dz){}const Se=r.createContext({isTransitioning:!1});new Map;const Ie=i.startTransition;a.flushSync,i.useId;function ke(e){let{basename:t,children:n,future:i,window:o}=e,s=r.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=m(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:p(t))}),(function(e,t){h("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),a)));let l=s.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},y=r.useCallback((e=>{d&&Ie?Ie((()=>u(e))):u(e)}),[u,d]);return r.useLayoutEffect((()=>l.listen(y)),[l,y]),r.createElement(me,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=r.forwardRef((function(e,t){let n,{onClick:i,relative:o,reloadDocument:s,replace:a,state:l,target:c,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,m=be(e,we),{basename:g}=r.useContext(G),y=!1;if("string"===typeof h&&Ce.test(h)&&(n=h,Ee))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=R(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:y=!0}catch(Dz){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;J()||u(!1);let{basename:i,navigator:o}=r.useContext(G),{hash:s,pathname:a,search:l}=te(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:F([i,a])),o.createHref({pathname:c,search:l,hash:s})}(h,{relative:o}),b=function(e,t){let{target:n,replace:i,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=ee(),u=X(),h=te(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(u)===p(h);c(e,{replace:n,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,o,n,e,s,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:o,unstable_viewTransition:f});return r.createElement("a",ve({},m,{href:n||v,onClick:y||s?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:t,target:c}))}));const xe=r.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:o="",end:s=!1,style:a,to:l,unstable_viewTransition:c,children:h}=e,d=be(e,_e),f=te(l,{relative:d.relative}),p=X(),m=r.useContext(H),{navigator:g,basename:y}=r.useContext(G),v=null!=m&&function(e,t){void 0===t&&(t={});let n=r.useContext(Se);null==n&&u(!1);let{basename:i}=Pe(Ae.useViewTransitionState),o=te(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=R(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=R(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=N(o.pathname,a)||null!=N(o.pathname,s)}(f)&&!0===c,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&y&&(_=R(_,y)||_);const S="/"!==b&&b.endsWith("/")?b.length-1:b.length;let I,k=w===b||!s&&w.startsWith(b)&&"/"===w.charAt(S),E=null!=_&&(_===b||!s&&_.startsWith(b)&&"/"===_.charAt(b.length)),C={isActive:k,isPending:E,isTransitioning:v},T=k?n:void 0;I="function"===typeof o?o(C):[o,k?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let x="function"===typeof a?a(C):a;return r.createElement(Te,ve({},d,{"aria-current":T,className:I,ref:t,style:x,to:l,unstable_viewTransition:c}),"function"===typeof h?h(C):h)}));var Ae,Ne;function Pe(e){let t=r.useContext(K);return t||u(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ne||(Ne={}));const Re=!1,De=!1,Oe="${JSCORE_VERSION}",Me=function(e,t){if(!e)throw Le(t)},Le=function(e){return new Error("Firebase Database ("+Oe+") INTERNAL ASSERT FAILED: "+e)},Fe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Fe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new ze;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ze extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const je=function(e){const t=Fe(e);return Ue.encodeByteArray(t,!0)},Ve=function(e){return je(e).replace(/\./g,"")},Be=function(e){try{return Ue.decodeString(e,!0)}catch(Dz){console.error("base64Decode failed: ",Dz)}return null};function qe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=qe(e[n],t[n]));return e}const We=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ke=()=>{try{return We()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/chat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Dz){return}const t=e&&Be(e[1]);return t&&JSON.parse(t)})()}catch(Dz){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Dz))}},He=()=>{var e;return null===(e=Ke())||void 0===e?void 0:e.config};class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Qe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ve(JSON.stringify({alg:"none",type:"JWT"})),Ve(JSON.stringify(o)),""].join(".")}function Ye(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function $e(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function Je(){var e;const t=null===(e=Ke())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Dz){return!1}}function Xe(){return"object"===typeof self&&self.self===self}function Ze(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function et(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function tt(){const e=Ye();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function nt(){return!0===Re||!0===De}function rt(){return!Je()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function it(){try{return"object"===typeof indexedDB}catch(Dz){return!1}}class ot extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,st.prototype.create)}}class st{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(at,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ot(n,o,t)}}const at=/\{\$([^}]+)}/g;function lt(e){return JSON.parse(e)}function ct(e){return JSON.stringify(e)}const ut=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=lt(Be(o[0])||""),n=lt(Be(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(Dz){}return{header:t,claims:n,data:r,signature:i}};function ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ft(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function pt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function mt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(gt(n)&&gt(o)){if(!mt(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gt(e){return null!==e&&"object"===typeof e}function yt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function vt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function bt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class wt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^s&(a^l),i=1518500249):(r=s^a^l,i=1859775393):u<60?(r=s&a|l&(s|a),i=2400959708):(r=s^a^l,i=3395469782);const e=(o<<5|o>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(s<<30|s>>>2),s=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function _t(e,t){const n=new St(e,t);return n.subscribe.bind(n)}class St{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=It),void 0===r.error&&(r.error=It),void 0===r.complete&&(r.complete=It);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Dz){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Dz){"undefined"!==typeof console&&console.error&&console.error(Dz)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function It(){}const kt=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}};function Et(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Ct(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Et(e,t)+"must be a valid function.")}function Tt(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Et(e,t)+"must be a valid context object.")}const xt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function At(e){return e&&e._delegate?e._delegate:e}class Nt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Pt="[DEFAULT]";class Rt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ge;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Dz){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Dz){if(r)return null;throw Dz}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Pt})}catch(Dz){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Dz){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return this.component?this.component.multipleInstances?e:Pt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Dt(e){return e===Pt?void 0:e}class Ot{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Rt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Mt=[];var Lt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Lt||(Lt={}));const Ft={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},Ut=Lt.INFO,zt={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},jt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=zt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Vt{constructor(e){this.name=e,this._logLevel=Ut,this._logHandler=jt,this._userLogHandler=null,Mt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ft[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}const Bt=(e,t)=>t.some((t=>e instanceof t));let qt,Wt;const Kt=new WeakMap,Ht=new WeakMap,Gt=new WeakMap,Qt=new WeakMap,Yt=new WeakMap;let $t={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ht.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Gt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Jt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Wt||(Wt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(en(this),n),Zt(Kt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zt(e.apply(en(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(en(this),t,...r);return Gt.set(o,t.sort?t.sort():[t]),Zt(o)}}function Xt(e){return"function"===typeof e?Jt(e):(e instanceof IDBTransaction&&function(e){if(Ht.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Ht.set(e,t)}(e),Bt(e,qt||(qt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,$t):e)}function Zt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Zt(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Kt.set(t,e)})).catch((()=>{})),Yt.set(t,e),t}(e);if(Qt.has(e))return Qt.get(e);const t=Xt(e);return t!==e&&(Qt.set(e,t),Yt.set(t,e)),t}const en=e=>Yt.get(e);const tn=["get","getKey","getAll","getAllKeys","count"],nn=["put","add","delete","clear"],rn=new Map;function on(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(rn.get(t))return rn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=nn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!tn.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return rn.set(t,o),o}$t=(e=>({...e,get:(t,n,r)=>on(t,n)||e.get(t,n,r),has:(t,n)=>!!on(t,n)||e.has(t,n)}))($t);class sn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const an="@firebase/app",ln="0.10.0",cn=new Vt("@firebase/app"),un="[DEFAULT]",hn={[an]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,fn=new Map,pn=new Map;function mn(e,t){try{e.container.addComponent(t)}catch(Dz){cn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Dz)}}function gn(e,t){e.container.addOrOverwriteComponent(t)}function yn(e){const t=e.name;if(pn.has(t))return cn.debug("There were multiple attempts to register component ".concat(t,".")),!1;pn.set(t,e);for(const n of dn.values())mn(n,e);for(const n of fn.values())mn(n,e);return!0}function vn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function bn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:un;vn(e,t).clearInstance(n)}function wn(e){return void 0!==e.options}function _n(e){return void 0!==e.settings}function Sn(){pn.clear()}const In=new st("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class kn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Nt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}}class En extends kn{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,o={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,o,r);else{super(e.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Rn(an,ln,"serverapp")}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Pn(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw In.create("server-app-deleted")}}const Cn="10.10.0";function Tn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:un,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw In.create("bad-app-name",{appName:String(i)});if(n||(n=He()),!n)throw In.create("no-options");const o=dn.get(i);if(o){if(mt(n,o.options)&&mt(r,o.config))return o;throw In.create("duplicate-app",{appName:i})}const s=new Ot(i);for(const l of pn.values())s.addComponent(l);const a=new kn(n,r,s);return dn.set(i,a),a}function xn(e,t){if(Xe())throw In.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=wn(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw In.create("finalization-registry-not-supported",{});const i=""+(o=JSON.stringify(r),[...o].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var o;const s=fn.get(i);if(s)return s.incRefCount(t.releaseOnDeref),s;const a=new Ot(i);for(const c of pn.values())a.addComponent(c);const l=new En(n,t,i,a);return fn.set(i,l),l}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:un;const t=dn.get(e);if(!t&&e===un&&He())return Tn();if(!t)throw In.create("no-app",{appName:e});return t}function Nn(){return Array.from(dn.values())}async function Pn(e){let t=!1;const n=e.name;if(dn.has(n))t=!0,dn.delete(n);else if(fn.has(n)){e.decRefCount()<=0&&(fn.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Rn(e,t,n){var r;let i=null!==(r=hn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void cn.warn(e.join(" "))}yn(new Nt("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Dn(e,t){if(null!==e&&"function"!==typeof e)throw In.create("invalid-log-argument");!function(e,t){for(const n of Mt){let r=null;t&&t.level&&(r=Ft[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Lt[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function On(e){var t;t=e,Mt.forEach((e=>{e.setLogLevel(t)}))}const Mn="firebase-heartbeat-database",Ln=1,Fn="firebase-heartbeat-store";let Un=null;function zn(){return Un||(Un=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Zt(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Zt(s.result),e.oldVersion,e.newVersion,Zt(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Mn,Ln,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Fn)}catch(Dz){console.warn(Dz)}}}).catch((e=>{throw In.create("idb-open",{originalErrorMessage:e.message})}))),Un}async function jn(e,t){try{const n=(await zn()).transaction(Fn,"readwrite"),r=n.objectStore(Fn);await r.put(t,Vn(e)),await n.done}catch(Dz){if(Dz instanceof ot)cn.warn(Dz.message);else{const t=In.create("idb-set",{originalErrorMessage:null===Dz||void 0===Dz?void 0:Dz.message});cn.warn(t.message)}}}function Vn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Bn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=qn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=qn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Kn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Kn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ve(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function qn(){return(new Date).toISOString().substring(0,10)}class Wn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!it()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Qx){t(Qx)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await zn()).transaction(Fn),n=await t.objectStore(Fn).get(Vn(e));return await t.done,n}catch(Dz){if(Dz instanceof ot)cn.warn(Dz.message);else{const t=In.create("idb-get",{originalErrorMessage:null===Dz||void 0===Dz?void 0:Dz.message});cn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Kn(e){return Ve(JSON.stringify({version:2,heartbeats:e})).length}var Hn;Hn="",yn(new Nt("platform-logger",(e=>new sn(e)),"PRIVATE")),yn(new Nt("heartbeat",(e=>new Bn(e)),"PRIVATE")),Rn(an,ln,Hn),Rn(an,ln,"esm2017"),Rn("fire-js","");class Gn{constructor(e,t){this._delegate=e,this.firebase=t,mn(e,new Nt("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Pn(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){mn(this._delegate,e)}_addOrOverwriteComponent(e){gn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Qn=new st("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Yn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Tn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ht(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:Rn,setLogLevel:On,onLog:Dn,apps:null,SDK_VERSION:Cn,INTERNAL:{registerComponent:function(e){const n=e.name,o=n.replace("-compat","");if(yn(e)&&"PUBLIC"===e.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw Qn.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&qe(s,e.serviceProps),r[o]=s,t.prototype[o]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ht(n,e=e||un))throw Qn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Gn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){qe(n,e)},createSubscribe:_t,ErrorFactory:st,deepExtend:qe}),n}(),$n=new Vt("@firebase/app-compat");if(Xe()&&void 0!==self.firebase){$n.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&$n.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Jn=Yn;!function(e){Rn("@firebase/app-compat","0.2.30",e)}();Jn.registerVersion("firebase","10.10.0","app-compat");function Xn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Zn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},er="EMAIL_SIGNIN",tr="PASSWORD_RESET",nr="RECOVER_EMAIL",rr="REVERT_SECOND_FACTOR_ADDITION",ir="VERIFY_AND_CHANGE_EMAIL",or="VERIFY_EMAIL";function sr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ar=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},lr=sr,cr=new st("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ur=new Vt("@firebase/auth");function hr(e){if(ur.logLevel<=Lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ur.error("Auth (".concat(Cn,"): ").concat(e),...n)}}function dr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw yr(e,...n)}function fr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yr(e,...n)}function pr(e,t,n){const r=Object.assign(Object.assign({},lr()),{[t]:n});return new st("auth","Firebase",r).create(t,{appName:e.name})}function mr(e){return pr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&dr(e,"argument-error"),pr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function yr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return cr.create(e,...n)}function vr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw yr(t,...r)}}function br(e){const t="INTERNAL ASSERTION FAILED: "+e;throw hr(t),new Error(t)}function wr(e,t){e||br(t)}function _r(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Sr(){return"http:"===Ir()||"https:"===Ir()}function Ir(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class kr{constructor(e,t){this.shortDelay=e,this.longDelay=t,wr(t>e,"Short delay should be less than long delay!"),this.isMobile=$e()||et()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Sr()||Ze()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Er(e,t){wr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Cr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},xr=new kr(3e4,6e4);function Ar(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Nr(e,t,n,r){return Pr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=yt(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Cr.fetch()(Dr(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Pr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Tr),t);try{const t=new Mr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Lr(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Lr(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Lr(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Lr(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw pr(e,a,s);dr(e,a)}}catch(Dz){if(Dz instanceof ot)throw Dz;dr(e,"network-request-failed",{message:String(Dz)})}}async function Rr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Nr(e,t,n,r,i);return"mfaPendingCredential"in o&&dr(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Dr(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Er(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Or(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Mr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(fr(this.auth,"network-request-failed"))),xr.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=fr(e,t,r);return i.customData._tokenResponse=n,i}function Fr(e){return void 0!==e&&void 0!==e.getResponse}function Ur(e){return void 0!==e&&void 0!==e.enterprise}class zr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Or(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function jr(e,t){return Nr(e,"GET","/v2/recaptchaConfig",Ar(e,t))}async function Vr(e,t){return Nr(e,"POST","/v1/accounts:lookup",t)}function Br(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Dz){}}function qr(e){return 1e3*Number(e)}function Wr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return hr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Be(n);return e?JSON.parse(e):(hr("Failed to decode base64 JWT payload"),null)}catch(Dz){return hr("Caught error parsing JWT payload as JSON",null===Dz||void 0===Dz?void 0:Dz.toString()),null}}function Kr(e){const t=Wr(e);return vr(t,"internal-error"),vr("undefined"!==typeof t.exp,"internal-error"),vr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Hr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Dz){throw Dz instanceof ot&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Dz)&&e.auth.currentUser===e&&await e.auth.signOut(),Dz}}class Gr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Dz){return void((null===Dz||void 0===Dz?void 0:Dz.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Qr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Br(this.lastLoginAt),this.creationTime=Br(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Hr(e,Vr(n,{idToken:r}));vr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?$r(o.providerUserInfo):[],a=(l=e.providerData,c=s,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Qr(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function $r(e){return e.map((e=>{var{providerId:t}=e,n=Xn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Jr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vr(e.idToken,"internal-error"),vr("undefined"!==typeof e.idToken,"internal-error"),vr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Kr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){vr(0!==e.length,"internal-error");const t=Kr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(vr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Pr(e,{},(async()=>{const n=yt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Dr(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Cr.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Jr;return n&&(vr("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(vr("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(vr("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jr,this.toJSON())}_performRefresh(){return br("not implemented")}}function Xr(e,t){vr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Zr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Xn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Hr(this,this.stsTokenManager.getToken(this.auth,e));return vr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=At(e),r=await n.getIdToken(t),i=Wr(r);vr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Br(qr(i.auth_time)),issuedAtTime:Br(qr(i.iat)),expirationTime:Br(qr(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=At(e);await Yr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(vr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){vr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Yr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(mr(this.auth));const e=await this.getIdToken();return await Hr(this,async function(e,t){return Nr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:S}=t;vr(v&&S,e,"internal-error");const I=Jr.fromJSON(this.name,S);vr("string"===typeof v,e,"internal-error"),Xr(u,e.name),Xr(h,e.name),vr("boolean"===typeof b,e,"internal-error"),vr("boolean"===typeof w,e,"internal-error"),Xr(d,e.name),Xr(f,e.name),Xr(p,e.name),Xr(m,e.name),Xr(g,e.name),Xr(y,e.name);const k=new Zr({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(k.providerData=_.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Jr;r.updateFromServerResponse(t);const i=new Zr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Yr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];vr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?$r(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new Jr;s.updateFromIdToken(n);const a=new Zr({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Qr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const ei=new Map;function ti(e){wr(e instanceof Function,"Expected a class definition");let t=ei.get(e);return t?(wr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ei.set(e,t),t)}class ni{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ni.type="NONE";const ri=ni;function ii(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class oi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ii(this.userKey,r.apiKey,i),this.fullPersistenceKey=ii("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new oi(ti(ri),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ti(ri);const o=ii(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){const n=Zr._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(l){}}))),new oi(i,e,n)):new oi(i,e,n)}}function si(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ui(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ai(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(di(t))return"Blackberry";if(fi(t))return"Webos";if(li(t))return"Safari";if((t.includes("chrome/")||ci(t))&&!t.includes("edge/"))return"Chrome";if(hi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return/firefox\//i.test(e)}function li(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return/crios\//i.test(e)}function ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return/iemobile/i.test(e)}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return/android/i.test(e)}function di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return/blackberry/i.test(e)}function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return/webos/i.test(e)}function pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return pi(e)||hi(e)||fi(e)||di(e)||/windows phone/i.test(e)||ui(e)}function gi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=si(Ye());break;case"Worker":t="".concat(si(Ye()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Cn,"/").concat(r)}class yi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(Dz){r(Dz)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Dz){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Dz||void 0===Dz?void 0:Dz.message})}}}class vi{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class bi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _i(this),this.idTokenSubscription=new _i(this),this.beforeStateQueue=new yi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ti(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await oi.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Dz){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Vr(this,{idToken:e}),n=await Zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_n(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Dz){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(Dz)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return vr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Dz){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yr(e)}catch(Dz){if((null===Dz||void 0===Dz?void 0:Dz.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(mr(this));const t=e?At(e):null;return t&&vr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&vr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return _n(this.app)?Promise.reject(mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(mr(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ti(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Nr(e,"GET","/v2/passwordPolicy",Ar(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new vi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new st("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Nr(e,"POST","/v2/accounts:revokeToken",Ar(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ti(e)||this._popupRedirectResolver;vr(t,this,"argument-error"),this.redirectPersistenceManager=await oi.create(this,[ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(vr(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ur.logLevel<=Lt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ur.warn("Auth (".concat(Cn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function wi(e){return At(e)}class _i{constructor(e){this.auth=e,this.observer=null,this.addObserver=_t((e=>this.observer=e))}get next(){return vr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Si={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ii(e){return Si.loadJS(e)}function ki(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ei{constructor(e){this.type="recaptcha-enterprise",this.auth=wi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ur(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{jr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new zr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Ur(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Si.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ii(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Ci(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Ei(e);let o;try{o=await i.verify(n)}catch(Qx){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Ti(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ci(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Ci(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function xi(e,t,n){const r=wi(e);vr(r._canInitEmulator,r,"emulator-config-failed"),vr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Ai(t),{host:s,port:a}=function(e){const t=Ai(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ni(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ni(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ai(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ni(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Pi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,t){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}async function Ri(e,t){return Nr(e,"POST","/v1/accounts:resetPassword",Ar(e,t))}async function Di(e,t){return Nr(e,"POST","/v1/accounts:signUp",t)}async function Oi(e,t){return Rr(e,"POST","/v1/accounts:signInWithPassword",Ar(e,t))}async function Mi(e,t){return Nr(e,"POST","/v1/accounts:sendOobCode",Ar(e,t))}async function Li(e,t){return Mi(e,t)}async function Fi(e,t){return Mi(e,t)}class Ui extends Pi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ui(e,t,"password")}static _fromEmailAndCode(e,t){return new Ui(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ti(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Oi);case"emailLink":return async function(e,t){return Rr(e,"POST","/v1/accounts:signInWithEmailLink",Ar(e,t))}(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ti(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Di);case"emailLink":return async function(e,t){return Rr(e,"POST","/v1/accounts:signInWithEmailLink",Ar(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function zi(e,t){return Rr(e,"POST","/v1/accounts:signInWithIdp",Ar(e,t))}class ji extends Pi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Xn(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new ji(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return zi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,zi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yt(t)}return e}}const Vi={USER_NOT_FOUND:"user-not-found"};class Bi extends Pi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Bi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Bi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Rr(e,"POST","/v1/accounts:signInWithPhoneNumber",Ar(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Rr(e,"POST","/v1/accounts:signInWithPhoneNumber",Ar(e,t));if(n.temporaryProof)throw Lr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Rr(e,"POST","/v1/accounts:signInWithPhoneNumber",Ar(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Vi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Bi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class qi{constructor(e){var t,n,r,i,o,s;const a=vt(bt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);vr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=vt(bt(e)).link,n=t?vt(bt(t)).deep_link_id:null,r=vt(bt(e)).deep_link_id;return(r?vt(bt(r)).link:null)||r||n||t||e}(e);try{return new qi(t)}catch(n){return null}}}class Wi{constructor(){this.providerId=Wi.PROVIDER_ID}static credential(e,t){return Ui._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=qi.parseLink(t);return vr(n,"argument-error"),Ui._fromEmailAndCode(e,n.code,n.tenantId)}}Wi.PROVIDER_ID="password",Wi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Wi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ki{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Hi extends Ki{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gi extends Hi{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return vr("providerId"in t&&"signInMethod"in t,"argument-error"),ji._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return vr(e.idToken||e.accessToken,"argument-error"),ji._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Gi.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Gi.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=t;if(!r&&!i&&!n&&!o)return null;if(!a)return null;try{return new Gi(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch(Dz){return null}}}class Qi extends Hi{constructor(){super("facebook.com")}static credential(e){return ji._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qi.credential(t.oauthAccessToken)}catch(n){return null}}}Qi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Qi.PROVIDER_ID="facebook.com";class Yi extends Hi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ji._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Yi.credential(n,r)}catch(i){return null}}}Yi.GOOGLE_SIGN_IN_METHOD="google.com",Yi.PROVIDER_ID="google.com";class $i extends Hi{constructor(){super("github.com")}static credential(e){return ji._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $i.credential(t.oauthAccessToken)}catch(n){return null}}}$i.GITHUB_SIGN_IN_METHOD="github.com",$i.PROVIDER_ID="github.com";class Ji extends Pi{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return zi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,zi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zi(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Ji(n,i):null}static _create(e,t){return new Ji(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Xi extends Ki{constructor(e){vr(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Xi.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Xi.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Ji.fromJSON(e);return vr(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Ji._create(r,n)}catch(Dz){return null}}}class Zi extends Hi{constructor(){super("twitter.com")}static credential(e,t){return ji._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Zi.credential(n,r)}catch(i){return null}}}async function eo(e,t){return Rr(e,"POST","/v1/accounts:signUp",Ar(e,t))}Zi.TWITTER_SIGN_IN_METHOD="twitter.com",Zi.PROVIDER_ID="twitter.com";class to{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Zr._fromIdTokenResponse(e,n,r),o=no(n);return new to({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=no(n);return new to({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function no(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ro extends ot{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ro.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ro(e,t,n,r)}}function io(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw ro._fromErrorAndOperation(e,n,t,r);throw n}))}function oo(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function so(e,t){const n=At(e);await lo(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Nr(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=oo(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ao(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Hr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return to._forOperation(e,"link",r)}async function lo(e,t,n){await Yr(t);const r=!1===e?"provider-already-linked":"no-such-provider";vr(oo(t.providerData).has(n)===e,t.auth,r)}async function co(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(_n(r.app))return Promise.reject(mr(r));const i="reauthenticate";try{const o=await Hr(e,io(r,i,t,e),n);vr(o.idToken,r,"internal-error");const s=Wr(o.idToken);vr(s,r,"internal-error");const{sub:a}=s;return vr(e.uid===a,r,"user-mismatch"),to._forOperation(e,i,o)}catch(Dz){throw(null===Dz||void 0===Dz?void 0:Dz.code)==="auth/".concat("user-not-found")&&dr(r,"user-mismatch"),Dz}}async function uo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_n(e.app))return Promise.reject(mr(e));const r="signIn",i=await io(e,r,t),o=await to._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function ho(e,t){return uo(wi(e),t)}async function fo(e,t){const n=At(e);return await lo(!1,n,t.providerId),ao(n,t)}async function po(e,t){return co(At(e),t)}async function mo(e,t){if(_n(e.app))return Promise.reject(mr(e));const n=wi(e),r=await async function(e,t){return Rr(e,"POST","/v1/accounts:signInWithCustomToken",Ar(e,t))}(n,{token:t,returnSecureToken:!0}),i=await to._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class go{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?yo._fromServerResponse(e,t):"totpInfo"in t?vo._fromServerResponse(e,t):dr(e,"internal-error")}}class yo extends go{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new yo(t)}}class vo extends go{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new vo(t)}}function bo(e,t,n){var r;vr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),vr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(vr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(vr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function wo(e){const t=wi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function _o(e,t){await async function(e,t){return Nr(e,"POST","/v1/accounts:update",Ar(e,t))}(At(e),{oobCode:t})}async function So(e,t){const n=At(e),r=await Ri(n,{oobCode:t}),i=r.requestType;switch(vr(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":vr(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":vr(r.mfaInfo,n,"internal-error");default:vr(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=go._fromServerResponse(wi(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function Io(e,t){const n={identifier:t,continueUri:Sr()?_r():"http://localhost"},{signinMethods:r}=await async function(e,t){return Nr(e,"POST","/v1/accounts:createAuthUri",Ar(e,t))}(At(e),n);return r||[]}async function ko(e,t){const n=At(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&bo(n.auth,r,t);const{email:i}=await async function(e,t){return Mi(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Eo(e,t,n){const r=At(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&bo(r.auth,i,n);const{email:o}=await async function(e,t){return Mi(e,t)}(r.auth,i);o!==e.email&&await e.reload()}async function Co(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=At(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await Hr(i,async function(e,t){return Nr(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function To(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await Hr(e,async function(e,t){return Nr(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}class xo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Ao extends xo{constructor(e,t,n,r){super(e,t,n),this.username=r}}class No extends xo{constructor(e,t){super(e,"facebook.com",t)}}class Po extends Ao{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Ro extends xo{constructor(e,t){super(e,"google.com",t)}}class Do extends Ao{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Oo(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Wr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new xo(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new No(o,i);case"github.com":return new Po(o,i);case"google.com":return new Ro(o,i);case"twitter.com":return new Do(o,i,e.screenName||null);case"custom":case"anonymous":return new xo(o,null);default:return new xo(o,r,i)}}(n)}class Mo{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Mo("enroll",e,t)}static _fromMfaPendingCredential(e){return new Mo("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Mo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Mo._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Lo{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=wi(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>go._fromServerResponse(n,e)));vr(r.mfaPendingCredential,n,"internal-error");const o=Mo._fromMfaPendingCredential(r.mfaPendingCredential);return new Lo(o,i,(async e=>{const i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await to._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return vr(t.user,n,"internal-error"),to._forOperation(t.user,t.operationType,s);default:dr(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Fo{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>go._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Fo(e)}async getSession(){return Mo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Hr(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Hr(this.user,function(e,t){return Nr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Ar(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(Dz){throw Dz}}}const Uo=new WeakMap;const zo="__sak";class jo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zo,"1"),this.storage.removeItem(zo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Vo extends jo{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ye();return li(e)||pi(e)}()&&function(){try{return!(!window||window===window.top)}catch(Dz){return!1}}(),this.fallbackToPolling=mi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);tt()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vo.type="LOCAL";const Bo=Vo;class qo extends jo{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qo.type="SESSION";const Wo=qo;class Ko{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ko(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ho(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ko.receivers=[];class Go{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const l=Ho("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function Qo(){return window}function Yo(){return"undefined"!==typeof Qo().WorkerGlobalScope&&"function"===typeof Qo().importScripts}const $o="firebaseLocalStorageDb",Jo="firebaseLocalStorage",Xo="fbase_key";class Zo{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function es(e,t){return e.transaction([Jo],t?"readwrite":"readonly").objectStore(Jo)}function ts(){const e=indexedDB.open($o,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Jo,{keyPath:Xo})}catch(Dz){n(Dz)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Jo)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase($o);return new Zo(e).toPromise()}(),t(await ts()))}))}))}async function ns(e,t,n){const r=es(e,!0).put({[Xo]:t,value:n});return new Zo(r).toPromise()}function rs(e,t){const n=es(e,!0).delete(t);return new Zo(n).toPromise()}class is{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ts()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Dz){if(t++>3)throw Dz;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yo()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ko._getInstance(Yo()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Go(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ts();return await ns(e,zo,"1"),await rs(e,zo),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ns(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=es(e,!1).get(t),r=await new Zo(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>rs(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=es(e,!1).getAll();return new Zo(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}is.type="LOCAL";const os=is;const ss=1e12;class as{constructor(e){this.auth=e,this.counter=ss,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new ls(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||ss;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||ss;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||ss;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class ls{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;vr(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(Dz){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(Dz){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const cs=ki("rcb"),us=new kr(3e4,6e4);class hs{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Qo().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return vr(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Fr(Qo().grecaptcha)?Promise.resolve(Qo().grecaptcha):new Promise(((n,r)=>{const i=Qo().setTimeout((()=>{r(fr(e,"network-request-failed"))}),us.get());Qo()[cs]=()=>{Qo().clearTimeout(i),delete Qo()[cs];const o=Qo().grecaptcha;if(!o||!Fr(o))return void r(fr(e,"internal-error"));const s=o.render;o.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};Ii("".concat(Si.recaptchaV2Script,"?").concat(yt({onload:cs,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(fr(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Qo().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ds{async load(e){return new as(e)}clearedOneInstance(){}}const fs="recaptcha",ps={theme:"light",type:"image"};class ms{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},ps);this.parameters=n,this.type=fs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wi(e),this.isInvisible="invisible"===this.parameters.size,vr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;vr(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ds:new hs,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(Dz){return Promise.reject(Dz)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){vr(!this.parameters.sitekey,this.auth,"argument-error"),vr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),vr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Qo()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){vr(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){vr(Sr()&&!Yo(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Nr(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);vr(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return vr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gs{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Bi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ys(e,t,n){var r;const i=await n.verify();try{let o;if(vr("string"===typeof i,e,"argument-error"),vr(n.type===fs,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){vr("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Nr(e,"POST","/v2/accounts/mfaEnrollment:start",Ar(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{vr("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;vr(n,e,"missing-multi-factor-info");const s=await function(e,t){return Nr(e,"POST","/v2/accounts/mfaSignIn:start",Ar(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Nr(e,"POST","/v1/accounts:sendVerificationCode",Ar(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class vs{constructor(e){this.providerId=vs.PROVIDER_ID,this.auth=wi(e)}verifyPhoneNumber(e,t){return ys(this.auth,e,At(t))}static credential(e,t){return Bi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return vs.credentialFromTaggedObject(t)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Bi._fromTokenResponse(n,r):null}}function bs(e,t){return t?ti(t):(vr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}vs.PROVIDER_ID="phone",vs.PHONE_SIGN_IN_METHOD="phone";class ws extends Pi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _s(e){return uo(e.auth,new ws(e),e.bypassAuthState)}function Ss(e){const{auth:t,user:n}=e;return vr(n,t,"internal-error"),co(n,new ws(e),e.bypassAuthState)}async function Is(e){const{auth:t,user:n}=e;return vr(n,t,"internal-error"),ao(n,new ws(e),e.bypassAuthState)}class ks{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Dz){this.reject(Dz)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(Dz){this.reject(Dz)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _s;case"linkViaPopup":case"linkViaRedirect":return Is;case"reauthViaPopup":case"reauthViaRedirect":return Ss;default:dr(this.auth,"internal-error")}}resolve(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Es=new kr(2e3,1e4);class Cs extends ks{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Cs.currentPopupAction&&Cs.currentPopupAction.cancel(),Cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vr(e,this.auth,"internal-error"),e}async onExecution(){wr(1===this.filter.length,"Popup operations only handle one event");const e=Ho();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(fr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Es.get())};e()}}Cs.currentPopupAction=null;const Ts="pendingRedirect",xs=new Map;class As extends ks{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=xs.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ds(t),r=Rs(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Dz){e=()=>Promise.reject(Dz)}xs.set(this.auth._key(),e)}return this.bypassAuthState||xs.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Ns(e,t){return Rs(e)._set(Ds(t),"true")}function Ps(e,t){xs.set(e._key(),t)}function Rs(e){return ti(e._redirectPersistence)}function Ds(e){return ii(Ts,e.config.apiKey,e.name)}function Os(e,t,n){return async function(e,t,n){if(_n(e.app))return Promise.reject(mr(e));const r=wi(e);gr(e,t,Ki),await r._initializationPromise;const i=bs(r,n);return await Ns(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Ms(e,t,n){return async function(e,t,n){const r=At(e);if(gr(r.auth,t,Ki),_n(r.auth.app))return Promise.reject(mr(r.auth));await r.auth._initializationPromise;const i=bs(r.auth,n);await Ns(i,r.auth);const o=await Us(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)}(e,t,n)}function Ls(e,t,n){return async function(e,t,n){const r=At(e);gr(r.auth,t,Ki),await r.auth._initializationPromise;const i=bs(r.auth,n);await lo(!1,r,t.providerId),await Ns(i,r.auth);const o=await Us(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}async function Fs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_n(e.app))return Promise.reject(mr(e));const r=wi(e),i=bs(r,t),o=new As(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}async function Us(e){const t=Ho("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class zs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Vs(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(fr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(js(e))}saveEventToCache(e){this.cachedEventUids.add(js(e)),this.lastProcessedEventTime=Date.now()}}function js(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Vs(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function Bs(e){return Nr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const qs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ws=/^https?/;function Ks(e){const t=_r(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ws.test(n))return!1;if(qs.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Hs=new kr(3e4,6e4);function Gs(){const e=Qo().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Qs(e){return new Promise(((t,n)=>{var r,i,o;function s(){Gs(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Gs(),n(fr(e,"network-request-failed"))},timeout:Hs.get()})}if(null===(i=null===(r=Qo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Qo().gapi)||void 0===o?void 0:o.load)){const t=ki("iframefcb");return Qo()[t]=()=>{gapi.load?s():n(fr(e,"network-request-failed"))},Ii("".concat(Si.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw Ys=null,e}))}let Ys=null;const $s=new kr(5e3,15e3),Js="__/auth/iframe",Xs="emulator/auth/iframe",Zs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ea=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ta(e){const t=e.config;vr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Er(t,Xs):"https://".concat(e.config.authDomain,"/").concat(Js),r={apiKey:t.apiKey,appName:e.name,v:Cn},i=ea.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(yt(r).slice(1))}async function na(e){const t=await function(e){return Ys=Ys||Qs(e),Ys}(e),n=Qo().gapi;return vr(n,e,"internal-error"),t.open({where:document.body,url:ta(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zs,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=fr(e,"network-request-failed"),o=Qo().setTimeout((()=>{r(i)}),$s.get());function s(){Qo().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const ra={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ia{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Dz){}}}function oa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ra),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Ye().toLowerCase();n&&(a=ci(c)?"_blank":n),ai(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return pi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ia(null);const h=window.open(t||"",a,u);vr(h,e,"popup-blocked");try{h.focus()}catch(Dz){}return new ia(h)}const sa="__/auth/handler",aa="emulator/auth/handler",la=encodeURIComponent("fac");async function ca(e,t,n,r,i,o){vr(e.config.authDomain,e,"auth-domain-config-required"),vr(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Cn,eventId:i};if(t instanceof Ki){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",ft(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Hi){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(la,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(sa);return Er(t,aa)}(e),"?").concat(yt(a).slice(1)).concat(c)}const ua="webStorageSupport";const ha=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wo,this._completeRedirectFn=Fs,this._overrideRedirectResult=Ps}async _openPopup(e,t,n,r){var i;wr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return oa(e,await ca(e,t,n,_r(),r),Ho())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Qo().location.href=e}(await ca(e,t,n,_r(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(wr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await na(e),n=new zs(e);return t.register("authEvent",(t=>{vr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ua,{type:ua},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ua];void 0!==i&&t(!!i),dr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Bs(e);for(const r of t)try{if(Ks(r))return}catch(n){}dr(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mi()||li()||pi()}};class da{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return br("unexpected MultiFactorSessionType")}}}class fa extends da{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new fa(e)}_finalizeEnroll(e,t,n){return function(e,t){return Nr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ar(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Nr(e,"POST","/v2/accounts/mfaSignIn:finalize",Ar(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class pa{constructor(){}static assertion(e){return fa._fromCredential(e)}}pa.FACTOR_ID="phone";var ma="@firebase/auth",ga="1.7.0";class ya{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){vr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Ke())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var va;function ba(){return window}!function(e){Si=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=fr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),va="Browser",yn(new Nt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;vr(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:va,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gi(va)},c=new bi(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ti);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),yn(new Nt("auth-internal",(e=>(e=>new ya(e))(wi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Rn(ma,ga,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(va)),Rn(ma,ga,"esm2017");async function wa(e,t,n){var r;const{BuildInfo:i}=ba();wr(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if(wr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),s={};return pi()?s.ibi=i.packageName:hi()?s.apn=i.packageName:dr(e,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,ca(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,s)}function _a(e){const{cordova:t}=ba();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Sa=20;class Ia extends zs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function ka(e){const t=await Ta()._get(xa(e));return t&&await Ta()._remove(xa(e)),t}function Ea(e,t){var n,r;const i=function(e){const t=Aa(e),n=t.link?decodeURIComponent(t.link):void 0,r=Aa(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Aa(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Aa(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(Dz){return null}}(decodeURIComponent(t.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=s?fr(s):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Ca(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Sa;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Ta(){return ti(Bo)}function xa(e){return ii("authEvent",e.config.apiKey,e.name)}function Aa(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return vt(n.join("?"))}const Na=class{constructor(){this._redirectPersistence=Wo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fs,this._overrideRedirectResult=Ps}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Ia(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){dr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o,s,a,l,c,u;const h=ba();vr("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),vr("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),vr("function"===typeof(null===(o=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vr("function"===typeof(null===(l=null===(a=null===(s=null===h||void 0===h?void 0:h.cordova)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vr("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),xs.clear(),await this._originValidation(e);const o=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Ca(),postBody:null,tenantId:e.tenantId,error:fr(e,"no-auth-event")}}(e,n,r);await function(e,t){return Ta()._set(xa(e),t)}(e,o);const s=await wa(e,o,t);return async function(e,t,n){const{cordova:r}=ba();let i=()=>{};try{await new Promise(((o,s)=>{let a=null;function l(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{s(fr(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),hi()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await _a(s))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=ba(),n={};pi()?n.iosBundleId=t.packageName:hi()?n.androidPackageName=t.packageName:dr(e,"operation-not-supported-in-this-environment"),await Bs(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=ba(),o=setTimeout((async()=>{await ka(e),t.onEvent(Pa())}),500),s=async n=>{clearTimeout(o);const r=await ka(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Ea(r,n.url)),t.onEvent(i||Pa())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,s);const a=r,l="".concat(i.packageName.toLowerCase(),"://");ba().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&s({url:e}),"function"===typeof a)try{a(e)}catch(Dz){console.error(Dz)}}}};function Pa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fr("no-auth-event")}}function Ra(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Da(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return!("file:"!==Ra()&&"ionic:"!==Ra()&&"capacitor:"!==Ra()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Oa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return tt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();return/Edge\/\d+/.test(e)}(e)}function Ma(){try{const e=self.localStorage,t=Ho();if(e)return e.setItem(t,"1"),e.removeItem(t),!Oa()||it()}catch(Dz){return La()&&it()}return!1}function La(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Fa(){return("http:"===Ra()||"https:"===Ra()||Ze()||Da())&&!(et()||Je())&&Ma()&&!La()}function Ua(){return Da()&&"undefined"!==typeof document}const za={LOCAL:"local",NONE:"none",SESSION:"session"},ja=vr,Va="persistence";async function Ba(e){await e._initializationPromise;const t=qa(),n=ii(Va,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function qa(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(Dz){return null}}const Wa=vr;class Ka{constructor(){this.browserResolver=ti(ha),this.cordovaResolver=ti(Na),this.underlyingResolver=null,this._redirectPersistence=Wo,this._completeRedirectFn=Fs,this._overrideRedirectResult=Ps}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Ua()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wa(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Ua()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Ha(e){return e.unwrap()}function Ga(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Ja(e,function(e,t){var n;const r=At(e),i=t;return vr(t.customData.operationType,r,"argument-error"),vr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Lo._fromError(r,i)}(e,t))}else if(r){const e=Qa(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Qa(e){const{_tokenResponse:t}=e instanceof ot?e.customData:e;if(!t)return null;if(!(e instanceof ot)&&"temporaryProof"in t&&"phoneNumber"in t)return vs.credentialFromResult(e);const n=t.providerId;if(!n||n===Zn.PASSWORD)return null;let r;switch(n){case Zn.GOOGLE:r=Yi;break;case Zn.FACEBOOK:r=Qi;break;case Zn.GITHUB:r=$i;break;case Zn.TWITTER:r=Zi;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:s,nonce:a}=t;return i||o||e||s?s?n.startsWith("saml.")?Ji._create(n,s):ji._fromParams({providerId:n,signInMethod:n,pendingToken:s,idToken:e,accessToken:i}):new Gi(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof ot?r.credentialFromError(e):r.credentialFromResult(e)}function Ya(e,t){return t.catch((t=>{throw t instanceof ot&&Ga(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Qa(r)),additionalUserInfo:Oo(e),user:Xa.getOrCreate(n)};var r}))}async function $a(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Ya(e,n.confirm(t))}}class Ja{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ya(Ha(this.auth),this.resolver.resolveSignIn(e))}}class Xa{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=At(e);return Uo.has(t)||Uo.set(t,Fo._fromUser(t)),Uo.get(t)}(e)}static getOrCreate(e){return Xa.USER_MAP.has(e)||Xa.USER_MAP.set(e,new Xa(e)),Xa.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Ya(this.auth,fo(this._delegate,e))}async linkWithPhoneNumber(e,t){return $a(this.auth,async function(e,t,n){const r=At(e);await lo(!1,r,"phone");const i=await ys(r.auth,t,At(n));return new gs(i,(e=>fo(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Ya(this.auth,async function(e,t,n){const r=At(e);gr(r.auth,t,Ki);const i=bs(r.auth,n);return new Cs(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Ka))}async linkWithRedirect(e){return await Ba(wi(this.auth)),Ls(this._delegate,e,Ka)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Ya(this.auth,po(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return $a(this.auth,async function(e,t,n){const r=At(e);if(_n(r.auth.app))return Promise.reject(mr(r.auth));const i=await ys(r.auth,t,At(n));return new gs(i,(e=>po(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Ya(this.auth,async function(e,t,n){const r=At(e);if(_n(r.auth.app))return Promise.reject(fr(r.auth,"operation-not-supported-in-this-environment"));gr(r.auth,t,Ki);const i=bs(r.auth,n);return new Cs(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Ka))}async reauthenticateWithRedirect(e){return await Ba(wi(this.auth)),Ms(this._delegate,e,Ka)}sendEmailVerification(e){return ko(this._delegate,e)}async unlink(e){return await so(this._delegate,e),this}updateEmail(e){return function(e,t){const n=At(e);return _n(n.auth.app)?Promise.reject(mr(n.auth)):To(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return To(At(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=At(e);if(_n(n.auth.app))return Promise.reject(mr(n.auth));await ao(n,t)}(this._delegate,e)}updateProfile(e){return Co(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Eo(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xa.USER_MAP=new WeakMap;const Za=vr;class el{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Za(n,"invalid-api-key",{appName:e.name}),Za(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Ka:void 0;this._delegate=t.initialize({options:{persistence:nl(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(ar),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){xi(this._delegate,e,t)}applyActionCode(e){return _o(this._delegate,e)}checkActionCode(e){return So(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Ri(At(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wo(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Ya(this._delegate,async function(e,t,n){if(_n(e.app))return Promise.reject(mr(e));const r=wi(e),i=Ti(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eo),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wo(e),t})),s=await to._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Io(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=qi.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Za(Fa(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await wi(e)._initializationPromise,Fs(e,t,!1)}(this._delegate,Ka);return e?Ya(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){wi(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:o}=tl(e,t,n);return this._delegate.onAuthStateChanged(r,i,o)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:o}=tl(e,t,n);return this._delegate.onIdTokenChanged(r,i,o)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=wi(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){vr(t.handleCodeInApp,r,"argument-error"),t&&bo(r,e,t)}(i,n),await Ti(r,i,"getOobCode",Fi)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=wi(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&bo(r,i,n),await Ti(r,i,"getOobCode",Li)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){ja(Object.values(za).includes(t),e,"invalid-persistence-type"),et()?ja(t!==za.SESSION,e,"unsupported-persistence-type"):Je()?ja(t===za.NONE,e,"unsupported-persistence-type"):La()?ja(t===za.NONE||t===za.LOCAL&&it(),e,"unsupported-persistence-type"):ja(t===za.NONE||Ma(),e,"unsupported-persistence-type")}(this._delegate,e),e){case za.SESSION:t=Wo;break;case za.LOCAL:t=await ti(os)._isAvailable()?os:Bo;break;case za.NONE:t=ri;break;default:return dr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ya(this._delegate,async function(e){var t;if(_n(e.app))return Promise.reject(mr(e));const n=wi(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new to({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await eo(n,{returnSecureToken:!0}),i=await to._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Ya(this._delegate,ho(this._delegate,e))}signInWithCustomToken(e){return Ya(this._delegate,mo(this._delegate,e))}signInWithEmailAndPassword(e,t){return Ya(this._delegate,function(e,t,n){return _n(e.app)?Promise.reject(mr(e)):ho(At(e),Wi.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wo(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Ya(this._delegate,async function(e,t,n){if(_n(e.app))return Promise.reject(mr(e));const r=At(e),i=Wi.credentialWithLink(t,n||_r());return vr(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ho(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return $a(this._delegate,async function(e,t,n){if(_n(e.app))return Promise.reject(mr(e));const r=wi(e),i=await ys(r,t,At(n));return new gs(i,(e=>ho(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Za(Fa(),this._delegate,"operation-not-supported-in-this-environment"),Ya(this._delegate,async function(e,t,n){if(_n(e.app))return Promise.reject(fr(e,"operation-not-supported-in-this-environment"));const r=wi(e);gr(e,t,Ki);const i=bs(r,n);return new Cs(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Ka))}async signInWithRedirect(e){return Za(Fa(),this._delegate,"operation-not-supported-in-this-environment"),await Ba(this._delegate),Os(this._delegate,e,Ka)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await So(At(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function tl(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Xa.getOrCreate(e)),error:t,complete:n}}function nl(e,t){const n=function(e,t){const n=qa();if(!n)return[];const r=ii(Va,e,t);switch(n.getItem(r)){case za.NONE:return[ri];case za.LOCAL:return[os,Wo];case za.SESSION:return[Wo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(os)||n.push(os),"undefined"!==typeof window)for(const r of[Bo,Wo])n.includes(r)||n.push(r);return n.includes(ri)||n.push(ri),n}el.Persistence=za;class rl{constructor(){this.providerId="phone",this._delegate=new vs(Ha(Jn.auth()))}static credential(e,t){return vs.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}rl.PHONE_SIGN_IN_METHOD=vs.PHONE_SIGN_IN_METHOD,rl.PROVIDER_ID=vs.PROVIDER_ID;const il=vr;class ol{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jn.app();var r;il(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new ms(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var sl;(sl=Jn).INTERNAL.registerComponent(new Nt("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new el(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:er,PASSWORD_RESET:tr,RECOVER_EMAIL:nr,REVERT_SECOND_FACTOR_ADDITION:rr,VERIFY_AND_CHANGE_EMAIL:ir,VERIFY_EMAIL:or}},EmailAuthProvider:Wi,FacebookAuthProvider:Qi,GithubAuthProvider:$i,GoogleAuthProvider:Yi,OAuthProvider:Gi,SAMLAuthProvider:Xi,PhoneAuthProvider:rl,PhoneMultiFactorGenerator:pa,RecaptchaVerifier:ol,TwitterAuthProvider:Zi,Auth:el,AuthCredential:Pi,Error:ot}).setInstantiationMode("LAZY").setMultipleInstances(!1)),sl.registerVersion("@firebase/auth-compat","0.5.5");var al,ll="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},cl={},ul=ul||{},hl=ll||self;function dl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function fl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var pl="closure_uid_"+(1e9*Math.random()>>>0),ml=0;function gl(e,t,n){return e.call.apply(e.bind,arguments)}function yl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function vl(e,t,n){return(vl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gl:yl).apply(null,arguments)}function bl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function wl(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function _l(){this.s=this.s,this.o=this.o}_l.prototype.s=!1,_l.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,pl)&&e[pl]||(e[pl]=++ml))},_l.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Sl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Il(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function kl(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(dl(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function El(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}El.prototype.h=function(){this.defaultPrevented=!0};var Cl=function(){if(!hl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};hl.addEventListener("test",e,t),hl.removeEventListener("test",e,t)}catch(n){}return e}();function Tl(e){return/^[\s\xa0]*$/.test(e)}function xl(){var e=hl.navigator;return e&&(e=e.userAgent)?e:""}function Al(e){return-1!=xl().indexOf(e)}function Nl(e){return Nl[" "](e),e}Nl[" "]=function(){};var Pl,Rl,Dl=Al("Opera"),Ol=Al("Trident")||Al("MSIE"),Ml=Al("Edge"),Ll=Ml||Ol,Fl=Al("Gecko")&&!(-1!=xl().toLowerCase().indexOf("webkit")&&!Al("Edge"))&&!(Al("Trident")||Al("MSIE"))&&!Al("Edge"),Ul=-1!=xl().toLowerCase().indexOf("webkit")&&!Al("Edge");function zl(){var e=hl.document;return e?e.documentMode:void 0}e:{var jl="",Vl=function(){var e=xl();return Fl?/rv:([^\);]+)(\)|;)/.exec(e):Ml?/Edge\/([\d\.]+)/.exec(e):Ol?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ul?/WebKit\/(\S+)/.exec(e):Dl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Vl&&(jl=Vl?Vl[1]:""),Ol){var Bl=zl();if(null!=Bl&&Bl>parseFloat(jl)){Pl=String(Bl);break e}}Pl=jl}if(hl.document&&Ol){var ql=zl();Rl=ql||(parseInt(Pl,10)||void 0)}else Rl=void 0;var Wl=Rl;function Kl(e,t){if(El.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Fl){e:{try{Nl(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Hl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Kl.$.h.call(this)}}wl(Kl,El);var Hl={2:"touch",3:"pen",4:"mouse"};Kl.prototype.h=function(){Kl.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Gl="closure_listenable_"+(1e6*Math.random()|0),Ql=0;function Yl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ql,this.fa=this.ia=!1}function $l(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Jl(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Xl(e){const t={};for(const n in e)t[n]=e[n];return t}const Zl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ec(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Zl.length;t++)n=Zl[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function tc(e){this.src=e,this.g={},this.h=0}function nc(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Sl(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&($l(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function rc(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}tc.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=rc(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Yl(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var ic="closure_lm_"+(1e6*Math.random()|0),oc={};function sc(e,t,n,r,i){if(r&&r.once)return lc(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)sc(e,t[o],n,r,i);return null}return n=mc(n),e&&e[Gl]?e.O(t,n,fl(r)?!!r.capture:!!r,i):ac(e,t,n,!1,r,i)}function ac(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=fl(i)?!!i.capture:!!i,a=fc(e);if(a||(e[ic]=a=new tc(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=dc;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Cl||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(hc(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function lc(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)lc(e,t[o],n,r,i);return null}return n=mc(n),e&&e[Gl]?e.P(t,n,fl(r)?!!r.capture:!!r,i):ac(e,t,n,!0,r,i)}function cc(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)cc(e,t[o],n,r,i);else r=fl(r)?!!r.capture:!!r,n=mc(n),e&&e[Gl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=rc(o=e.g[t],n,r,i))&&($l(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=fc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=rc(t,n,r,i)),(n=-1<e?t[e]:null)&&uc(n))}function uc(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Gl])nc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(hc(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=fc(t))?(nc(n,e),0==n.h&&(n.src=null,t[ic]=null)):$l(e)}}}function hc(e){return e in oc?oc[e]:oc[e]="on"+e}function dc(e,t){if(e.fa)e=!0;else{t=new Kl(t,this);var n=e.listener,r=e.la||e.src;e.ia&&uc(e),e=n.call(r,t)}return e}function fc(e){return(e=e[ic])instanceof tc?e:null}var pc="__closure_events_fn_"+(1e9*Math.random()>>>0);function mc(e){return"function"===typeof e?e:(e[pc]||(e[pc]=function(t){return e.handleEvent(t)}),e[pc])}function gc(){_l.call(this),this.i=new tc(this),this.S=this,this.J=null}function yc(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new El(t,e);else if(t instanceof El)t.target=t.target||e;else{var i=t;ec(t=new El(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=vc(s,r,!0,t)&&i}if(i=vc(s=t.g=e,r,!0,t)&&i,i=vc(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=vc(s=t.g=n[o],r,!1,t)&&i}function vc(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&nc(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}wl(gc,_l),gc.prototype[Gl]=!0,gc.prototype.removeEventListener=function(e,t,n,r){cc(this,e,t,n,r)},gc.prototype.N=function(){if(gc.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$l(n[r]);delete t.g[e],t.h--}}this.J=null},gc.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},gc.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var bc=hl.JSON.stringify;function wc(){var e=Tc;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _c=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Sc),(e=>e.reset()));class Sc{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ic(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function kc(e){hl.setTimeout((()=>{throw e}),0)}let Ec,Cc=!1,Tc=new class{constructor(){this.h=this.g=null}add(e,t){const n=_c.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},xc=()=>{const e=hl.Promise.resolve(void 0);Ec=()=>{e.then(Ac)}};var Ac=()=>{for(var e;e=wc();){try{e.h.call(e.g)}catch(n){kc(n)}var t=_c;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Cc=!1};function Nc(e,t){gc.call(this),this.h=e||1,this.g=t||hl,this.j=vl(this.qb,this),this.l=Date.now()}function Pc(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Rc(e,t,n){if("function"===typeof e)n&&(e=vl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=vl(e.handleEvent,e)}return 2147483647<Number(t)?-1:hl.setTimeout(e,t||0)}function Dc(e){e.g=Rc((()=>{e.g=null,e.i&&(e.i=!1,Dc(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}wl(Nc,gc),(al=Nc.prototype).ga=!1,al.T=null,al.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yc(this,"tick"),this.ga&&(Pc(this),this.start()))}},al.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},al.N=function(){Nc.$.N.call(this),Pc(this),delete this.g};class Oc extends _l{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Dc(this)}N(){super.N(),this.g&&(hl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mc(e){_l.call(this),this.h=e,this.g={}}wl(Mc,_l);var Lc=[];function Fc(e,t,n,r){Array.isArray(n)||(n&&(Lc[0]=n.toString()),n=Lc);for(var i=0;i<n.length;i++){var o=sc(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Uc(e){Jl(e.g,(function(e,t){this.g.hasOwnProperty(t)&&uc(e)}),e),e.g={}}function zc(){this.g=!0}function jc(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return bc(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Mc.prototype.N=function(){Mc.$.N.call(this),Uc(this)},Mc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zc.prototype.Ea=function(){this.g=!1},zc.prototype.info=function(){};var Vc={},Bc=null;function qc(){return Bc=Bc||new gc}function Wc(e){El.call(this,Vc.Ta,e)}function Kc(e){const t=qc();yc(t,new Wc(t))}function Hc(e,t){El.call(this,Vc.STAT_EVENT,e),this.stat=t}function Gc(e){const t=qc();yc(t,new Hc(t,e))}function Qc(e,t){El.call(this,Vc.Ua,e),this.size=t}function Yc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return hl.setTimeout((function(){e()}),t)}Vc.Ta="serverreachability",wl(Wc,El),Vc.STAT_EVENT="statevent",wl(Hc,El),Vc.Ua="timingevent",wl(Qc,El);var $c={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Jc={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xc(){}function Zc(e){return e.h||(e.h=e.i())}function eu(){}Xc.prototype.h=null;var tu,nu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ru(){El.call(this,"d")}function iu(){El.call(this,"c")}function ou(){}function su(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Mc(this),this.P=lu,e=Ll?125:void 0,this.V=new Nc(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new au}function au(){this.i=null,this.g="",this.h=!1}wl(ru,El),wl(iu,El),wl(ou,Xc),ou.prototype.g=function(){return new XMLHttpRequest},ou.prototype.i=function(){return{}},tu=new ou;var lu=45e3,cu={},uu={};function hu(e,t,n){e.L=1,e.A=Nu(Eu(t)),e.u=n,e.S=!0,du(e,null)}function du(e,t){e.G=Date.now(),gu(e),e.B=Eu(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),qu(n.i,"t",r),e.o=0,n=e.l.J,e.h=new au,e.g=Wh(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Oc(vl(e.Pa,e,e.g),e.O)),Fc(e.U,e.g,"readystatechange",e.nb),t=e.I?Xl(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Kc(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");s=2<=h.length&&"type"==h[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function fu(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function pu(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=mu(e,n),r==uu){4==t&&(e.s=4,Gc(14),i=!1),jc(e.j,e.m,null,"[Incomplete Response]");break}if(r==cu){e.s=4,Gc(15),jc(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}jc(e.j,e.m,r,null),_u(e,r)}fu(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Gc(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lh(t),t.M=!0,Gc(11))):(jc(e.j,e.m,n,"[Invalid Chunked Response]"),wu(e),bu(e))}function mu(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?uu:(n=Number(t.substring(n,r)),isNaN(n)?cu:(r+=1)+n>t.length?uu:(t=t.slice(r,r+n),e.o=r+n,t))}function gu(e){e.Y=Date.now()+e.P,yu(e,e.P)}function yu(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Yc(vl(e.lb,e),t)}function vu(e){e.C&&(hl.clearTimeout(e.C),e.C=null)}function bu(e){0==e.l.H||e.J||zh(e.l,e)}function wu(e){vu(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Pc(e.V),Uc(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function _u(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||$u(n.i,e)))if(!e.K&&$u(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Uh(n),xh(n)}Mh(n),Gc(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Yc(vl(n.ib,n),6e3));if(1>=Yu(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Vh(n,11)}else if((e.K||n.g==e)&&Uh(n),!Tl(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ju(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Au(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=qh(r,r.J?r.pa:null,r.Y),s.K){Xu(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.C&&(vu(a),gu(a)),r.g=s}else Oh(r);0<n.j.length&&Nh(n)}else"stop"!=c[0]&&"close"!=c[0]||Vh(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Vh(n,7):Th(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Kc()}catch(c){}}function Su(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(dl(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(dl(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(dl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(al=su.prototype).setTimeout=function(e){this.P=e},al.nb=function(e){e=e.target;const t=this.M;t&&3==_h(e)?t.l():this.Pa(e)},al.Pa=function(e){try{if(e==this.g)e:{const u=_h(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Ll||this.g&&(this.h.h||this.g.ja()||Sh(this.g)))){this.J||4!=u||7==t||Kc(),vu(this);var n=this.g.da();this.ca=n;t:if(fu(this)){var r=Sh(this.g);e="";var i=r.length,o=4==_h(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){wu(this),bu(this);var s="";break t}this.h.i=new hl.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tl(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Gc(12),wu(this),bu(this);break e}jc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_u(this,n)}this.S?(pu(this,u,s),Ll&&this.i&&3==u&&(Fc(this.U,this.V,"tick",this.mb),this.V.start())):(jc(this.j,this.m,s,null),_u(this,s)),4==u&&wu(this),this.i&&!this.J&&(4==u?zh(this.l,this):(this.i=!1,gu(this)))}else(function(e){const t={};e=(e.g&&2<=_h(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Tl(e[r]))continue;var n=Ic(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Gc(12)):(this.s=0,Gc(13)),wu(this),bu(this)}}}catch(u){}},al.mb=function(){if(this.g){var e=_h(this.g),t=this.g.ja();this.o<t.length&&(vu(this),pu(this,e,t),this.i&&4!=e&&gu(this))}},al.cancel=function(){this.J=!0,wu(this)},al.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Kc(),Gc(17)),wu(this),this.s=2,bu(this)):yu(this,this.Y-e)};var Iu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ku(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ku){this.h=e.h,Cu(this,e.j),this.s=e.s,this.g=e.g,Tu(this,e.m),this.l=e.l;var t=e.i,n=new zu;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),xu(this,n),this.o=e.o}else e&&(t=String(e).match(Iu))?(this.h=!1,Cu(this,t[1]||"",!0),this.s=Pu(t[2]||""),this.g=Pu(t[3]||"",!0),Tu(this,t[4]),this.l=Pu(t[5]||"",!0),xu(this,t[6]||"",!0),this.o=Pu(t[7]||"")):(this.h=!1,this.i=new zu(null,this.h))}function Eu(e){return new ku(e)}function Cu(e,t,n){e.j=n?Pu(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Tu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function xu(e,t,n){t instanceof zu?(e.i=t,function(e,t){t&&!e.j&&(ju(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Vu(this,t),qu(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ru(t,Fu)),e.i=new zu(t,e.h))}function Au(e,t,n){e.i.set(t,n)}function Nu(e){return Au(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Pu(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ru(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Du),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Du(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ku.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ru(t,Ou,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ru(t,Ou,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ru(n,"/"==n.charAt(0)?Lu:Mu,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ru(n,Uu)),e.join("")};var Ou=/[#\/\?@]/g,Mu=/[#\?:]/g,Lu=/[#\?]/g,Fu=/[#\?@]/g,Uu=/#/g;function zu(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ju(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Vu(e,t){ju(e),t=Wu(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Bu(e,t){return ju(e),t=Wu(e,t),e.g.has(t)}function qu(e,t,n){Vu(e,t),0<n.length&&(e.i=null,e.g.set(Wu(e,t),Il(n)),e.h+=n.length)}function Wu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(al=zu.prototype).add=function(e,t){ju(this),this.i=null,e=Wu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},al.forEach=function(e,t){ju(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},al.ta=function(){ju(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},al.Z=function(e){ju(this);let t=[];if("string"===typeof e)Bu(this,e)&&(t=t.concat(this.g.get(Wu(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},al.set=function(e,t){return ju(this),this.i=null,Bu(this,e=Wu(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},al.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},al.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Ku=class{constructor(e,t){this.g=e,this.map=t}};function Hu(e){this.l=e||Gu,hl.PerformanceNavigationTiming?e=0<(e=hl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(hl.g&&hl.g.Ka&&hl.g.Ka()&&hl.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gu=10;function Qu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Yu(e){return e.h?1:e.g?e.g.size:0}function $u(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ju(e,t){e.g?e.g.add(t):e.h=t}function Xu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zu(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Il(e.i)}Hu.prototype.cancel=function(){if(this.i=Zu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var eh,th=class{stringify(e){return hl.JSON.stringify(e,void 0)}parse(e){return hl.JSON.parse(e,void 0)}};function nh(){this.g=new th}function rh(e,t,n){const r=n||"";try{Su(e,(function(e,n){let i=e;fl(e)&&(i=bc(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Dz){throw t.push(r+"type="+encodeURIComponent("_badmap")),Dz}}function ih(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function oh(e){this.l=e.ec||null,this.j=e.ob||!1}function sh(e,t){gc.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ah,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wl(oh,Xc),oh.prototype.g=function(){return new sh(this.l,this.j)},oh.prototype.i=(eh={},function(){return eh}),wl(sh,gc);var ah=0;function lh(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ch(e){e.readyState=4,e.l=null,e.j=null,e.A=null,uh(e)}function uh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(al=sh.prototype).open=function(e,t){if(this.readyState!=ah)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,uh(this)},al.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||hl).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},al.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ch(this)),this.readyState=ah},al.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,uh(this)),this.g&&(this.readyState=3,uh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof hl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lh(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},al.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ch(this):uh(this),3==this.readyState&&lh(this)}},al.Za=function(e){this.g&&(this.response=this.responseText=e,ch(this))},al.Ya=function(e){this.g&&(this.response=e,ch(this))},al.ka=function(){this.g&&ch(this)},al.setRequestHeader=function(e,t){this.v.append(e,t)},al.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},al.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(sh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var hh=hl.JSON.parse;function dh(e){gc.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=fh,this.L=this.M=!1}wl(dh,gc);var fh="",ph=/^https?$/i,mh=["POST","PUT"];function gh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,yh(e),bh(e)}function yh(e){e.F||(e.F=!0,yc(e,"complete"),yc(e,"error"))}function vh(e){if(e.h&&"undefined"!=typeof ul&&(!e.C[1]||4!=_h(e)||2!=e.da()))if(e.v&&4==_h(e))Rc(e.La,0,e);else if(yc(e,"readystatechange"),4==_h(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Iu)[1]||null;!i&&hl.self&&hl.self.location&&(i=hl.self.location.protocol.slice(0,-1)),r=!ph.test(i?i.toLowerCase():"")}n=r}if(n)yc(e,"complete"),yc(e,"success");else{e.m=6;try{var o=2<_h(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",yh(e)}}finally{bh(e)}}}function bh(e,t){if(e.g){wh(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||yc(e,"ready");try{n.onreadystatechange=r}catch(Dz){}}}function wh(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(hl.clearTimeout(e.A),e.A=null)}function _h(e){return e.g?e.g.readyState:0}function Sh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case fh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ad){return null}}function Ih(e){let t="";return Jl(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function kh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ih(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Au(e,t,n))}function Eh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ch(e){this.Ga=0,this.j=[],this.l=new zc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Eh("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Eh("baseRetryDelayMs",5e3,e),this.hb=Eh("retryDelaySeedMs",1e4,e),this.eb=Eh("forwardChannelMaxRetries",2,e),this.xa=Eh("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Hu(e&&e.concurrentRequestLimit),this.Ja=new nh,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Th(e){if(Ah(e),3==e.H){var t=e.W++,n=Eu(e.I);if(Au(n,"SID",e.K),Au(n,"RID",t),Au(n,"TYPE","terminate"),Rh(e,n),(t=new su(e,e.l,t)).L=2,t.A=Nu(Eu(n)),n=!1,hl.navigator&&hl.navigator.sendBeacon)try{n=hl.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&hl.Image&&((new Image).src=t.A,n=!0),n||(t.g=Wh(t.l,null),t.g.ha(t.A)),t.G=Date.now(),gu(t)}Bh(e)}function xh(e){e.g&&(Lh(e),e.g.cancel(),e.g=null)}function Ah(e){xh(e),e.u&&(hl.clearTimeout(e.u),e.u=null),Uh(e),e.i.cancel(),e.m&&("number"===typeof e.m&&hl.clearTimeout(e.m),e.m=null)}function Nh(e){if(!Qu(e.i)&&!e.m){e.m=!0;var t=e.Na;Ec||xc(),Cc||(Ec(),Cc=!0),Tc.add(t,e),e.C=0}}function Ph(e,t){var n;n=t?t.m:e.W++;const r=Eu(e.I);Au(r,"SID",e.K),Au(r,"RID",n),Au(r,"AID",e.V),Rh(e,r),e.o&&e.s&&kh(r,e.o,e.s),n=new su(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Dh(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ju(e.i,n),hu(n,r,t)}function Rh(e,t){e.na&&Jl(e.na,(function(e,n){Au(t,n,e)})),e.h&&Su({},(function(e,n){Au(t,n,e)}))}function Dh(e,t,n){n=Math.min(e.j.length,n);var r=e.h?vl(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{rh(a,e,"req"+n+"_")}catch(Hf){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Oh(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ec||xc(),Cc||(Ec(),Cc=!0),Tc.add(t,e),e.A=0}}function Mh(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Yc(vl(e.Ma,e),jh(e,e.A)),e.A++,!0)}function Lh(e){null!=e.B&&(hl.clearTimeout(e.B),e.B=null)}function Fh(e){e.g=new su(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Eu(e.wa);Au(t,"RID","rpc"),Au(t,"SID",e.K),Au(t,"AID",e.V),Au(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Au(t,"TO",e.qa),Au(t,"TYPE","xmlhttp"),Rh(e,t),e.o&&e.s&&kh(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Nu(Eu(t)),n.u=null,n.S=!0,du(n,e)}function Uh(e){null!=e.v&&(hl.clearTimeout(e.v),e.v=null)}function zh(e,t){var n=null;if(e.g==t){Uh(e),Lh(e),e.g=null;var r=2}else{if(!$u(e.i,t))return;n=t.F,Xu(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;yc(r=qc(),new Qc(r,n)),Nh(e)}else Oh(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Yu(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Yc(vl(e.Na,e,t),jh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Mh(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Vh(e,5);break;case 4:Vh(e,10);break;case 3:Vh(e,6);break;default:Vh(e,2)}}function jh(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Vh(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=vl(e.pb,e);n||(n=new ku("//www.google.com/images/cleardot.gif"),hl.location&&"http"==hl.location.protocol||Cu(n,"https"),Nu(n)),function(e,t){const n=new zc;if(hl.Image){const r=new Image;r.onload=bl(ih,n,r,"TestLoadImage: loaded",!0,t),r.onerror=bl(ih,n,r,"TestLoadImage: error",!1,t),r.onabort=bl(ih,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=bl(ih,n,r,"TestLoadImage: timeout",!1,t),hl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Gc(2);e.H=0,e.h&&e.h.za(t),Bh(e),Ah(e)}function Bh(e){if(e.H=0,e.ma=[],e.h){const t=Zu(e.i);0==t.length&&0==e.j.length||(kl(e.ma,t),kl(e.ma,e.j),e.i.i.length=0,Il(e.j),e.j.length=0),e.h.ya()}}function qh(e,t,n){var r=n instanceof ku?Eu(n):new ku(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Tu(r,r.m);else{var i=hl.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new ku(null);r&&Cu(o,r),t&&(o.g=t),i&&Tu(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Au(r,n,t),Au(r,"VER",e.ra),Rh(e,r),r}function Wh(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new dh(new oh({ob:n})):new dh(e.va)).Oa(e.J),t}function Kh(){}function Hh(){if(Ol&&!(10<=Number(Wl)))throw Error("Environmental error: no available transport.")}function Gh(e,t){gc.call(this),this.g=new Ch(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Tl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Tl(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new $h(this)}function Qh(e){ru.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Yh(){iu.call(this),this.status=1}function $h(e){this.g=e}function Jh(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Xh(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function Zh(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(al=dh.prototype).Oa=function(e){this.M=e},al.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tu.g(),this.C=this.u?Zc(this.u):Zc(tu),this.g.onreadystatechange=vl(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void gh(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=hl.FormData&&e instanceof hl.FormData,!(0<=Sl(mh,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wh(this),0<this.B&&((this.L=function(e){return Ol&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vl(this.ua,this)):this.A=Rc(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){gh(this,o)}},al.ua=function(){"undefined"!=typeof ul&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yc(this,"timeout"),this.abort(8))},al.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,yc(this,"complete"),yc(this,"abort"),bh(this))},al.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bh(this,!0)),dh.$.N.call(this)},al.La=function(){this.s||(this.G||this.v||this.l?vh(this):this.kb())},al.kb=function(){vh(this)},al.isActive=function(){return!!this.g},al.da=function(){try{return 2<_h(this)?this.g.status:-1}catch(eh){return-1}},al.ja=function(){try{return this.g?this.g.responseText:""}catch(eh){return""}},al.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),hh(t)}},al.Ia=function(){return this.m},al.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(al=Ch.prototype).ra=8,al.H=1,al.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new su(this,this.l,e);let o=this.s;if(this.U&&(o?(o=Xl(o),ec(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Dh(this,i,t),Au(n=Eu(this.I),"RID",e),Au(n,"CVER",22),this.F&&Au(n,"X-HTTP-Session-Id",this.F),Rh(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Ih(o)))+"&"+t:this.o&&kh(n,this.o,o)),Ju(this.i,i),this.bb&&Au(n,"TYPE","init"),this.P?(Au(n,"$req",t),Au(n,"SID","null"),i.aa=!0,hu(i,n,null)):hu(i,n,t),this.H=2}}else 3==this.H&&(e?Ph(this,e):0==this.j.length||Qu(this.i)||Ph(this))},al.Ma=function(){if(this.u=null,Fh(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Yc(vl(this.jb,this),e)}},al.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Gc(10),xh(this),Fh(this))},al.ib=function(){null!=this.v&&(this.v=null,xh(this),Mh(this),Gc(19))},al.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Gc(2)):(this.l.info("Failed to ping google.com"),Gc(1))},al.isActive=function(){return!!this.h&&this.h.isActive(this)},(al=Kh.prototype).Ba=function(){},al.Aa=function(){},al.za=function(){},al.ya=function(){},al.isActive=function(){return!0},al.Va=function(){},Hh.prototype.g=function(e,t){return new Gh(e,t)},wl(Gh,gc),Gh.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Gc(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=qh(e,null,e.Y),Nh(e)},Gh.prototype.close=function(){Th(this.g)},Gh.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=bc(e),e=n);t.j.push(new Ku(t.fb++,e)),3==t.H&&Nh(t)},Gh.prototype.N=function(){this.g.h=null,delete this.j,Th(this.g),delete this.g,Gh.$.N.call(this)},wl(Qh,ru),wl(Yh,iu),wl($h,Kh),$h.prototype.Ba=function(){yc(this.g,"a")},$h.prototype.Aa=function(e){yc(this.g,new Qh(e))},$h.prototype.za=function(e){yc(this.g,new Yh)},$h.prototype.ya=function(){yc(this.g,"b")},wl(Jh,(function(){this.blockSize=-1})),Jh.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Jh.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)Xh(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Xh(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Xh(this,r),i=0;break}}this.h=i,this.i+=t},Jh.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ed={};function td(e){return-128<=e&&128>e?function(e,t){var n=ed;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Zh([0|e],0>e?-1:0)})):new Zh([0|e],0>e?-1:0)}function nd(e){if(isNaN(e)||!isFinite(e))return id;if(0>e)return cd(nd(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=rd;return new Zh(t,0)}var rd=4294967296,id=td(0),od=td(1),sd=td(16777216);function ad(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ld(e){return-1==e.h}function cd(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Zh(n,~e.h).add(od)}function ud(e,t){return e.add(cd(t))}function hd(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function dd(e,t){this.g=e,this.h=t}function fd(e,t){if(ad(t))throw Error("division by zero");if(ad(e))return new dd(id,id);if(ld(e))return t=fd(cd(e),t),new dd(cd(t.g),cd(t.h));if(ld(t))return t=fd(e,cd(t)),new dd(cd(t.g),t.h);if(30<e.g.length){if(ld(e)||ld(t))throw Error("slowDivide_ only works with positive integers.");for(var n=od,r=t;0>=r.X(e);)n=pd(n),r=pd(r);var i=md(n,1),o=md(r,1);for(r=md(r,2),n=md(n,2);!ad(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=md(r,1),n=md(n,1)}return t=ud(e,i.R(t)),new dd(i,t)}for(i=id;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=nd(n)).R(t);ld(s)||0<s.X(e);)s=(o=nd(n-=r)).R(t);ad(o)&&(o=od),i=i.add(o),e=ud(e,s)}return new dd(i,e)}function pd(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Zh(n,e.h)}function md(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new Zh(i,e.h)}(al=Zh.prototype).ea=function(){if(ld(this))return-cd(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:rd+r)*t,t*=rd}return e},al.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ad(this))return"0";if(ld(this))return"-"+cd(this).toString(e);for(var t=nd(Math.pow(e,6)),n=this,r="";;){var i=fd(n,t).g,o=((0<(n=ud(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ad(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},al.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},al.X=function(e){return ld(e=ud(this,e))?-1:ad(e)?0:1},al.abs=function(){return ld(this)?cd(this):this},al.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new Zh(n,-2147483648&n[n.length-1]?-1:0)},al.R=function(e){if(ad(this)||ad(e))return id;if(ld(this))return ld(e)?cd(this).R(cd(e)):cd(cd(this).R(e));if(ld(e))return cd(this.R(cd(e)));if(0>this.X(sd)&&0>e.X(sd))return nd(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,hd(n,2*r+2*i),n[2*r+2*i+1]+=o*l,hd(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,hd(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,hd(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Zh(n,0)},al.gb=function(e){return fd(this,e).h},al.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Zh(n,this.h&e.h)},al.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Zh(n,this.h|e.h)},al.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Zh(n,this.h^e.h)},Hh.prototype.createWebChannel=Hh.prototype.g,Gh.prototype.send=Gh.prototype.u,Gh.prototype.open=Gh.prototype.m,Gh.prototype.close=Gh.prototype.close,$c.NO_ERROR=0,$c.TIMEOUT=8,$c.HTTP_ERROR=6,Jc.COMPLETE="complete",eu.EventType=nu,nu.OPEN="a",nu.CLOSE="b",nu.ERROR="c",nu.MESSAGE="d",gc.prototype.listen=gc.prototype.O,dh.prototype.listenOnce=dh.prototype.P,dh.prototype.getLastError=dh.prototype.Sa,dh.prototype.getLastErrorCode=dh.prototype.Ia,dh.prototype.getStatus=dh.prototype.da,dh.prototype.getResponseJson=dh.prototype.Wa,dh.prototype.getResponseText=dh.prototype.ja,dh.prototype.send=dh.prototype.ha,dh.prototype.setWithCredentials=dh.prototype.Oa,Jh.prototype.digest=Jh.prototype.l,Jh.prototype.reset=Jh.prototype.reset,Jh.prototype.update=Jh.prototype.j,Zh.prototype.add=Zh.prototype.add,Zh.prototype.multiply=Zh.prototype.R,Zh.prototype.modulo=Zh.prototype.gb,Zh.prototype.compare=Zh.prototype.X,Zh.prototype.toNumber=Zh.prototype.ea,Zh.prototype.toString=Zh.prototype.toString,Zh.prototype.getBits=Zh.prototype.D,Zh.fromNumber=nd,Zh.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return cd(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=nd(Math.pow(n,8)),i=id,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=nd(Math.pow(n,s)),i=i.R(s).add(nd(a))):i=(i=i.R(r)).add(nd(a))}return i};var gd=cl.createWebChannelTransport=function(){return new Hh},yd=cl.getStatEventTarget=function(){return qc()},vd=cl.ErrorCode=$c,bd=cl.EventType=Jc,wd=cl.Event=Vc,_d=cl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Sd=(cl.FetchXmlHttpFactory=oh,cl.WebChannel=eu),Id=cl.XhrIo=dh,kd=cl.Md5=Jh,Ed=cl.Integer=Zh;const Cd="@firebase/firestore";class Td{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Td.UNAUTHENTICATED=new Td(null),Td.GOOGLE_CREDENTIALS=new Td("google-credentials-uid"),Td.FIRST_PARTY=new Td("first-party-uid"),Td.MOCK_USER=new Td("mock-user");let xd="10.10.0";const Ad=new Vt("@firebase/firestore");function Nd(){return Ad.logLevel}function Pd(e){if(Ad.logLevel<=Lt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Od);Ad.debug("Firestore (".concat(xd,"): ").concat(e),...i)}}function Rd(e){if(Ad.logLevel<=Lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Od);Ad.error("Firestore (".concat(xd,"): ").concat(e),...i)}}function Dd(e){if(Ad.logLevel<=Lt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Od);Ad.warn("Firestore (".concat(xd,"): ").concat(e),...i)}}function Od(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Md(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(xd,") INTERNAL ASSERTION FAILED: ")+e;throw Rd(t),new Error(t)}function Ld(e,t){e||Md()}function Fd(e,t){return e}const Ud={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zd extends ot{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class jd{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Bd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Td.UNAUTHENTICATED)))}shutdown(){}}class qd{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Wd{constructor(e){this.t=e,this.currentUser=Td.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new jd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jd,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Pd("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Pd("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jd)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Pd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ld("string"==typeof t.accessToken),new Vd(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ld(null===e||"string"==typeof e),new Td(e)}}class Kd{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Td.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Hd{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Kd(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Td.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qd{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Pd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Pd("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Pd("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Pd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ld("string"==typeof e.token),this.R=e.token,new Gd(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Yd(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class $d{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Yd(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Jd(e,t){return e<t?-1:e>t?1:0}function Xd(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Zd(e){return e+"\0"}class ef{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new zd(Ud.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new zd(Ud.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new zd(Ud.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zd(Ud.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ef.fromMillis(Date.now())}static fromDate(e){return ef.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ef(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jd(this.nanoseconds,e.nanoseconds):Jd(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class tf{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tf(e)}static min(){return new tf(new ef(0,0))}static max(){return new tf(new ef(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nf{constructor(e,t,n){void 0===t?t=0:t>e.length&&Md(),void 0===n?n=e.length-t:n>e.length-t&&Md(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===nf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nf?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rf extends nf{construct(e,t,n){return new rf(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new zd(Ud.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new rf(e)}static emptyPath(){return new rf([])}}const of=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sf extends nf{construct(e,t,n){return new sf(e,t,n)}static isValidIdentifier(e){return of.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sf.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new sf(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new zd(Ud.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new zd(Ud.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new zd(Ud.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new zd(Ud.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sf(t)}static emptyPath(){return new sf([])}}class af{constructor(e){this.path=e}static fromPath(e){return new af(rf.fromString(e))}static fromName(e){return new af(rf.fromString(e).popFirst(5))}static empty(){return new af(rf.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rf.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rf.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new af(new rf(e.slice()))}}class lf{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function cf(e){return e.fields.find((e=>2===e.kind))}function uf(e){return e.fields.filter((e=>2!==e.kind))}lf.UNKNOWN_ID=-1;class hf{constructor(e,t){this.fieldPath=e,this.kind=t}}class df{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new df(0,mf.min())}}function ff(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=tf.fromTimestamp(1e9===r?new ef(n+1,0):new ef(n,r));return new mf(i,af.empty(),t)}function pf(e){return new mf(e.readTime,e.key,-1)}class mf{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new mf(tf.min(),af.empty(),-1)}static max(){return new mf(tf.max(),af.empty(),-1)}}function gf(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=af.comparator(e.documentKey,t.documentKey),0!==n?n:Jd(e.largestBatchId,t.largestBatchId))}const yf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function bf(e){if(e.code!==Ud.FAILED_PRECONDITION||e.message!==yf)throw e;Pd("LocalStore","Unexpectedly lost primary lease")}class wf{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Md(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new wf(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof wf?t:wf.resolve(t)}catch(e){return wf.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):wf.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):wf.reject(t)}static resolve(e){return new wf(((t,n)=>{t(e)}))}static reject(e){return new wf(((t,n)=>{n(e)}))}static waitFor(e){return new wf(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=wf.resolve(!1);for(const n of e)t=t.next((e=>e?wf.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new wf(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new wf(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class _f{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new jd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new kf(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Af(t.target.error);this.V.reject(new kf(e,n))}}static open(e,t,n,r){try{return new _f(t,e.transaction(r,n))}catch(e){throw new kf(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Pd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Cf(t)}}class Sf{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Sf.S(Ye())&&Rd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pd("SimpleDb","Removing database:",e),Tf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!it())return!1;if(Sf.C())return!0;const e=Ye(),t=Sf.S(e),n=0<t&&t<10,r=Sf.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Pd("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new kf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new zd(Ud.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new zd(Ud.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new kf(e,r))},r.onupgradeneeded=e=>{Pd("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Pd("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=_f.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),wf.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(Pd("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class If{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Tf(this.k.delete())}}class kf extends zd{constructor(e,t){super(Ud.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Ef(e){return"IndexedDbTransactionError"===e.name}class Cf{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Pd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Pd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Tf(n)}add(e){return Pd("SimpleDb","ADD",this.store.name,e,e),Tf(this.store.add(e))}get(e){return Tf(this.store.get(e)).next((t=>(void 0===t&&(t=null),Pd("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Pd("SimpleDb","DELETE",this.store.name,e),Tf(this.store.delete(e))}count(){return Pd("SimpleDb","COUNT",this.store.name),Tf(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new wf(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new wf(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Pd("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new wf(((n,r)=>{t.onerror=e=>{const t=Af(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new wf(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new If(i),s=t(i.primaryKey,i.value,o);if(s instanceof wf){const e=s.catch((e=>(o.done(),wf.reject(e))));n.push(e)}o.isDone?r():null===o.$?i.continue():i.continue(o.$)}})).next((()=>wf.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Tf(e){return new wf(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Af(e.target.error);n(t)}}))}let xf=!1;function Af(e){const t=Sf.S(Ye());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new zd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return xf||(xf=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Nf{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Pd("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Pd("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){Ef(e)?Pd("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await bf(e)}await this.ee(6e4)}))}}class Pf{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return wf.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Pd("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Pd("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=pf(t);gf(r,n)>0&&(n=r)})),new mf(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Rf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Df(e){return null==e}function Of(e){return 0===e&&1/e==-1/0}function Mf(e){return"number"==typeof e&&Number.isInteger(e)&&!Of(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Lf(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Uf(t)),t=Ff(e.get(n),t);return Uf(t)}function Ff(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Uf(e){return e+"\x01\x01"}function zf(e){const t=e.length;if(Ld(t>=2),2===t)return Ld("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),rf.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&Md(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:Md()}o=t+2}return new rf(r)}Rf._e=-1;const jf=["userId","batchId"];function Vf(e,t){return[e,Lf(t)]}function Bf(e,t,n){return[e,Lf(t),n]}const qf={},Wf=["prefixPath","collectionGroup","readTime","documentId"],Kf=["prefixPath","collectionGroup","documentId"],Hf=["collectionGroup","readTime","prefixPath","documentId"],Gf=["canonicalId","targetId"],Qf=["targetId","path"],Yf=["path","targetId"],$f=["collectionId","parent"],Jf=["indexId","uid"],Xf=["uid","sequenceNumber"],Zf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ep=["indexId","uid","orderedDocumentKey"],tp=["userId","collectionPath","documentId"],np=["userId","collectionPath","largestBatchId"],rp=["userId","collectionGroup","largestBatchId"],ip=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],op=[...ip,"documentOverlays"],sp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ap=sp,lp=[...ap,"indexConfiguration","indexState","indexEntries"];class cp extends vf{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function up(e,t){const n=Fd(e);return Sf.M(n.ae,t)}function hp(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function dp(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function fp(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class pp{constructor(e,t){this.comparator=e,this.root=t||gp.EMPTY}insert(e,t){return new pp(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gp.BLACK,null,null))}remove(e){return new pp(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gp.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mp(this.root,e,this.comparator,!1)}getReverseIterator(){return new mp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mp(this.root,e,this.comparator,!0)}}class mp{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gp{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:gp.RED,this.left=null!=r?r:gp.EMPTY,this.right=null!=i?i:gp.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new gp(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return gp.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return gp.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gp.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gp.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Md();if(this.right.isRed())throw Md();const e=this.left.check();if(e!==this.right.check())throw Md();return e+(this.isRed()?0:1)}}gp.EMPTY=null,gp.RED=!0,gp.BLACK=!1,gp.EMPTY=new class{constructor(){this.size=0}get key(){throw Md()}get value(){throw Md()}get color(){throw Md()}get left(){throw Md()}get right(){throw Md()}copy(e,t,n,r,i){return this}insert(e,t,n){return new gp(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yp{constructor(e){this.comparator=e,this.data=new pp(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vp(this.data.getIterator())}getIteratorFrom(e){return new vp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof yp))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new yp(this.comparator);return t.data=e,t}}class vp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bp(e){return e.hasNext()?e.getNext():void 0}class wp{constructor(e){this.fields=e,e.sort(sf.comparator)}static empty(){return new wp([])}unionWith(e){let t=new yp(sf.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new wp(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xd(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class _p extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sp{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new _p("Invalid base64 string: "+e):e}}(e);return new Sp(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Sp(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jd(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sp.EMPTY_BYTE_STRING=new Sp("");const Ip=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kp(e){if(Ld(!!e),"string"==typeof e){let t=0;const n=Ip.exec(e);if(Ld(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ep(e.seconds),nanos:Ep(e.nanos)}}function Ep(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Cp(e){return"string"==typeof e?Sp.fromBase64String(e):Sp.fromUint8Array(e)}function Tp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function xp(e){const t=e.mapValue.fields.__previous_value__;return Tp(t)?xp(t):t}function Ap(e){const t=kp(e.mapValue.fields.__local_write_time__.timestampValue);return new ef(t.seconds,t.nanos)}class Np{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class Pp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Pp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Pp&&e.projectId===this.projectId&&e.database===this.database}}const Rp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dp={nullValue:"NULL_VALUE"};function Op(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tp(e)?4:Qp(e)?9007199254740991:10:Md()}function Mp(e,t){if(e===t)return!0;const n=Op(e);if(n!==Op(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ap(e).isEqual(Ap(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=kp(e.timestampValue),r=kp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Cp(e.bytesValue).isEqual(Cp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ep(e.geoPointValue.latitude)===Ep(t.geoPointValue.latitude)&&Ep(e.geoPointValue.longitude)===Ep(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ep(e.integerValue)===Ep(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ep(e.doubleValue),r=Ep(t.doubleValue);return n===r?Of(n)===Of(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Xd(e.arrayValue.values||[],t.arrayValue.values||[],Mp);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(hp(n)!==hp(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mp(n[i],r[i])))return!1;return!0}(e,t);default:return Md()}}function Lp(e,t){return void 0!==(e.values||[]).find((e=>Mp(e,t)))}function Fp(e,t){if(e===t)return 0;const n=Op(e),r=Op(t);if(n!==r)return Jd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Jd(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ep(e.integerValue||e.doubleValue),r=Ep(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Up(e.timestampValue,t.timestampValue);case 4:return Up(Ap(e),Ap(t));case 5:return Jd(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Cp(e),r=Cp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Jd(n[i],r[i]);if(0!==e)return e}return Jd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Jd(Ep(e.latitude),Ep(t.latitude));return 0!==n?n:Jd(Ep(e.longitude),Ep(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Fp(n[i],r[i]);if(e)return e}return Jd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Rp.mapValue&&t===Rp.mapValue)return 0;if(e===Rp.mapValue)return 1;if(t===Rp.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Jd(r[s],o[s]);if(0!==e)return e;const t=Fp(n[r[s]],i[o[s]]);if(0!==t)return t}return Jd(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Md()}}function Up(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Jd(e,t);const n=kp(e),r=kp(t),i=Jd(n.seconds,r.seconds);return 0!==i?i:Jd(n.nanos,r.nanos)}function zp(e){return jp(e)}function jp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=kp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Cp(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return af.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=jp(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(jp(e.fields[i]));return n+"}"}(e.mapValue):Md()}function Vp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Bp(e){return!!e&&"integerValue"in e}function qp(e){return!!e&&"arrayValue"in e}function Wp(e){return!!e&&"nullValue"in e}function Kp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hp(e){return!!e&&"mapValue"in e}function Gp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return dp(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Gp(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gp(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Qp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Yp(e){return"nullValue"in e?Dp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Vp(Pp.empty(),af.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Md()}function $p(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Vp(Pp.empty(),af.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Rp:Md()}function Jp(e,t){const n=Fp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Xp(e,t){const n=Fp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Zp{constructor(e){this.value=e}static empty(){return new Zp({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Hp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gp(t)}setAll(e){let t=sf.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Gp(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Hp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mp(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Hp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){dp(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Zp(Gp(this.value))}}function em(e){const t=[];return dp(e.fields,((e,n)=>{const r=new sf([e]);if(Hp(n)){const e=em(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new wp(t)}class tm{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new tm(e,0,tf.min(),tf.min(),tf.min(),Zp.empty(),0)}static newFoundDocument(e,t,n,r){return new tm(e,1,t,tf.min(),n,r,0)}static newNoDocument(e,t){return new tm(e,2,t,tf.min(),tf.min(),Zp.empty(),0)}static newUnknownDocument(e,t){return new tm(e,3,t,tf.min(),tf.min(),Zp.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tf.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zp.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tf.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tm&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tm(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class nm{constructor(e,t){this.position=e,this.inclusive=t}}function rm(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?af.comparator(af.fromName(s.referenceValue),n.key):Fp(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function im(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Mp(e.position[n],t.position[n]))return!1;return!0}class om{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function sm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class am{}class lm extends am{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new vm(e,t,n):"array-contains"===t?new Sm(e,n):"in"===t?new Im(e,n):"not-in"===t?new km(e,n):"array-contains-any"===t?new Em(e,n):new lm(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new bm(e,n):new wm(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Fp(t,this.value)):null!==t&&Op(this.value)===Op(t)&&this.matchesComparison(Fp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Md()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cm extends am{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new cm(e,t)}matches(e){return um(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function um(e){return"and"===e.op}function hm(e){return"or"===e.op}function dm(e){return fm(e)&&um(e)}function fm(e){for(const t of e.filters)if(t instanceof cm)return!1;return!0}function pm(e){if(e instanceof lm)return e.field.canonicalString()+e.op.toString()+zp(e.value);if(dm(e))return e.filters.map((e=>pm(e))).join(",");{const t=e.filters.map((e=>pm(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function mm(e,t){return e instanceof lm?function(e,t){return t instanceof lm&&e.op===t.op&&e.field.isEqual(t.field)&&Mp(e.value,t.value)}(e,t):e instanceof cm?function(e,t){return t instanceof cm&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&mm(n,t.filters[r])),!0)}(e,t):void Md()}function gm(e,t){const n=e.filters.concat(t);return cm.create(n,e.op)}function ym(e){return e instanceof lm?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(zp(e.value))}(e):e instanceof cm?function(e){return e.op.toString()+" {"+e.getFilters().map(ym).join(" ,")+"}"}(e):"Filter"}class vm extends lm{constructor(e,t,n){super(e,t,n),this.key=af.fromName(n.referenceValue)}matches(e){const t=af.comparator(e.key,this.key);return this.matchesComparison(t)}}class bm extends lm{constructor(e,t){super(e,"in",t),this.keys=_m("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wm extends lm{constructor(e,t){super(e,"not-in",t),this.keys=_m("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _m(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>af.fromName(e.referenceValue)))}class Sm extends lm{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qp(t)&&Lp(t.arrayValue,this.value)}}class Im extends lm{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lp(this.value.arrayValue,t)}}class km extends lm{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lp(this.value.arrayValue,t)}}class Em extends lm{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Lp(this.value.arrayValue,e)))}}class Cm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function Tm(e){return new Cm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function xm(e){const t=Fd(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>pm(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Df(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>zp(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>zp(e))).join(",")),t.ce=e}return t.ce}function Am(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!sm(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!mm(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!im(e.startAt,t.startAt)&&im(e.endAt,t.endAt)}function Nm(e){return af.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Pm(e,t){return e.filters.filter((e=>e instanceof lm&&e.field.isEqual(t)))}function Rm(e,t,n){let r=Dp,i=!0;for(const o of Pm(e,t)){let e=Dp,t=!0;switch(o.op){case"<":case"<=":e=Yp(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=Dp}Jp({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Jp({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Dm(e,t,n){let r=Rp,i=!0;for(const o of Pm(e,t)){let e=Rp,t=!0;switch(o.op){case">=":case">":e=$p(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=Rp}Xp({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Xp({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Om{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Mm(e,t,n,r,i,o,s,a){return new Om(e,t,n,r,i,o,s,a)}function Lm(e){return new Om(e)}function Fm(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Um(e){return null!==e.collectionGroup}function zm(e){const t=Fd(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new yp(sf.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new om(r,n))})),e.has(sf.keyField().canonicalString())||t.le.push(new om(sf.keyField(),n))}return t.le}function jm(e){const t=Fd(e);return t.he||(t.he=Vm(t,zm(e))),t.he}function Vm(e,t){if("F"===e.limitType)return Tm(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new om(e.field,t)}));const n=e.endAt?new nm(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new nm(e.startAt.position,e.startAt.inclusive):null;return Tm(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Bm(e,t){const n=e.filters.concat([t]);return new Om(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function qm(e,t,n){return new Om(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wm(e,t){return Am(jm(e),jm(t))&&e.limitType===t.limitType}function Km(e){return"".concat(xm(jm(e)),"|lt:").concat(e.limitType)}function Hm(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>ym(e))).join(", "),"]")),Df(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>zp(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>zp(e))).join(",")),"Target(".concat(t,")")}(jm(e)),"; limitType=").concat(e.limitType,")")}function Gm(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):af.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of zm(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=rm(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zm(e),t))&&!(e.endAt&&!function(e,t,n){const r=rm(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zm(e),t))}(e,t)}function Qm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ym(e){return(t,n)=>{let r=!1;for(const i of zm(e)){const e=$m(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function $m(e,t,n){const r=e.field.isKeyField()?af.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Fp(r,i):Md()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Md()}}class Jm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){dp(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return fp(this.inner)}size(){return this.innerSize}}const Xm=new pp(af.comparator);function Zm(){return Xm}const eg=new pp(af.comparator);function tg(){let e=eg;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ng(e){let t=eg;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function rg(){return og()}function ig(){return og()}function og(){return new Jm((e=>e.toString()),((e,t)=>e.isEqual(t)))}const sg=new pp(af.comparator),ag=new yp(af.comparator);function lg(){let e=ag;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const cg=new yp(Jd);function ug(){return cg}function hg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Of(t)?"-0":t}}function dg(e){return{integerValue:""+e}}function fg(e,t){return Mf(t)?dg(t):hg(e,t)}class pg{constructor(){this._=void 0}}function mg(e,t,n){return e instanceof vg?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Tp(t)&&(t=xp(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof bg?wg(e,t):e instanceof _g?Sg(e,t):function(e,t){const n=yg(e,t),r=kg(n)+kg(e.Ie);return Bp(n)&&Bp(e.Ie)?dg(r):hg(e.serializer,r)}(e,t)}function gg(e,t,n){return e instanceof bg?wg(e,t):e instanceof _g?Sg(e,t):n}function yg(e,t){return e instanceof Ig?function(e){return Bp(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class vg extends pg{}class bg extends pg{constructor(e){super(),this.elements=e}}function wg(e,t){const n=Eg(t);for(const r of e.elements)n.some((e=>Mp(e,r)))||n.push(r);return{arrayValue:{values:n}}}class _g extends pg{constructor(e){super(),this.elements=e}}function Sg(e,t){let n=Eg(t);for(const r of e.elements)n=n.filter((e=>!Mp(e,r)));return{arrayValue:{values:n}}}class Ig extends pg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function kg(e){return Ep(e.integerValue||e.doubleValue)}function Eg(e){return qp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cg{constructor(e,t){this.field=e,this.transform=t}}class Tg{constructor(e,t){this.version=e,this.transformResults=t}}class xg{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xg}static exists(e){return new xg(void 0,e)}static updateTime(e){return new xg(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ag(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ng{}function Pg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vg(e.key,xg.none()):new Lg(e.key,e.data,xg.none());{const n=e.data,r=Zp.empty();let i=new yp(sf.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Fg(e.key,r,new wp(i.toArray()),xg.none())}}function Rg(e,t,n){e instanceof Lg?function(e,t,n){const r=e.value.clone(),i=zg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Fg?function(e,t,n){if(!Ag(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=zg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ug(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Dg(e,t,n,r){return e instanceof Lg?function(e,t,n,r){if(!Ag(e.precondition,t))return n;const i=e.value.clone(),o=jg(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Fg?function(e,t,n,r){if(!Ag(e.precondition,t))return n;const i=jg(e.fieldTransforms,r,t),o=t.data;return o.setAll(Ug(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Ag(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Og(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=yg(r.transform,e||null);null!=i&&(null===n&&(n=Zp.empty()),n.set(r.field,i))}return n||null}function Mg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Xd(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof bg&&t instanceof bg||e instanceof _g&&t instanceof _g?Xd(e.elements,t.elements,Mp):e instanceof Ig&&t instanceof Ig?Mp(e.Ie,t.Ie):e instanceof vg&&t instanceof vg}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Lg extends Ng{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Fg extends Ng{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ug(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function zg(e,t,n){const r=new Map;Ld(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,gg(s,a,n[i]))}return r}function jg(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,mg(e,o,t))}return r}class Vg extends Ng{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bg extends Ng{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qg{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Rg(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Dg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Dg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ig();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Pg(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(tf.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),lg())}isEqual(e){return this.batchId===e.batchId&&Xd(this.mutations,e.mutations,((e,t)=>Mg(e,t)))&&Xd(this.baseMutations,e.baseMutations,((e,t)=>Mg(e,t)))}}class Wg{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ld(e.mutations.length===n.length);let r=sg;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Wg(e,t,n,r)}}class Kg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Hg{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gg,Qg;function Yg(e){switch(e){default:return Md();case Ud.CANCELLED:case Ud.UNKNOWN:case Ud.DEADLINE_EXCEEDED:case Ud.RESOURCE_EXHAUSTED:case Ud.INTERNAL:case Ud.UNAVAILABLE:case Ud.UNAUTHENTICATED:return!1;case Ud.INVALID_ARGUMENT:case Ud.NOT_FOUND:case Ud.ALREADY_EXISTS:case Ud.PERMISSION_DENIED:case Ud.FAILED_PRECONDITION:case Ud.ABORTED:case Ud.OUT_OF_RANGE:case Ud.UNIMPLEMENTED:case Ud.DATA_LOSS:return!0}}function $g(e){if(void 0===e)return Rd("GRPC error has no .code"),Ud.UNKNOWN;switch(e){case Gg.OK:return Ud.OK;case Gg.CANCELLED:return Ud.CANCELLED;case Gg.UNKNOWN:return Ud.UNKNOWN;case Gg.DEADLINE_EXCEEDED:return Ud.DEADLINE_EXCEEDED;case Gg.RESOURCE_EXHAUSTED:return Ud.RESOURCE_EXHAUSTED;case Gg.INTERNAL:return Ud.INTERNAL;case Gg.UNAVAILABLE:return Ud.UNAVAILABLE;case Gg.UNAUTHENTICATED:return Ud.UNAUTHENTICATED;case Gg.INVALID_ARGUMENT:return Ud.INVALID_ARGUMENT;case Gg.NOT_FOUND:return Ud.NOT_FOUND;case Gg.ALREADY_EXISTS:return Ud.ALREADY_EXISTS;case Gg.PERMISSION_DENIED:return Ud.PERMISSION_DENIED;case Gg.FAILED_PRECONDITION:return Ud.FAILED_PRECONDITION;case Gg.ABORTED:return Ud.ABORTED;case Gg.OUT_OF_RANGE:return Ud.OUT_OF_RANGE;case Gg.UNIMPLEMENTED:return Ud.UNIMPLEMENTED;case Gg.DATA_LOSS:return Ud.DATA_LOSS;default:return Md()}}(Qg=Gg||(Gg={}))[Qg.OK=0]="OK",Qg[Qg.CANCELLED=1]="CANCELLED",Qg[Qg.UNKNOWN=2]="UNKNOWN",Qg[Qg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qg[Qg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qg[Qg.NOT_FOUND=5]="NOT_FOUND",Qg[Qg.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qg[Qg.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qg[Qg.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qg[Qg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qg[Qg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qg[Qg.ABORTED=10]="ABORTED",Qg[Qg.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qg[Qg.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qg[Qg.INTERNAL=13]="INTERNAL",Qg[Qg.UNAVAILABLE=14]="UNAVAILABLE",Qg[Qg.DATA_LOSS=15]="DATA_LOSS";let Jg=null;function Xg(){return new TextEncoder}const Zg=new Ed([4294967295,4294967295],0);function ey(e){const t=Xg().encode(e),n=new kd;return n.update(t),new Uint8Array(n.digest())}function ty(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ed([n,r],0),new Ed([i,o],0)]}class ny{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ry("Invalid padding: ".concat(t));if(n<0)throw new ry("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ry("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ry("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Ed.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Ed.fromNumber(n)));return 1===r.compare(Zg)&&(r=new Ed([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=ey(e),[n,r]=ty(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ny(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=ey(e),[n,r]=ty(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ry extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class iy{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,oy.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new iy(tf.min(),r,new pp(Jd),Zm(),lg())}}class oy{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new oy(n,t,lg(),lg(),lg())}}class sy{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class ay{constructor(e,t){this.targetId=e,this.fe=t}}class ly{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sp.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class cy{constructor(){this.ge=0,this.pe=dy(),this.ye=Sp.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=lg(),t=lg(),n=lg();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Md()}})),new oy(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=dy()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ld(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class uy{constructor(e){this.Be=e,this.ke=new Map,this.qe=Zm(),this.Qe=hy(),this.Ke=new pp(Jd)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Md()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Nm(i))if(0===n){const e=new af(i.path);this.We(t,e,tm.newNoDocument(e,tf.min()))}else Ld(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Jg||Jg.tt(function(e,t,n,r,i){var o,s,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Be.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=Cp(n).toUint8Array()}catch(e){if(e instanceof _p)return Dd("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new ny(o,r,i)}catch(e){return Dd(e instanceof ry?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Be.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Nm(i.target)){const t=new af(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,tm.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=lg();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new iy(e,t,this.Ke,this.qe,n);return this.qe=Zm(),this.Qe=hy(),this.Ke=new pp(Jd),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new cy,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new yp(Jd),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Pd("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new cy),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function hy(){return new pp(af.comparator)}function dy(){return new pp(af.comparator)}const fy={asc:"ASCENDING",desc:"DESCENDING"},py={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},my={and:"AND",or:"OR"};class gy{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yy(e,t){return e.useProto3Json||Df(t)?t:{value:t}}function vy(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function by(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function wy(e,t){return vy(e,t.toTimestamp())}function _y(e){return Ld(!!e),tf.fromTimestamp(function(e){const t=kp(e);return new ef(t.seconds,t.nanos)}(e))}function Sy(e,t){return Iy(e,t).canonicalString()}function Iy(e,t){const n=function(e){return new rf(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ky(e){const t=rf.fromString(e);return Ld(Hy(t)),t}function Ey(e,t){return Sy(e.databaseId,t.path)}function Cy(e,t){const n=ky(t);if(n.get(1)!==e.databaseId.projectId)throw new zd(Ud.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new zd(Ud.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new af(Ny(n))}function Ty(e,t){return Sy(e.databaseId,t)}function xy(e){const t=ky(e);return 4===t.length?rf.emptyPath():Ny(t)}function Ay(e){return new rf(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ny(e){return Ld(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Py(e,t,n){return{name:Ey(e,t),fields:n.value.mapValue.fields}}function Ry(e,t,n){const r=Cy(e,t.name),i=_y(t.updateTime),o=t.createTime?_y(t.createTime):tf.min(),s=new Zp({mapValue:{fields:t.fields}}),a=tm.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Dy(e,t){let n;if(t instanceof Lg)n={update:Py(e,t.key,t.value)};else if(t instanceof Vg)n={delete:Ey(e,t.key)};else if(t instanceof Fg)n={update:Py(e,t.key,t.data),updateMask:Ky(t.fieldMask)};else{if(!(t instanceof Bg))return Md();n={verify:Ey(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof vg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof bg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _g)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ig)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Md()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:wy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Md()}(e,t.precondition)),n}function Oy(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?xg.updateTime(_y(e.updateTime)):void 0!==e.exists?xg.exists(e.exists):xg.none()}(t.currentDocument):xg.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ld("REQUEST_TIME"===t.setToServerValue),n=new vg;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new bg(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new _g(e)}else"increment"in t?n=new Ig(e,t.increment):Md();const r=sf.fromServerFormat(t.fieldPath);return new Cg(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Cy(e,t.update.name),o=new Zp({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new wp(t.map((e=>sf.fromServerFormat(e))))}(t.updateMask);return new Fg(i,o,e,n,r)}return new Lg(i,o,n,r)}if(t.delete){const r=Cy(e,t.delete);return new Vg(r,n)}if(t.verify){const r=Cy(e,t.verify);return new Bg(r,n)}return Md()}function My(e,t){return{documents:[Ty(e,t.path)]}}function Ly(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ty(e,i);const o=function(e){if(0!==e.length)return Wy(cm.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:By(e.field),direction:zy(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=yy(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Fy(e){let t=xy(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ld(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Uy(e);return t instanceof cm&&dm(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new om(qy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Df(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new nm(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new nm(n,t)}(n.endAt)),Mm(t,i,s,o,a,"F",l,c)}function Uy(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qy(e.unaryFilter.field);return lm.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qy(e.unaryFilter.field);return lm.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qy(e.unaryFilter.field);return lm.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=qy(e.unaryFilter.field);return lm.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Md()}}(e):void 0!==e.fieldFilter?function(e){return lm.create(qy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Md()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return cm.create(e.compositeFilter.filters.map((e=>Uy(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Md()}}(e.compositeFilter.op))}(e):Md()}function zy(e){return fy[e]}function jy(e){return py[e]}function Vy(e){return my[e]}function By(e){return{fieldPath:e.canonicalString()}}function qy(e){return sf.fromServerFormat(e.fieldPath)}function Wy(e){return e instanceof lm?function(e){if("=="===e.op){if(Kp(e.value))return{unaryFilter:{field:By(e.field),op:"IS_NAN"}};if(Wp(e.value))return{unaryFilter:{field:By(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Kp(e.value))return{unaryFilter:{field:By(e.field),op:"IS_NOT_NAN"}};if(Wp(e.value))return{unaryFilter:{field:By(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:By(e.field),op:jy(e.op),value:e.value}}}(e):e instanceof cm?function(e){const t=e.getFilters().map((e=>Wy(e)));return 1===t.length?t[0]:{compositeFilter:{op:Vy(e.op),filters:t}}}(e):Md()}function Ky(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Hy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Gy{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tf.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:tf.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sp.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Gy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gy(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qy{constructor(e){this.ct=e}}function Yy(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:$y(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ey(e,t.key),fields:t.data.value.mapValue.fields,updateTime:vy(e,t.version.toTimestamp()),createTime:vy(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Jy(t.version)};else{if(!t.isUnknownDocument())return Md();r.unknownDocument={path:n.path.toArray(),version:Jy(t.version)}}return r}function $y(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Jy(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Xy(e){const t=new ef(e.seconds,e.nanoseconds);return tf.fromTimestamp(t)}function Zy(e,t){const n=(t.baseMutations||[]).map((t=>Oy(e.ct,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>Oy(e.ct,t))),i=ef.fromMillis(t.localWriteTimeMs);return new qg(t.batchId,i,n,r)}function ev(e){const t=Xy(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Xy(e.lastLimboFreeSnapshotVersion):tf.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Ld(1===e.documents.length),jm(Lm(xy(e.documents[0])))}(e.query):function(e){return jm(Fy(e))}(e.query),new Gy(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Sp.fromBase64String(e.resumeToken))}function tv(e,t){const n=Jy(t.snapshotVersion),r=Jy(t.lastLimboFreeSnapshotVersion);let i;i=Nm(t.target)?My(e.ct,t.target):Ly(e.ct,t.target).ut;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:xm(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function nv(e){const t=Fy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qm(t,t.limit,"L"):t}function rv(e,t){return new Kg(t.largestBatchId,Oy(e.ct,t.overlayMutation))}function iv(e,t){const n=t.path.lastSegment();return[e,Lf(t.path.popLast()),n]}function ov(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Jy(r.readTime),documentKey:Lf(r.documentKey.path),largestBatchId:r.largestBatchId}}class sv{getBundleMetadata(e,t){return av(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Xy(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return av(e).put(function(e){return{bundleId:e.id,createTime:Jy(_y(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return lv(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:nv(e.bundledQuery),readTime:Xy(e.readTime)}}(e)}))}saveNamedQuery(e,t){return lv(e).put(function(e){return{name:e.name,readTime:Jy(_y(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function av(e){return up(e,"bundles")}function lv(e){return up(e,"namedQueries")}class cv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new cv(e,n)}getOverlay(e,t){return uv(e).get(iv(this.userId,t)).next((e=>e?rv(this.serializer,e):null))}getOverlays(e,t){const n=rg();return wf.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new Kg(t,i);r.push(this.ht(e,o))})),wf.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Lf(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(uv(e).H("collectionPathOverlayIndex",r))})),wf.waitFor(i)}getOverlaysForCollection(e,t,n){const r=rg(),i=Lf(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return uv(e).W("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=rv(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=rg();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uv(e).Y({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=rv(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return uv(e).put(function(e,t,n){const[r,i,o]=iv(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Dy(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function uv(e){return up(e,"documentOverlays")}class hv{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Ep(e.integerValue));else if("doubleValue"in e){const n=Ep(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Of(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Cp(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Qp(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Md()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),af.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function dv(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function fv(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=dv(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}hv.bt=new hv;class pv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=fv(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=fv(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class mv{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class gv{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class yv{constructor(){this.Gt=new pv,this.zt=new mv(this.Gt),this.jt=new gv(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class vv{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new vv(this.indexId,this.documentKey,this.arrayValue,n)}}function bv(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=wv(e.arrayValue,t.arrayValue),0!==n?n:(n=wv(e.directionalValue,t.directionalValue),0!==n?n:af.comparator(e.documentKey,t.documentKey)))}function wv(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class _v{constructor(e){this.Yt=new yp(((e,t)=>sf.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Ld(e.collectionGroup===this.collectionId),this.en)return!1;const t=cf(e);if(void 0!==t&&!this.nn(t))return!1;const n=uf(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],e))return!1}return!0}on(){if(this.en)return null;let e=new yp(sf.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new hf(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new hf(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new hf(n.field,"asc"===n.dir?0:1)));return new lf(lf.UNKNOWN_ID,this.collectionId,t,df.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Sv(e){var t,n;if(Ld(e instanceof lm||e instanceof cm),e instanceof lm){if(e instanceof Im){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>lm.create(e.field,"==",t))))||[];return cm.create(r,"or")}return e}const r=e.filters.map((e=>Sv(e)));return cm.create(r,e.op)}function Iv(e){if(0===e.getFilters().length)return[];const t=Tv(Sv(e));return Ld(Cv(t)),kv(t)||Ev(t)?[t]:t.getFilters()}function kv(e){return e instanceof lm}function Ev(e){return e instanceof cm&&dm(e)}function Cv(e){return kv(e)||Ev(e)||function(e){if(e instanceof cm&&hm(e)){for(const t of e.getFilters())if(!kv(t)&&!Ev(t))return!1;return!0}return!1}(e)}function Tv(e){if(Ld(e instanceof lm||e instanceof cm),e instanceof lm)return e;if(1===e.filters.length)return Tv(e.filters[0]);const t=e.filters.map((e=>Tv(e)));let n=cm.create(t,e.op);return n=Nv(n),Cv(n)?n:(Ld(n instanceof cm),Ld(um(n)),Ld(n.filters.length>1),n.filters.reduce(((e,t)=>xv(e,t))))}function xv(e,t){let n;return Ld(e instanceof lm||e instanceof cm),Ld(t instanceof lm||t instanceof cm),n=e instanceof lm?t instanceof lm?function(e,t){return cm.create([e,t],"and")}(e,t):Av(e,t):t instanceof lm?Av(t,e):function(e,t){if(Ld(e.filters.length>0&&t.filters.length>0),um(e)&&um(t))return gm(e,t.getFilters());const n=hm(e)?e:t,r=hm(e)?t:e,i=n.filters.map((e=>xv(e,r)));return cm.create(i,"or")}(e,t),Nv(n)}function Av(e,t){if(um(t))return gm(t,e.getFilters());{const n=t.filters.map((t=>xv(e,t)));return cm.create(n,"or")}}function Nv(e){if(Ld(e instanceof lm||e instanceof cm),e instanceof lm)return e;const t=e.getFilters();if(1===t.length)return Nv(t[0]);if(fm(e))return e;const n=t.map((e=>Nv(e))),r=[];return n.forEach((t=>{t instanceof lm?r.push(t):t instanceof cm&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:cm.create(r,e.op)}class Pv{constructor(){this._n=new Rv}addToCollectionParentIndex(e,t){return this._n.add(t),wf.resolve()}getCollectionParents(e,t){return wf.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return wf.resolve()}deleteFieldIndex(e,t){return wf.resolve()}deleteAllFieldIndexes(e){return wf.resolve()}createTargetIndexes(e,t){return wf.resolve()}getDocumentsMatchingTarget(e,t){return wf.resolve(null)}getIndexType(e,t){return wf.resolve(0)}getFieldIndexes(e,t){return wf.resolve([])}getNextCollectionGroupToUpdate(e){return wf.resolve(null)}getMinOffset(e,t){return wf.resolve(mf.min())}getMinOffsetFromCollectionGroup(e,t){return wf.resolve(mf.min())}updateCollectionGroup(e,t,n){return wf.resolve()}updateIndexEntries(e,t){return wf.resolve()}}class Rv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new yp(rf.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new yp(rf.comparator)).toArray()}}const Dv=new Uint8Array(0);class Ov{constructor(e,t){this.databaseId=t,this.an=new Rv,this.un=new Jm((e=>xm(e)),((e,t)=>Am(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Lf(r)};return Mv(e).put(i)}return wf.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Zd(t),""],!1,!0);return Mv(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(zf(r.parent))}return n}))}addFieldIndex(e,t){const n=Fv(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Uv(e);return i.next((e=>{n.put(ov(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Fv(e),r=Uv(e),i=Lv(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Fv(e),n=Lv(e),r=Uv(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return wf.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new _v(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Lv(e);let r=!0;const i=new Map;return wf.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=lg();const r=[];return wf.forEach(i,((i,o)=>{Pd("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(xm(t)));const s=function(e,t){const n=cf(t);if(void 0===n)return null;for(const r of Pm(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of uf(t))for(const t of Pm(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of uf(t)){const t=0===i.kind?Rm(e,i.fieldPath,e.startAt):Dm(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new nm(n,r)}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of uf(t)){const t=0===i.kind?Dm(e,i.fieldPath,e.endAt):Rm(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new nm(n,r)}(o,i),u=this.hn(i,o,l),h=this.hn(i,o,c),d=this.Pn(i,o,a),f=this.In(i.indexId,s,u,l.inclusive,h,c.inclusive,d);return wf.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=af.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return wf.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Iv(cm.create(e.filters,"and")).map((t=>Tm(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):Dv,h=this.En(e,a,n[u%l],r),d=this.dn(e,a,i[u%l],o),f=s.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new vv(e,af.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new vv(e,af.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new _v(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return wf.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new yp(sf.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new yv;for(const r of uf(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);hv.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new yv;return hv.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new yv;return hv.bt.Pt(Vp(this.databaseId,t),n.Ht(function(e){const t=uf(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new yv);let i=0;for(const o of uf(e)){const e=n[i++];for(const n of r)if(this.Vn(t,o.fieldPath)&&qp(e))r=this.mn(r,o,e);else{const t=n.Ht(o.kind);hv.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new yv;n.seed(e.Wt()),hv.bt.Pt(o,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof lm&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Fv(e),r=Uv(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return wf.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new df(t.sequenceNumber,new mf(Xy(t.readTime),new af(zf(t.documentKey)),t.largestBatchId)):df.empty(),r=e.fields.map((e=>{let[t,n]=e;return new hf(sf.fromServerFormat(t),n)}));return new lf(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Jd(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Fv(e),i=Uv(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>wf.forEach(t,(t=>i.put(ov(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return wf.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?wf.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),wf.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?wf.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Lv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Lv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Lv(e);let i=new yp(bv);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new vv(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new yp(bv);const r=this.An(t,e);if(null==r)return n;const i=cf(t);if(null!=i){const o=e.data.field(i.fieldPath);if(qp(o))for(const i of o.arrayValue.values||[])n=n.add(new vv(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new vv(t.indexId,e.key,Dv,r));return n}wn(e,t,n,r,i){Pd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=bp(o),l=bp(s);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=bp(s)):t?(i(a),a=bp(o)):(a=bp(o),l=bp(s))}}(r,i,bv,(r=>{o.push(this.Sn(e,t,n,r))}),(r=>{o.push(this.bn(e,t,n,r))})),wf.waitFor(o)}gn(e){let t=1;return Uv(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>bv(e,t))).filter(((e,t,n)=>!t||0!==bv(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=bv(o,e),i=bv(o,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(o),r.push(o.Jt());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Dv,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Dv,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return bv(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zv)}getMinOffset(e,t){return wf.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Md())))).next(zv)}}function Mv(e){return up(e,"collectionParents")}function Lv(e){return up(e,"indexEntries")}function Fv(e){return up(e,"indexConfiguration")}function Uv(e){return up(e,"indexState")}function zv(e){Ld(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;gf(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new mf(t.readTime,t.documentKey,n)}const jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vv{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Vv(e,Vv.DEFAULT_COLLECTION_PERCENTILE,Vv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Bv(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:s},((e,t,n)=>(a++,n.delete())));o.push(l.next((()=>{Ld(1===a)})));const c=[];for(const u of n.mutations){const e=Bf(t,u.key.path,n.batchId);o.push(i.delete(e)),c.push(u.key)}return wf.waitFor(o).next((()=>c))}function qv(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Md();t=e.noDocument}return JSON.stringify(t).length}Vv.DEFAULT_COLLECTION_PERCENTILE=10,Vv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vv.DEFAULT=new Vv(41943040,Vv.DEFAULT_COLLECTION_PERCENTILE,Vv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vv.DISABLED=new Vv(-1,0,0);class Wv{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Ld(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Wv(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hv(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Gv(e),o=Hv(e);return o.add({}).next((s=>{Ld("number"==typeof s);const a=new qg(s,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Dy(e.ct,t))),i=n.mutations.map((t=>Dy(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new yp(((e,t)=>Jd(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Bf(this.userId,e.key.path,s);u=u.add(e.key.path.popLast()),c.push(o.put(l)),c.push(i.put(t,qf))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[s]=a.keys()})),wf.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Hv(e).get(t).next((e=>e?(Ld(e.userId===this.userId),Zy(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?wf.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Hv(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Ld(t.batchId>=n),i=Zy(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Hv(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hv(e).W("userMutationsIndex",t).next((e=>e.map((e=>Zy(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Vf(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Gv(e).Y({range:r},((n,r,o)=>{const[s,a,l]=n,c=zf(a);if(s===this.userId&&t.path.isEqual(c))return Hv(e).get(l).next((e=>{if(!e)throw Md();Ld(e.userId===this.userId),i.push(Zy(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new yp(Jd);const r=[];return t.forEach((t=>{const i=Vf(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=Gv(e).Y({range:o},((e,r,i)=>{const[o,s,a]=e,l=zf(s);o===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(s)})),wf.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Vf(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new yp(Jd);return Gv(e).Y({range:o},((e,t,i)=>{const[o,a,l]=e,c=zf(a);o===this.userId&&n.isPrefixOf(c)?c.length===r&&(s=s.add(l)):i.done()})).next((()=>this.Fn(e,s)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Hv(e).get(t).next((e=>{if(null===e)throw Md();Ld(e.userId===this.userId),n.push(Zy(this.serializer,e))})))})),wf.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Bv(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),wf.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return wf.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Gv(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=zf(e[1]);r.push(t)}else n.done()})).next((()=>{Ld(0===r.length)}))}))}containsKey(e,t){return Kv(e,this.userId,t)}xn(e){return Qv(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Kv(e,t,n){const r=Vf(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Gv(e).Y({range:o,J:!0},((e,n,r)=>{const[o,a,l]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function Hv(e){return up(e,"mutations")}function Gv(e){return up(e,"documentMutations")}function Qv(e){return up(e,"mutationQueues")}class Yv{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Yv(0)}static Ln(){return new Yv(-1)}}class $v{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Yv(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>tf.fromTimestamp(new ef(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Jv(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Ld(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Jv(e).Y(((o,s)=>{const a=ev(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>wf.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Jv(e).Y(((e,n)=>{const r=ev(n);t(r)}))}Bn(e){return Xv(e).get("targetGlobalKey").next((e=>(Ld(null!==e),e)))}kn(e,t){return Xv(e).put("targetGlobalKey",t)}qn(e,t){return Jv(e).put(tv(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=xm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Jv(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=ev(n);Am(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Zv(e);return t.forEach((t=>{const o=Lf(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),wf.waitFor(r)}removeMatchingKeys(e,t,n){const r=Zv(e);return wf.forEach(t,(t=>{const i=Lf(t.path);return wf.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Zv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zv(e);let i=lg();return r.Y({range:n,J:!0},((e,t,n)=>{const r=zf(e[1]),o=new af(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=Lf(t.path),r=IDBKeyRange.bound([n],[Zd(n)],!1,!0);let i=0;return Zv(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Jv(e).get(t).next((e=>e?ev(e):null))}}function Jv(e){return up(e,"targets")}function Xv(e){return up(e,"targetGlobal")}function Zv(e){return up(e,"targetDocuments")}function eb(e,t){let[n,r]=e,[i,o]=t;const s=Jd(n,i);return 0===s?Jd(r,o):s}class tb{constructor(e){this.Kn=e,this.buffer=new yp(eb),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();eb(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nb{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Pd("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ef(e)?Pd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await bf(e)}await this.zn(3e5)}))}}class rb{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return wf.resolve(Rf._e);const n=new tb(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pd("LruGarbageCollector","Garbage collection skipped; disabled"),wf.resolve(jv)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Pd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),jv):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Pd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Nd()<=Lt.DEBUG&&Pd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),wf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function ib(e,t){return new rb(e,t)}class ob{constructor(e,t){this.db=e,this.garbageCollector=ib(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return sb(e,n)}removeReference(e,t,n){return sb(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return sb(e,t)}er(e,t){return function(e,t){let n=!1;return Qv(e).Z((r=>Kv(e,r,t).next((e=>(e&&(n=!0),wf.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((o,s)=>{if(s<=t){const t=this.er(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,tf.min()),Zv(e).delete(function(e){return[0,Lf(e.path)]}(o)))))}));r.push(t)}})).next((()=>wf.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return sb(e,t)}Xn(e,t){const n=Zv(e);let r,i=Rf._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:l}=n;0===o?(i!==Rf._e&&t(new af(zf(r)),i),i=l,r=a):i=Rf._e})).next((()=>{i!==Rf._e&&t(new af(zf(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sb(e,t){return Zv(e).put(function(e,t){return{targetId:0,path:Lf(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ab{constructor(){this.changes=new Jm((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tm.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?wf.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lb{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return db(e).put(n)}removeEntry(e,t,n){return db(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],$y(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=tm.newInvalidDocument(t);return db(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(fb(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:tm.newInvalidDocument(t)};return db(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(fb(t))},((e,r)=>{n={document:this.nr(t,r),size:qv(r)}})).next((()=>n))}getEntries(e,t){let n=Zm();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Zm(),r=new pp(af.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,qv(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return wf.resolve();let r=new yp(mb);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(fb(r.first()),fb(r.last())),o=r.getIterator();let s=o.getNext();return db(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=af.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&mb(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.U(fb(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),$y(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return db(e).W(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Zm();for(const i of e){const e=this.nr(af.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Gm(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Zm();const o=pb(t,n),s=pb(t,mf.max());return db(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.nr(af.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new ub(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return hb(e).get("remoteDocumentGlobalKey").next((e=>(Ld(!!e),e)))}tr(e,t){return hb(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Ry(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=af.fromSegments(t.noDocument.path),r=Xy(t.noDocument.readTime);n=tm.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Md();{const e=af.fromSegments(t.unknownDocument.path),r=Xy(t.unknownDocument.version);n=tm.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ef(e[0],e[1]);return tf.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(tf.min()))return e}return tm.newInvalidDocument(e)}}function cb(e){return new lb(e)}class ub extends ab{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Jm((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new yp(((e,t)=>Jd(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=Yy(this.ar.serializer,o);r=r.add(i.path.popLast());const l=qv(a);n+=l-s.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=Yy(this.ar.serializer,o.convertToNoDocument(tf.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),wf.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function hb(e){return up(e,"remoteDocumentGlobal")}function db(e){return up(e,"remoteDocumentsV14")}function fb(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function pb(e,t){const n=t.documentKey.path.toArray();return[e,$y(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function mb(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Jd(n[o],r[o]),i)return i;return i=Jd(n.length,r.length),i||(i=Jd(n[n.length-2],r[r.length-2]),i||Jd(n[n.length-1],r[r.length-1]))}class gb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yb{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Dg(n.mutation,e,wp.empty(),ef.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,lg()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lg();const r=rg();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=tg();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=rg();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,lg())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Zm();const o=og(),s=og();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Fg)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Dg(s.mutation,t,s.mutation.getFieldMask(),ef.now())):o.set(t.key,wp.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new gb(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=og();let r=new pp(((e,t)=>e-t)),i=lg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||wp.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||lg()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=ig();l.forEach((e=>{if(!i.has(e)){const r=Pg(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return wf.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return af.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Um(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):wf.resolve(rg());let s=-1,a=i;return o.next((t=>wf.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?wf.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,lg()))).next((e=>({batchId:s,changes:ng(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new af(t)).next((e=>{let t=tg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=tg();return this.indexManager.getCollectionParents(e,i).next((s=>wf.forEach(s,(s=>{const a=function(e,t){return new Om(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,tm.newInvalidDocument(r)))}));let n=tg();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&Dg(o.mutation,r,wp.empty(),ef.now()),Gm(t,r)&&(n=n.insert(e,r))})),n}))}}class vb{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return wf.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:_y(e.createTime)}}(t)),wf.resolve()}getNamedQuery(e,t){return wf.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:nv(e.bundledQuery),readTime:_y(e.readTime)}}(t)),wf.resolve()}}class bb{constructor(){this.overlays=new pp(af.comparator),this.hr=new Map}getOverlay(e,t){return wf.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rg();return wf.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),wf.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),wf.resolve()}getOverlaysForCollection(e,t,n){const r=rg(),i=t.length+1,o=new af(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return wf.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new pp(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=rg(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=rg(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return wf.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Kg(t,n));let i=this.hr.get(t);void 0===i&&(i=lg(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class wb{constructor(){this.Pr=new yp(_b.Ir),this.Tr=new yp(_b.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new _b(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new _b(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new af(new rf([])),n=new _b(t,e),r=new _b(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new af(new rf([])),n=new _b(t,e),r=new _b(t,e+1);let i=lg();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new _b(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class _b{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return af.comparator(e.key,t.key)||Jd(e.pr,t.pr)}static Er(e,t){return Jd(e.pr,t.pr)||af.comparator(e.key,t.key)}}class Sb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new yp(_b.Ir)}checkEmpty(e){return wf.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qg(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.wr=this.wr.add(new _b(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return wf.resolve(o)}lookupMutationBatch(e,t){return wf.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return wf.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return wf.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return wf.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new _b(t,0),r=new _b(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),wf.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new yp(Jd);return t.forEach((e=>{const t=new _b(e,0),r=new _b(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),wf.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;af.isDocumentKey(i)||(i=i.child(""));const o=new _b(new af(i),0);let s=new yp(Jd);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.pr)),!0)}),o),wf.resolve(this.Dr(s))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ld(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return wf.forEach(t.mutations,(r=>{const i=new _b(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new _b(t,0),r=this.wr.firstAfterOrEqual(n);return wf.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,wf.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ib{constructor(e){this.vr=e,this.docs=new pp(af.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return wf.resolve(n?n.document.mutableCopy():tm.newInvalidDocument(t))}getEntries(e,t){let n=Zm();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():tm.newInvalidDocument(e))})),wf.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Zm();const o=t.path,s=new af(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||gf(pf(s),n)<=0||(r.has(s.key)||Gm(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return wf.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Md()}Fr(e,t){return wf.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new kb(this)}getSize(e){return wf.resolve(this.size)}}class kb extends ab{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),wf.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Eb{constructor(e){this.persistence=e,this.Mr=new Jm((e=>xm(e)),Am),this.lastRemoteSnapshotVersion=tf.min(),this.highestTargetId=0,this.Or=0,this.Nr=new wb,this.targetCount=0,this.Lr=Yv.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),wf.resolve()}getLastRemoteSnapshotVersion(e){return wf.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wf.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),wf.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),wf.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Yv(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,wf.resolve()}updateTargetData(e,t){return this.qn(t),wf.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,wf.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),wf.waitFor(i).next((()=>r))}getTargetCount(e){return wf.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return wf.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),wf.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),wf.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),wf.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return wf.resolve(n)}containsKey(e,t){return wf.resolve(this.Nr.containsKey(t))}}class Cb{constructor(e,t){this.Br={},this.overlays={},this.kr=new Rf(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Eb(this),this.indexManager=new Pv,this.remoteDocumentCache=function(e){return new Ib(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Qy(t),this.$r=new vb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Sb(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Pd("MemoryPersistence","Starting transaction:",e);const r=new Tb(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return wf.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Tb extends vf{constructor(e){super(),this.currentSequenceNumber=e}}class xb{constructor(e){this.persistence=e,this.zr=new wb,this.jr=null}static Hr(e){return new xb(e)}get Jr(){if(this.jr)return this.jr;throw Md()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),wf.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),wf.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),wf.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wf.forEach(this.Jr,(n=>{const r=af.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,tf.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return wf.or([()=>wf.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Ab{constructor(e){this.serializer=e}N(e,t,n,r){const i=new _f("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jf,{unique:!0}),e.createObjectStore("documentMutations")}(e),Nb(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=wf.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Nb(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tf.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jf,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return wf.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Xr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(o=o.next((()=>this.ti(i)))),n<8&&r>=8&&(o=o.next((()=>this.ni(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ri(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:tp});t.createIndex("collectionPathOverlayIndex",np,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",rp,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Wf});t.createIndex("documentKeyIndex",Kf),t.createIndex("collectionGroupIndex",Hf)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Jf}).createIndex("sequenceNumberIndex",Xf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Zf}).createIndex("documentKeyIndex",ep,{unique:!1})}(e)))),o}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=qv(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>wf.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>wf.forEach(n,(n=>{Ld(n.userId===t.userId);const r=Zy(this.serializer,n);return Bv(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const o=new rf(n),s=function(e){return[0,Lf(e)]}(o);r.push(t.get(s).next((n=>n?wf.resolve():(n=>t.put({targetId:0,path:Lf(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>wf.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:$f});const n=t.store("collectionParents"),r=new Rv,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Lf(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new rf(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,o]=e;const s=zf(r);return i(s.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=ev(n),i=tv(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new af(rf.fromString(e.document.name).popFirst(5)):e.noDocument?af.fromSegments(e.noDocument.path):e.unknownDocument?af.fromSegments(e.unknownDocument.path):Md()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>wf.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=cb(this.serializer),i=new Cb(xb.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:lg();Zy(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),wf.forEach(n,((e,n)=>{const o=new Td(n),s=cv.lt(this.serializer,o),a=i.getIndexManager(o),l=Wv.lt(o,this.serializer,a,i.referenceDelegate);return new yb(r,l,s,a).recalculateAndSaveOverlaysForDocumentKeys(new cp(t,Rf._e),e).next()}))}))}}function Nb(e){e.createObjectStore("targetDocuments",{keyPath:Qf}).createIndex("documentTargetsIndex",Yf,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Gf,{unique:!0}),e.createObjectStore("targetGlobal")}const Pb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Rb{constructor(e,t,n,r,i,o,s,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=o,this.document=s,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Rb.D())throw new zd(Ud.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ob(this,r),this.Ti=t+"main",this.serializer=new Qy(a),this.Ei=new Sf(this.Ti,this.ui,new Ab(this.serializer)),this.Qr=new $v(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cb(this.serializer),this.$r=new sv,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&Rd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new zd(Ud.FAILED_PRECONDITION,Pb);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Rf(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ob(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Ef(e))return Pd("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Db(e).get("owner").next((e=>wf.resolve(this.Si(e))))}bi(e){return Ob(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=up(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return wf.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?wf.resolve(!0):Db(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new zd(Ud.FAILED_PRECONDITION,Pb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ob(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Pd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new cp(e,Rf._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Ob(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Wv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ov(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return cv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Pd("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?lp:14===e?ap:13===e?sp:12===e?op:11===e?ip:void Md()}(this.ui);let o;return this.Ei.runTransaction(e,r,i,(r=>(o=new cp(r,this.kr?this.kr.next():Rf._e),"readwrite-primary"===t?this.gi(o).next((e=>!!e||this.pi(o))).next((t=>{if(!t)throw Rd("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new zd(Ud.FAILED_PRECONDITION,yf);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ki(e){return Db(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new zd(Ud.FAILED_PRECONDITION,Pb)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Db(e).put("owner",t)}static D(){return Sf.D()}yi(e){const t=Db(e);return t.get("owner").next((e=>this.Si(e)?(Pd("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):wf.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Rd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;rt()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Pd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Rd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(Dz){Rd("Failed to set zombie client id.",Dz)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(Dz){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Db(e){return up(e,"owner")}function Ob(e){return up(e,"clientMetadata")}function Mb(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Lb{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=lg(),r=lg();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Lb(e,t.fromCache,n,r)}}class Fb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ub{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=rt()?8:Sf.v(Ye())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Fb;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Nd()<=Lt.DEBUG&&Pd("QueryEngine","SDK will not create cache indexes for query:",Hm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),wf.resolve()):(Nd()<=Lt.DEBUG&&Pd("QueryEngine","Query:",Hm(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Nd()<=Lt.DEBUG&&Pd("QueryEngine","The SDK decides to create cache indexes for query:",Hm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jm(t))):wf.resolve())}ji(e,t){if(Fm(t))return wf.resolve(null);let n=jm(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=qm(t,null,"F"),n=jm(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=lg(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,qm(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return Fm(t)||r.isEqual(tf.min())?wf.resolve(null):this.zi.getDocuments(e,n).next((i=>{const o=this.Zi(t,i);return this.Xi(t,o,n,r)?wf.resolve(null):(Nd()<=Lt.DEBUG&&Pd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hm(t)),this.es(e,o,t,ff(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new yp(Ym(e));return t.forEach(((t,r)=>{Gm(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Nd()<=Lt.DEBUG&&Pd("QueryEngine","Using full collection scan to execute query:",Hm(t)),this.zi.getDocumentsMatchingQuery(e,t,mf.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class zb{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new pp(Jd),this.rs=new Jm((e=>xm(e)),Am),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yb(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function jb(e,t,n,r){return new zb(e,t,n,r)}async function Vb(e,t){const n=Fd(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=lg();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Bb(e){const t=Fd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function qb(e,t,n){let r=lg(),i=lg();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Zm();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(tf.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Pd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function Wb(e,t){const n=Fd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Kb(e,t){const n=Fd(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,wf.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Gy(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Hb(e,t,n){const r=Fd(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Ef(e))throw e;Pd("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Gb(e,t,n){const r=Fd(e);let i=tf.min(),o=lg();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Fd(e),i=r.rs.get(n);return void 0!==i?wf.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,jm(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:tf.min(),n?o:lg()))).next((e=>($b(r,Qm(t),e),{documents:e,hs:o})))))}function Qb(e,t){const n=Fd(e),r=Fd(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Yb(e,t){const n=Fd(e),r=n.ss.get(t)||tf.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,ff(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>($b(n,t,e),e)))}function $b(e,t,n){let r=e.ss.get(t)||tf.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Jb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lg();const r=await Kb(e,jm(nv(t.bundledQuery))),i=Fd(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=_y(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(e,t);const s=r.withResumeToken(Sp.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(s.targetId,s),i.Qr.updateTargetData(e,s).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Xb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Zb(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ew(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class tw{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new zd(r.error.code,r.error.message))),o?new tw(e,t,r.state,i):(Rd("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nw{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new zd(n.error.code,n.error.message))),i?new nw(e,n.state,r):(Rd("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ug();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=Mf(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new rw(e,i):(Rd("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class iw{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new iw(t.clientId,t.onlineState):(Rd("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class ow{constructor(){this.activeTargetIds=ug()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sw{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new pp(Jd),this.started=!1,this.ys=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Xb(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new ow),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Xb(this.persistenceKey,n));if(e){const t=rw.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(ew(this.persistenceKey,e));if(n){const r=nw.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ew(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pd("SharedClientState","READ",e,t),t}setItem(e,t){Pd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Pd("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Rd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Rf._e;if(null!=e)try{const n=JSON.parse(e);Ld("number"==typeof n),t=n}catch(e){Rd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Rf._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new tw(this.currentUser,e,t,n),i=Zb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=Zb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=ew(this.persistenceKey,e),i=new nw(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return rw.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return tw.Es(new Td(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return nw.Es(r,t)}xs(e){return iw.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Pd("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.eo(o,s).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=ug();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class aw{constructor(){this.no=new ow,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ow,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lw{io(e){}shutdown(){}}class cw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Pd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Pd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uw=null;function hw(){return null===uw?uw=268435456+Math.round(2147483648*Math.random()):uw++,"0x"+uw.toString(16)}const dw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fw{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const pw="WebChannelConnection";class mw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const o=hw(),s=this.bo(e,t.toUriEncodedString());Pd("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,s,a,n).then((t=>(Pd("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Dd("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=dw[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=hw();return new Promise(((o,s)=>{const a=new Id;a.setWithCredentials(!0),a.listenOnce(bd.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case vd.NO_ERROR:const t=a.getResponseJson();Pd(pw,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case vd.TIMEOUT:Pd(pw,"RPC '".concat(e,"' ").concat(i," timed out")),s(new zd(Ud.DEADLINE_EXCEEDED,"Request time out"));break;case vd.HTTP_ERROR:const n=a.getStatus();if(Pd(pw,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ud).indexOf(t)>=0?t:Ud.UNKNOWN}(t.status);s(new zd(e,t.message))}else s(new zd(Ud.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new zd(Ud.UNAVAILABLE,"Connection failed."));break;default:Md()}}finally{Pd(pw,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Pd(pw,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=hw(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gd(),s=yd(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Pd(pw,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);let h=!1,d=!1;const f=new fw({lo:t=>{d?Pd(pw,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Pd(pw,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Pd(pw,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Sd.EventType.OPEN,(()=>{d||Pd(pw,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Sd.EventType.CLOSE,(()=>{d||(d=!0,Pd(pw,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,Sd.EventType.ERROR,(t=>{d||(d=!0,Dd(pw,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new zd(Ud.UNAVAILABLE,"The operation could not be completed")))})),p(u,Sd.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ld(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Pd(pw,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Gg[e];if(void 0!==t)return $g(t)}(t),i=s.message;void 0===n&&(n=Ud.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.Vo(new zd(n,i)),u.close()}else Pd(pw,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(s,wd.STAT_EVENT,(t=>{t.stat===_d.PROXY?Pd(pw,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===_d.NOPROXY&&Pd(pw,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function gw(){return"undefined"!=typeof window?window:null}function yw(){return"undefined"!=typeof document?document:null}function vw(e){return new gy(e,!0)}class bw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Pd("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class ww{constructor(e,t,n,r,i,o,s,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new bw(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Ud.RESOURCE_EXHAUSTED?(Rd(t.toString()),Rd("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Ud.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new zd(Ud.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Pd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Pd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _w extends ww{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Md()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Ld(void 0===t||"string"==typeof t),Sp.fromBase64String(t||"")):(Ld(void 0===t||t instanceof Uint8Array),Sp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Ud.UNKNOWN:$g(e.code);return new zd(t,e.message||"")}(s);n=new ly(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cy(e,r.document.name),o=_y(r.document.updateTime),s=r.document.createTime?_y(r.document.createTime):tf.min(),a=new Zp({mapValue:{fields:r.document.fields}}),l=tm.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new sy(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Cy(e,r.document),o=r.readTime?_y(r.readTime):tf.min(),s=tm.newNoDocument(i,o),a=r.removedTargetIds||[];n=new sy([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Cy(e,r.document),o=r.removedTargetIds||[];n=new sy([],o,i,null)}else{if(!("filter"in t))return Md();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Hg(r,i),s=e.targetId;n=new ay(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return tf.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?tf.min():t.readTime?_y(t.readTime):tf.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Ay(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Nm(r)?{documents:My(e,r)}:{query:Ly(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=by(e,t.resumeToken);const r=yy(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(tf.min())>0){n.readTime=vy(e,t.snapshotVersion.toTimestamp());const r=yy(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Md()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Ay(this.serializer),t.removeTarget=e,this.t_(t)}}class Sw extends ww{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Ld(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Ld(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?_y(e.updateTime):_y(t);return n.isEqual(tf.min())&&(n=_y(t)),new Tg(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=_y(e.commitTime);return this.listener.T_(n,t)}return Ld(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Ay(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Dy(this.serializer,e)))};this.t_(t)}}class Iw extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new zd(Ud.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.So(e,Iy(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ud.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zd(Ud.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.vo(e,Iy(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ud.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zd(Ud.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class kw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Rd(t),this.g_=!1):Pd("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Ew{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{Ow(this)&&(Pd("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Fd(e);t.v_.add(4),await Tw(t),t.x_.set("Unknown"),t.v_.delete(4),await Cw(t)}(this))}))})),this.x_=new kw(n,r)}}async function Cw(e){if(Ow(e))for(const t of e.F_)await t(!0)}async function Tw(e){for(const t of e.F_)await t(!1)}function xw(e,t){const n=Fd(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Dw(n)?Rw(n):Xw(n).Jo()&&Nw(n,t))}function Aw(e,t){const n=Fd(e),r=Xw(n);n.C_.delete(t),r.Jo()&&Pw(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Ow(n)&&n.x_.set("Unknown"))}function Nw(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(tf.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Xw(e).c_(t)}function Pw(e,t){e.O_.Oe(t),Xw(e).l_(t)}function Rw(e){e.O_=new uy({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Xw(e).start(),e.x_.p_()}function Dw(e){return Ow(e)&&!Xw(e).Ho()&&e.C_.size>0}function Ow(e){return 0===Fd(e).v_.size}function Mw(e){e.O_=void 0}async function Lw(e){e.C_.forEach(((t,n)=>{Nw(e,t)}))}async function Fw(e,t){Mw(e),Dw(e)?(e.x_.S_(t),Rw(e)):e.x_.set("Unknown")}async function Uw(e,t,n){if(e.x_.set("Online"),t instanceof ly&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Pd("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await zw(e,n)}else if(t instanceof sy?e.O_.$e(t):t instanceof ay?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(tf.min()))try{const t=await Bb(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Sp.EMPTY_BYTE_STRING,r.snapshotVersion)),Pw(e,t);const i=new Gy(r.target,t,n,r.sequenceNumber);Nw(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Pd("RemoteStore","Failed to raise snapshot:",t),await zw(e,t)}}async function zw(e,t,n){if(!Ef(t))throw t;e.v_.add(1),await Tw(e),e.x_.set("Offline"),n||(n=()=>Bb(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Pd("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Cw(e)}))}function jw(e,t){return t().catch((n=>zw(e,n,t)))}async function Vw(e){const t=Fd(e),n=Zw(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Bw(t);)try{const e=await Wb(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,qw(t,e)}catch(e){await zw(t,e)}Ww(t)&&Kw(t)}function Bw(e){return Ow(e)&&e.D_.length<10}function qw(e,t){e.D_.push(t);const n=Zw(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Ww(e){return Ow(e)&&!Zw(e).Ho()&&e.D_.length>0}function Kw(e){Zw(e).start()}async function Hw(e){Zw(e).d_()}async function Gw(e){const t=Zw(e);for(const n of e.D_)t.I_(n.mutations)}async function Qw(e,t,n){const r=e.D_.shift(),i=Wg.from(r,t,n);await jw(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Vw(e)}async function Yw(e,t){t&&Zw(e).P_&&await async function(e,t){if(function(e){return Yg(e)&&e!==Ud.ABORTED}(t.code)){const n=e.D_.shift();Zw(e).Zo(),await jw(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Vw(e)}}(e,t),Ww(e)&&Kw(e)}async function $w(e,t){const n=Fd(e);n.asyncQueue.verifyOperationInProgress(),Pd("RemoteStore","RemoteStore received new credentials");const r=Ow(n);n.v_.add(3),await Tw(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Cw(n)}async function Jw(e,t){const n=Fd(e);t?(n.v_.delete(2),await Cw(n)):t||(n.v_.add(2),await Tw(n),n.x_.set("Unknown"))}function Xw(e){return e.N_||(e.N_=function(e,t,n){const r=Fd(e);return r.R_(),new _w(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Lw.bind(null,e),To:Fw.bind(null,e),u_:Uw.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Dw(e)?Rw(e):e.x_.set("Unknown")):(await e.N_.stop(),Mw(e))}))),e.N_}function Zw(e){return e.L_||(e.L_=function(e,t,n){const r=Fd(e);return r.R_(),new Sw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Hw.bind(null,e),To:Yw.bind(null,e),E_:Gw.bind(null,e),T_:Qw.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await Vw(e)):(await e.L_.stop(),e.D_.length>0&&(Pd("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class e_{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new jd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new e_(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zd(Ud.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function t_(e,t){if(Rd("AsyncQueue","".concat(t,": ").concat(e)),Ef(e))return new zd(Ud.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class n_{constructor(e){this.comparator=e?(t,n)=>e(t,n)||af.comparator(t.key,n.key):(e,t)=>af.comparator(e.key,t.key),this.keyedMap=tg(),this.sortedSet=new pp(this.comparator)}static emptySet(e){return new n_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n_))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new n_;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class r_{constructor(){this.B_=new pp(af.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Md():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class i_{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new i_(e,t,n_.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class o_{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class s_{constructor(){this.queries=new Jm((e=>Km(e)),Wm),this.onlineState="Unknown",this.W_=new Set}}async function a_(e,t){const n=Fd(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.K_()&&t.U_()&&(r=2):(o=new o_,r=t.U_()?0:1);try{switch(r){case 0:o.q_=await n.onListen(i,!0);break;case 1:o.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=t_(e,"Initialization of query '".concat(Hm(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Q_.push(t),t.G_(n.onlineState),o.q_&&t.z_(o.q_)&&h_(n)}async function l_(e,t){const n=Fd(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Q_.indexOf(t);e>=0&&(o.Q_.splice(e,1),0===o.Q_.length?i=t.U_()?0:1:!o.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function c_(e,t){const n=Fd(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.z_(i)&&(r=!0);t.q_=i}}r&&h_(n)}function u_(e,t,n){const r=Fd(e),i=r.queries.get(t);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(t)}function h_(e){e.W_.forEach((e=>{e.next()}))}var d_,f_;(f_=d_||(d_={})).j_="default",f_.Cache="cache";class p_{constructor(e,t,n){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new i_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=i_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==d_.Cache}}class m_{constructor(e,t){this.na=e,this.byteLength=t}ra(){return"metadata"in this.na}}class g_{constructor(e){this.serializer=e}Ps(e){return Cy(this.serializer,e)}Is(e){return e.metadata.exists?Ry(this.serializer,e.document,!1):tm.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return _y(e)}}class y_{constructor(e,t,n){this.ia=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=v_(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;const n=rf.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}oa(e){const t=new Map,n=new g_(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||lg()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Fd(e);let o=lg(),s=Zm();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(o=o.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),s=s.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Kb(i,function(e){return jm(Lm(rf.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>qb(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,o,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new g_(this.serializer),this.documents,this.ia.id),t=this.oa(this.documents);for(const n of this.queries)await Jb(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function v_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class b_{constructor(e){this.key=e}}class w_{constructor(e){this.key=e}}class __{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=lg(),this.mutatedKeys=lg(),this.ha=Ym(e),this.Pa=new n_(this.ha)}get Ia(){return this.ua}Ta(e,t){const n=t?t.Ea:new r_,r=t?t.Pa:this.Pa;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Gm(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.da(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ha(u,a)>0||l&&this.ha(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Pa:o,Ea:n,Xi:s,mutatedKeys:i}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Md()}};return n(e)-n(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(n),r=null!=r&&r;const s=t&&!r?this.Ra():[],a=0===this.la.size&&this.current&&!r?1:0,l=a!==this.ca;return this.ca=a,0!==o.length||l?{snapshot:new i_(this.query,e.Pa,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:s}:{Va:s}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new r_,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=lg(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new w_(e))})),this.la.forEach((n=>{e.has(n)||t.push(new b_(n))})),t}fa(e){this.ua=e.hs,this.la=lg();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return i_.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class S_{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class I_{constructor(e){this.key=e,this.pa=!1}}class k_{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Jm((e=>Km(e)),Wm),this.Sa=new Map,this.ba=new Set,this.Da=new pp(af.comparator),this.Ca=new Map,this.va=new wb,this.Fa={},this.Ma=new Map,this.xa=Yv.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function E_(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=eS(e);let i;const o=r.wa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=await T_(r,t,n,!0),i}async function C_(e,t){const n=eS(e);await T_(n,t,!0,!1)}async function T_(e,t,n,r){const i=await Kb(e.localStore,jm(t)),o=i.targetId,s=n?e.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=await x_(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&xw(e.remoteStore,i),a}async function x_(e,t,n,r,i){e.Na=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ta(n);i.Xi&&(i=await Gb(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ta(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return j_(e,t.targetId,a.Va),a.snapshot}(e,t,n,r);const o=await Gb(e.localStore,t,!0),s=new __(t,o.hs),a=s.Ta(o.documents),l=oy.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);j_(e,n,c.Va);const u=new S_(t,n,s);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),c.snapshot}async function A_(e,t,n){const r=Fd(e),i=r.wa.get(t),o=r.Sa.get(i.targetId);if(o.length>1)return r.Sa.set(i.targetId,o.filter((e=>!Wm(e,t)))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Hb(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Aw(r.remoteStore,i.targetId),U_(r,i.targetId)})).catch(bf)):(U_(r,i.targetId),await Hb(r.localStore,i.targetId,!0))}async function N_(e,t){const n=Fd(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Aw(n.remoteStore,r.targetId))}async function P_(e,t){const n=Fd(e);try{const e=await function(e,t){const n=Fd(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Sp.EMPTY_BYTE_STRING,tf.min()).withLastLimboFreeSnapshotVersion(tf.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&s.push(n.Qr.updateTargetData(e,c))}));let a=Zm(),l=lg();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(qb(e,o,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(tf.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return wf.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ca.get(t);r&&(Ld(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.pa=!0:e.modifiedDocuments.size>0?Ld(r.pa):e.removedDocuments.size>0&&(Ld(r.pa),r.pa=!1))})),await q_(n,e,t)}catch(e){await bf(e)}}function R_(e,t,n){const r=Fd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wa.forEach(((n,r)=>{const i=r.view.G_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Fd(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.G_(t)&&(r=!0)})),r&&h_(n)}(r.eventManager,t),e.length&&r.ya.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function D_(e,t,n){const r=Fd(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),o=i&&i.key;if(o){let e=new pp(af.comparator);e=e.insert(o,tm.newNoDocument(o,tf.min()));const n=lg().add(o),i=new iy(tf.min(),new Map,new pp(Jd),e,n);await P_(r,i),r.Da=r.Da.remove(o),r.Ca.delete(t),B_(r)}else await Hb(r.localStore,t,!1).then((()=>U_(r,t,n))).catch(bf)}async function O_(e,t){const n=Fd(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Fd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=wf.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Ld(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=lg();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);F_(n,r,null),L_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await q_(n,e)}catch(e){await bf(e)}}async function M_(e,t,n){const r=Fd(e);try{const e=await function(e,t){const n=Fd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ld(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);F_(r,t,n),L_(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await q_(r,e)}catch(n){await bf(n)}}function L_(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function F_(e,t,n){const r=Fd(e);let i=r.Fa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function U_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||z_(e,t)}))}function z_(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);null!==n&&(Aw(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),B_(e))}function j_(e,t,n){for(const r of n)r instanceof b_?(e.va.addReference(r.key,t),V_(e,r)):r instanceof w_?(Pd("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||z_(e,r.key)):Md()}function V_(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(Pd("SyncEngine","New document in limbo: "+n),e.ba.add(r),B_(e))}function B_(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new af(rf.fromString(t)),r=e.xa.next();e.Ca.set(r,new I_(n)),e.Da=e.Da.insert(n,r),xw(e.remoteStore,new Gy(jm(Lm(n.path)),r,"TargetPurposeLimboResolution",Rf._e))}}async function q_(e,t,n){const r=Fd(e),i=[],o=[],s=[];r.wa.isEmpty()||(r.wa.forEach(((e,a)=>{s.push(r.Na(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Lb.Ki(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.ya.u_(i),await async function(e,t){const n=Fd(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>wf.forEach(t,(t=>wf.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>wf.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Ef(e))throw e;Pd("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function W_(e,t){const n=Fd(e);if(!n.currentUser.isEqual(t)){Pd("SyncEngine","User change. New user:",t.toKey());const e=await Vb(n.localStore,t);n.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new zd(Ud.CANCELLED,t))}))})),e.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await q_(n,e.us)}}function K_(e,t){const n=Fd(e),r=n.Ca.get(t);if(r&&r.pa)return lg().add(r.key);{let e=lg();const r=n.Sa.get(t);if(!r)return e;for(const t of r){const r=n.wa.get(t);e=e.unionWith(r.view.Ia)}return e}}async function H_(e,t){const n=Fd(e),r=await Gb(n.localStore,t.query,!0),i=t.view.fa(r);return n.isPrimaryClient&&j_(n,t.targetId,i.Va),i}async function G_(e,t){const n=Fd(e);return Yb(n.localStore,t).then((e=>q_(n,e)))}async function Q_(e,t,n,r){const i=Fd(e),o=await function(e,t){const n=Fd(e),r=Fd(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):wf.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await Vw(i.remoteStore):"acknowledged"===n||"rejected"===n?(F_(i,t,r||null),L_(i,t),function(e,t){Fd(Fd(e).mutationQueue).Mn(t)}(i.localStore,t)):Md(),await q_(i,o)):Pd("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Y_(e,t,n){const r=Fd(e),i=[],o=[];for(const s of t){let e;const t=r.Sa.get(s);if(t&&0!==t.length){e=await Kb(r.localStore,jm(t[0]));for(const e of t){const t=r.wa.get(e),n=await H_(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await Qb(r.localStore,s);e=await Kb(r.localStore,t),await x_(r,$_(t),s,!1,e.resumeToken)}i.push(e)}return r.ya.u_(o),i}function $_(e){return Mm(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function J_(e){return function(e){return Fd(Fd(e).persistence).Bi()}(Fd(e).localStore)}async function X_(e,t,n,r){const i=Fd(e);if(i.Oa)return void Pd("SyncEngine","Ignoring unexpected query state notification.");const o=i.Sa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await Yb(i.localStore,Qm(o[0])),r=iy.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Sp.EMPTY_BYTE_STRING);await q_(i,e,r);break}case"rejected":await Hb(i.localStore,t,!0),U_(i,t,r);break;default:Md()}}async function Z_(e,t,n){const r=eS(e);if(r.Oa){for(const e of t){if(r.Sa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Pd("SyncEngine","Adding an already active target "+e);continue}const t=await Qb(r.localStore,e),n=await Kb(r.localStore,t);await x_(r,$_(t),n.targetId,!1,n.resumeToken),xw(r.remoteStore,n)}for(const e of n)r.Sa.has(e)&&await Hb(r.localStore,e,!1).then((()=>{Aw(r.remoteStore,e),U_(r,e)})).catch(bf)}}function eS(e){const t=Fd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=P_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=K_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=D_.bind(null,t),t.ya.u_=c_.bind(null,t.eventManager),t.ya.La=u_.bind(null,t.eventManager),t}function tS(e){const t=Fd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=O_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=M_.bind(null,t),t}class nS{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=vw(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return jb(this.persistence,new Ub,e.initialUser,this.serializer)}createPersistence(e){return new Cb(xb.Hr,this.serializer)}createSharedClientState(e){return new aw}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class rS extends nS{constructor(e,t,n){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await tS(this.ka.syncEngine),await Vw(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return jb(this.persistence,new Ub,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new nb(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Pf(t,this.persistence);return new Nf(e.asyncQueue,n)}createPersistence(e){const t=Mb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Vv.withCacheSize(this.cacheSizeBytes):Vv.DEFAULT;return new Rb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,gw(),yw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new aw}}class iS extends rS{constructor(e,t){super(e,t,!1),this.ka=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ka.syncEngine;this.sharedClientState instanceof sw&&(this.sharedClientState.syncEngine={Zs:Q_.bind(null,t),Xs:X_.bind(null,t),eo:Z_.bind(null,t),Bi:J_.bind(null,t),Ys:G_.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Fd(e);if(eS(n),tS(n),!0===t&&!0!==n.Oa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Y_(n,e.toArray());n.Oa=!0,await Jw(n.remoteStore,!0);for(const r of t)xw(n.remoteStore,r)}else if(!1===t&&!1!==n.Oa){const e=[];let t=Promise.resolve();n.Sa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(U_(n,i),Hb(n.localStore,i,!0)))),Aw(n.remoteStore,i)})),await t,await Y_(n,e),function(e){const t=Fd(e);t.Ca.forEach(((e,n)=>{Aw(t.remoteStore,n)})),t.va.mr(),t.Ca=new Map,t.Da=new pp(af.comparator)}(n),n.Oa=!1,await Jw(n.remoteStore,!1)}}(this.ka.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=gw();if(!sw.D(t))throw new zd(Ud.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Mb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class oS{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>R_(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=W_.bind(null,this.syncEngine),await Jw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new s_}createDatastore(e){const t=vw(e.databaseInfo.databaseId),n=function(e){return new mw(e)}(e.databaseInfo);return function(e,t,n,r){return new Iw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ew(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>R_(this.syncEngine,e,0)),cw.D()?new cw:new lw)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new k_(e,t,n,r,i,o);return s&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Fd(e);Pd("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Tw(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function sS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class aS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Rd("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class lS{constructor(e,t){this.Ka=e,this.serializer=t,this.metadata=new jd,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((e=>{e&&e.ra()?this.metadata.resolve(e.na.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.na))))}),(e=>this.metadata.reject(e)))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(null===e)return null;const t=this.$a.decode(e),n=Number(t);isNaN(n)&&this.Ga("length string (".concat(t,") is not valid number"));const r=await this.za(n);return new m_(JSON.parse(r),e.length+n)}ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(0===this.buffer.length)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const t=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ga(e){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ha(){const e=await this.Ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class cS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new zd(Ud.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Fd(e),r={documents:t.map((e=>Ey(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,rf.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ld(!!t.found),t.found.name,t.found.updateTime;const n=Cy(e,t.found.name),r=_y(t.found.updateTime),i=t.found.createTime?_y(t.found.createTime):tf.min(),o=new Zp({mapValue:{fields:t.found.fields}});return tm.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){Ld(!!t.missing),Ld(!!t.readTime);const n=Cy(e,t.missing),r=_y(t.readTime);return tm.newNoDocument(n,r)}(e,t):Md()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());Ld(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=af.fromPath(t);this.mutations.push(new Bg(n,this.precondition(n)))})),await async function(e,t){const n=Fd(e),r={writes:t.map((e=>Dy(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,rf.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Md();t=tf.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new zd(Ud.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(tf.min())?xg.exists(!1):xg.updateTime(t):xg.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(tf.min()))throw new zd(Ud.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xg.updateTime(t)}return xg.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uS{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Ja=n.maxAttempts,this.jo=new bw(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo((async()=>{const e=new cS(this.datastore),t=this.Xa(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.eu(e)}))))})).catch((e=>{this.eu(e)}))}))}Xa(e){try{const t=this.updateFunction(e);return!Df(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((()=>(this.Za(),Promise.resolve())))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Yg(t)}return!1}}class hS{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Td.UNAUTHENTICATED,this.clientId=$d.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Pd("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Pd("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zd(Ud.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=t_(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function dS(e,t){e.asyncQueue.verifyOperationInProgress(),Pd("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Vb(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function fS(e,t){e.asyncQueue.verifyOperationInProgress();const n=await mS(e);Pd("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>$w(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>$w(t.remoteStore,n))),e._onlineComponents=t}function pS(e){return"FirebaseError"===e.name?e.code===Ud.FAILED_PRECONDITION||e.code===Ud.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function mS(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Pd("FirestoreClient","Using user provided OfflineComponentProvider");try{await dS(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!pS(n))throw n;Dd("Error using user provided cache. Falling back to memory cache: "+n),await dS(e,new nS)}}else Pd("FirestoreClient","Using default OfflineComponentProvider"),await dS(e,new nS);return e._offlineComponents}async function gS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Pd("FirestoreClient","Using user provided OnlineComponentProvider"),await fS(e,e._uninitializedComponentsProvider._online)):(Pd("FirestoreClient","Using default OnlineComponentProvider"),await fS(e,new oS))),e._onlineComponents}function yS(e){return mS(e).then((e=>e.persistence))}function vS(e){return mS(e).then((e=>e.localStore))}function bS(e){return gS(e).then((e=>e.remoteStore))}function wS(e){return gS(e).then((e=>e.syncEngine))}function _S(e){return gS(e).then((e=>e.datastore))}async function SS(e){const t=await gS(e),n=t.eventManager;return n.onListen=E_.bind(null,t.syncEngine),n.onUnlisten=A_.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=C_.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=N_.bind(null,t.syncEngine),n}function IS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new jd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new aS({next:o=>{t.enqueueAndForget((()=>l_(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new zd(Ud.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new zd(Ud.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new p_(Lm(n.path),o,{includeMetadataChanges:!0,ta:!0});return a_(e,s)}(await SS(e),e.asyncQueue,t,n,r))),r.promise}function kS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new jd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new aS({next:n=>{t.enqueueAndForget((()=>l_(e,s))),n.fromCache&&"server"===r.source?i.reject(new zd(Ud.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new p_(n,o,{includeMetadataChanges:!0,ta:!0});return a_(e,s)}(await SS(e),e.asyncQueue,t,n,r))),r.promise}function ES(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Xg().encode(e):e,function(e,t){return new lS(e,t)}(function(e,t){if(e instanceof Uint8Array)return sS(e,t);if(e instanceof ArrayBuffer)return sS(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,vw(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Fd(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Fd(e),r=_y(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(v_(r));const i=new y_(r,e.localStore,t.serializer);let o=await t.Ba();for(;o;){const e=await i.sa(o);e&&n._updateProgress(e),o=await t.Ba()}const s=await i.complete();return await q_(e,s.aa,void 0),await function(e,t){const n=Fd(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s._a)}catch(e){return Dd("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await wS(e),i,r)}))}function CS(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const TS=new Map;function xS(e,t,n){if(!n)throw new zd(Ud.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function AS(e,t,n,r){if(!0===t&&!0===r)throw new zd(Ud.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function NS(e){if(!af.isDocumentKey(e))throw new zd(Ud.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function PS(e){if(af.isDocumentKey(e))throw new zd(Ud.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function RS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Md()}function DS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new zd(Ud.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=RS(e);throw new zd(Ud.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function OS(e,t){if(t<=0)throw new zd(Ud.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class MS{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new zd(Ud.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new zd(Ud.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CS(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new zd(Ud.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new zd(Ud.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new zd(Ud.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class LS{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new zd(Ud.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new zd(Ud.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Bd;switch(e.type){case"firstParty":return new Hd(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new zd(Ud.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=TS.get(e);t&&(Pd("ComponentProvider","Removing Datastore"),TS.delete(e),t.terminate())}(this),Promise.resolve()}}function FS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=DS(e,LS))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Dd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Td.MOCK_USER;else{t=Qe(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new zd(Ud.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Td(o)}e._authCredentials=new qd(new Vd(t,n))}}class US{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new US(this.firestore,e,this._query)}}class zS{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jS(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zS(this.firestore,e,this._key)}}class jS extends US{constructor(e,t,n){super(e,t,Lm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zS(this.firestore,null,new af(e))}withConverter(e){return new jS(this.firestore,e,this._path)}}function VS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=At(e),xS("collection","path",t),e instanceof LS){const n=rf.fromString(t,...r);return PS(n),new jS(e,null,n)}{if(!(e instanceof zS||e instanceof jS))throw new zd(Ud.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(rf.fromString(t,...r));return PS(n),new jS(e.firestore,null,n)}}function BS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=At(e),1===arguments.length&&(t=$d.newId()),xS("doc","path",t),e instanceof LS){const n=rf.fromString(t,...r);return NS(n),new zS(e,null,new af(n))}{if(!(e instanceof zS||e instanceof jS))throw new zd(Ud.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(rf.fromString(t,...r));return NS(n),new zS(e.firestore,e instanceof jS?e.converter:null,new af(n))}}function qS(e,t){return e=At(e),t=At(t),(e instanceof zS||e instanceof jS)&&(t instanceof zS||t instanceof jS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function WS(e,t){return e=At(e),t=At(t),e instanceof US&&t instanceof US&&e.firestore===t.firestore&&Wm(e._query,t._query)&&e.converter===t.converter}class KS{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new bw(this,"async_queue_retry"),this.cu=()=>{const e=yw();e&&Pd("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=yw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=yw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new jd;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(Dz){if(!Ef(Dz))throw Dz;Pd("AsyncQueue","Operation failed with retryable error: "+Dz)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Rd("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=e_.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&Md()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function HS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class GS{constructor(){this._progressObserver={},this._taskCompletionResolver=new jd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class QS extends LS{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new KS,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||$S(this),this._firestoreClient.terminate()}}function YS(e){return e._firestoreClient||$S(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function $S(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Np(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,CS(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new hS(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function JS(e,t,n){const r=new jd;return e.asyncQueue.enqueue((async()=>{try{await dS(e,n),await fS(e,t),r.resolve()}catch(e){const n=e;if(!pS(n))throw n;Dd("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function XS(e){return function(e){const t=new jd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Fd(e);Ow(n.remoteStore)||Pd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Fd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ma.get(e)||[];r.push(t),n.Ma.set(e,r)}catch(e){const n=t_(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await wS(e),t))),t.promise}(YS(e=DS(e,QS)))}function ZS(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await yS(e),n=await bS(e);return t.setNetworkEnabled(!0),function(e){const t=Fd(e);return t.v_.delete(0),Cw(t)}(n)}))}(YS(e=DS(e,QS)))}function eI(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await yS(e),n=await bS(e);return t.setNetworkEnabled(!1),async function(e){const t=Fd(e);t.v_.add(0),await Tw(t),t.x_.set("Offline")}(n)}))}(YS(e=DS(e,QS)))}function tI(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Fd(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await vS(e),t)))}(YS(e=DS(e,QS)),t).then((t=>t?new US(e,null,t.query):null))}function nI(e){if(e._initialized||e._terminated)throw new zd(Ud.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class rI{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rI(Sp.fromBase64String(e))}catch(e){throw new zd(Ud.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new rI(Sp.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class iI{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new zd(Ud.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sf(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class oI{constructor(e){this._methodName=e}}class sI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new zd(Ud.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new zd(Ud.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jd(this._lat,e._lat)||Jd(this._long,e._long)}}const aI=/^__.*__$/;class lI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Fg(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lg(e,this.data,t,this.fieldTransforms)}}class cI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Fg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Md()}}class hI{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new hI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}yu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return PI(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(uI(this.Vu)&&aI.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class dI{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||vw(e)}Cu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new hI({Vu:e,methodName:t,Du:n,path:sf.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fI(e){const t=e._freezeSettings(),n=vw(e._databaseId);return new dI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function pI(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Cu(o.merge||o.mergeFields?2:0,t,n,i);TI("Data must be an object, but it was:",s,r);const a=EI(r,s);let l,c;if(o.merge)l=new wp(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=xI(t,r,n);if(!s.contains(i))throw new zd(Ud.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));RI(e,i)||e.push(i)}l=new wp(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new lI(new Zp(a),l,c)}class mI extends oI{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mI}}function gI(e,t,n){return new hI({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class yI extends oI{_toFieldTransform(e){return new Cg(e.path,new vg)}isEqual(e){return e instanceof yI}}class vI extends oI{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=gI(this,e,!0),n=this.vu.map((e=>kI(e,t))),r=new bg(n);return new Cg(e.path,r)}isEqual(e){return e instanceof vI&&mt(this.vu,e.vu)}}class bI extends oI{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=gI(this,e,!0),n=this.vu.map((e=>kI(e,t))),r=new _g(n);return new Cg(e.path,r)}isEqual(e){return e instanceof bI&&mt(this.vu,e.vu)}}class wI extends oI{constructor(e,t){super(e),this.Fu=t}_toFieldTransform(e){const t=new Ig(e.serializer,fg(e.serializer,this.Fu));return new Cg(e.path,t)}isEqual(e){return e instanceof wI&&this.Fu===e.Fu}}function _I(e,t,n,r){const i=e.Cu(1,t,n);TI("Data must be an object, but it was:",i,r);const o=[],s=Zp.empty();dp(r,((e,r)=>{const a=NI(t,e,n);r=At(r);const l=i.yu(a);if(r instanceof mI)o.push(a);else{const e=kI(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new wp(o);return new cI(s,a,i.fieldTransforms)}function SI(e,t,n,r,i,o){const s=e.Cu(1,t,n),a=[xI(t,r,n)],l=[i];if(o.length%2!=0)throw new zd(Ud.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(xI(t,o[d])),l.push(o[d+1]);const c=[],u=Zp.empty();for(let d=a.length-1;d>=0;--d)if(!RI(c,a[d])){const e=a[d];let t=l[d];t=At(t);const n=s.yu(e);if(t instanceof mI)c.push(e);else{const r=kI(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new wp(c);return new cI(u,h,s.fieldTransforms)}function II(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return kI(n,e.Cu(r?4:3,t))}function kI(e,t){if(CI(e=At(e)))return TI("Unsupported field value:",t,e),EI(e,t);if(e instanceof oI)return function(e,t){if(!uI(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=kI(i,t.wu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=At(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fg(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ef.fromDate(e);return{timestampValue:vy(t.serializer,n)}}if(e instanceof ef){const n=new ef(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vy(t.serializer,n)}}if(e instanceof sI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof rI)return{bytesValue:by(t.serializer,e._byteString)};if(e instanceof zS){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Su("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Sy(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(RS(e)))}(e,t)}function EI(e,t){const n={};return fp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dp(e,((e,r)=>{const i=kI(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function CI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ef||e instanceof sI||e instanceof rI||e instanceof zS||e instanceof oI)}function TI(e,t,n){if(!CI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=RS(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function xI(e,t,n){if((t=At(t))instanceof iI)return t._internalPath;if("string"==typeof t)return NI(e,t);throw PI("Field path arguments must be of type string or ",e,!1,void 0,n)}const AI=new RegExp("[~\\*/\\[\\]]");function NI(e,t,n){if(t.search(AI)>=0)throw PI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new iI(...t.split("."))._internalPath}catch(wl){throw PI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function PI(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new zd(Ud.INVALID_ARGUMENT,a+e+l)}function RI(e,t){return e.some((e=>e.isEqual(t)))}class DI{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new zS(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new OI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(MI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class OI extends DI{data(){return super.data()}}function MI(e,t){return"string"==typeof t?NI(e,t):t instanceof iI?t._internalPath:t._delegate._internalPath}function LI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new zd(Ud.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class FI{}class UI extends FI{}function zI(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof FI&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof VI)).length,n=e.filter((e=>e instanceof jI)).length;if(t>1||t>0&&n>0)throw new zd(Ud.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class jI extends UI{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new jI(e,t,n)}_apply(e){const t=this._parse(e);return YI(e._query,t),new US(e.firestore,e.converter,Bm(e._query,t))}_parse(e){const t=fI(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new zd(Ud.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){QI(s,o);const t=[];for(const n of s)t.push(GI(r,e,n));a={arrayValue:{values:t}}}else a=GI(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||QI(s,o),a=II(n,t,s,"in"===o||"not-in"===o);return lm.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class VI extends FI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new VI(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:cm.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)YI(n,i),n=Bm(n,i)}(e._query,t),new US(e.firestore,e.converter,Bm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class BI extends UI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new BI(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new zd(Ud.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new zd(Ud.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new om(t,n)}(e._query,this._field,this._direction);return new US(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Om(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class qI extends UI{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new qI(e,t,n)}_apply(e){return new US(e.firestore,e.converter,qm(e._query,this._limit,this._limitType))}}class WI extends UI{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new WI(e,t,n)}_apply(e){const t=HI(e,this.type,this._docOrFields,this._inclusive);return new US(e.firestore,e.converter,function(e,t){return new Om(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class KI extends UI{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new KI(e,t,n)}_apply(e){const t=HI(e,this.type,this._docOrFields,this._inclusive);return new US(e.firestore,e.converter,function(e,t){return new Om(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function HI(e,t,n,r){if(n[0]=At(n[0]),n[0]instanceof DI)return function(e,t,n,r,i){if(!r)throw new zd(Ud.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of zm(e))if(s.field.isKeyField())o.push(Vp(t,r.key));else{const e=r.data.field(s.field);if(Tp(e))throw new zd(Ud.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new zd(Ud.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new nm(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=fI(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new zd(Ud.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const o=i[l];if(s[l].field.isKeyField()){if("string"!=typeof o)throw new zd(Ud.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!Um(e)&&-1!==o.indexOf("/"))throw new zd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(rf.fromString(o));if(!af.isDocumentKey(n))throw new zd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new af(n);a.push(Vp(t,i))}else{const e=II(n,r,o);a.push(e)}}return new nm(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function GI(e,t,n){if("string"==typeof(n=At(n))){if(""===n)throw new zd(Ud.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Um(t)&&-1!==n.indexOf("/"))throw new zd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(rf.fromString(n));if(!af.isDocumentKey(r))throw new zd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Vp(e,new af(r))}if(n instanceof zS)return Vp(e,n._key);throw new zd(Ud.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(RS(n),"."))}function QI(e,t){if(!Array.isArray(e)||0===e.length)throw new zd(Ud.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function YI(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new zd(Ud.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new zd(Ud.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class $I{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Op(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ep(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Md()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return dp(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new sI(Ep(e.latitude),Ep(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=xp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ap(e));default:return null}}convertTimestamp(e){const t=kp(e);return new ef(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=rf.fromString(e);Ld(Hy(n));const r=new Pp(n.get(1),n.get(3)),i=new af(n.popFirst(5));return r.isEqual(t)||Rd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function JI(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class XI extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new rI(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zS(this.firestore,null,t)}}class ZI{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ek extends DI{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new tk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(MI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class tk extends ek{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class nk{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ZI(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new tk(this._firestore,this._userDataWriter,n.key,n,new ZI(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zd(Ud.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new tk(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ZI(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new tk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ZI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:rk(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function rk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Md()}}function ik(e,t){return e instanceof ek&&t instanceof ek?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof nk&&t instanceof nk&&e._firestore===t._firestore&&WS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class ok extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new rI(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zS(this.firestore,null,t)}}function sk(e){e=DS(e,zS);const t=DS(e.firestore,QS),n=YS(t),r=new ok(t);return function(e,t){const n=new jd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Fd(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new zd(Ud.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=t_(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await vS(e),t,n))),n.promise}(n,e._key).then((n=>new ek(t,r,e._key,n,new ZI(null!==n&&n.hasLocalMutations,!0),e.converter)))}function ak(e){e=DS(e,US);const t=DS(e.firestore,QS),n=YS(t),r=new ok(t);return function(e,t){const n=new jd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Gb(e,t,!0),i=new __(t,r.hs),o=i.Ta(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=t_(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await vS(e),t,n))),n.promise}(n,e._query).then((n=>new nk(t,r,e,n)))}function lk(e,t,n){e=DS(e,zS);const r=DS(e.firestore,QS),i=JI(e.converter,t,n);return dk(r,[pI(fI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xg.none())])}function ck(e,t,n){e=DS(e,zS);const r=DS(e.firestore,QS),i=fI(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=At(t))||t instanceof iI?SI(i,"updateDoc",e._key,t,n,a):_I(i,"updateDoc",e._key,t),dk(r,[o.toMutation(e._key,xg.exists(!0))])}function uk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=At(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||HS(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(HS(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,h,d;if(e instanceof zS)h=DS(e.firestore,QS),d=Lm(e._key.path),u={next:t=>{n[l]&&n[l](fk(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=DS(e,US);h=DS(t.firestore,QS),d=t._query;const r=new ok(h);u={next:e=>{n[l]&&n[l](new nk(h,r,t,e))},error:n[l+1],complete:n[l+2]},LI(e._query)}return function(e,t,n,r){const i=new aS(r),o=new p_(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>a_(await SS(e),o))),()=>{i.Qa(),e.asyncQueue.enqueueAndForget((async()=>l_(await SS(e),o)))}}(YS(h),d,c,u)}function hk(e,t){return function(e,t){const n=new aS(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Fd(e).W_.add(t),t.next()}(await SS(e),n))),()=>{n.Qa(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Fd(e).W_.delete(t)}(await SS(e),n)))}}(YS(e=DS(e,QS)),HS(t)?t:{next:t})}function dk(e,t){return function(e,t){const n=new jd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=tS(e);try{const e=await function(e,t){const n=Fd(e),r=ef.now(),i=t.reduce(((e,t)=>e.add(t.key)),lg());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Zm(),l=lg();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Og(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Fg(e.key,t,em(t.value.mapValue),xg.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:ng(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Fa[e.currentUser.toKey()];r||(r=new pp(Jd)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(r,e.batchId,n),await q_(r,e.changes),await Vw(r.remoteStore)}catch(e){const t=t_(e,"Failed to persist write");n.reject(t)}}(await wS(e),t,n))),n.promise}(YS(e),t)}function fk(e,t,n){const r=n.docs.get(t._key),i=new ok(e);return new ek(e,i,t._key,r,new ZI(n.hasPendingWrites,n.fromCache),t.converter)}const pk={maxAttempts:5};class mk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fI(e)}set(e,t,n){this._verifyNotCommitted();const r=gk(e,this._firestore),i=JI(r.converter,t,n),o=pI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,xg.none())),this}update(e,t,n){this._verifyNotCommitted();const r=gk(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=At(t))||t instanceof iI?SI(this._dataReader,"WriteBatch.update",r._key,t,n,s):_I(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,xg.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gk(e,this._firestore);return this._mutations=this._mutations.concat(new Vg(t._key,xg.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new zd(Ud.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gk(e,t){if((e=At(e)).firestore!==t)throw new zd(Ud.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class yk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fI(e)}get(e){const t=gk(e,this._firestore),n=new XI(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Md();const r=e[0];if(r.isFoundDocument())return new DI(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new DI(this._firestore,n,t._key,null,t.converter);throw Md()}))}set(e,t,n){const r=gk(e,this._firestore),i=JI(r.converter,t,n),o=pI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=gk(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=At(t))||t instanceof iI?SI(this._dataReader,"Transaction.update",r._key,t,n,s):_I(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=gk(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gk(e,this._firestore),n=new ok(this._firestore);return super.get(e).then((e=>new ek(this._firestore,n,t._key,e._document,new ZI(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){xd=e}(Cn),yn(new Nt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new QS(new Wd(e.getProvider("auth-internal")),new Qd(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new zd(Ud.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pp(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Rn(Cd,"4.5.1",e),Rn(Cd,"4.5.1","esm2017")}();function vk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new zd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function bk(){if("undefined"===typeof Uint8Array)throw new zd("unimplemented","Uint8Arrays are not available in this environment.")}function wk(){if("undefined"==typeof atob)throw new zd("unimplemented","Blobs are unavailable in Firestore in this environment.")}class _k{constructor(e){this._delegate=e}static fromBase64String(e){return wk(),new _k(rI.fromBase64String(e))}static fromUint8Array(e){return bk(),new _k(rI.fromUint8Array(e))}toBase64(){return wk(),this._delegate.toBase64()}toUint8Array(){return bk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Sk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Ik{enableIndexedDbPersistence(e,t){return function(e,t){nI(e=DS(e,QS));const n=YS(e);if(n._uninitializedComponentsProvider)throw new zd(Ud.FAILED_PRECONDITION,"SDK cache is already specified.");Dd("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new oS;return JS(n,i,new rS(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){nI(e=DS(e,QS));const t=YS(e);if(t._uninitializedComponentsProvider)throw new zd(Ud.FAILED_PRECONDITION,"SDK cache is already specified.");Dd("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new oS;return JS(t,r,new iS(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new zd(Ud.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new jd;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Sf.D())return Promise.resolve();const t=e+"main";await Sf.delete(t)}(Mb(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class kk{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Dd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};FS(this._delegate,e,t,n)}enableNetwork(){return ZS(this._delegate)}disableNetwork(){return eI(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,AS("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return XS(this._delegate)}onSnapshotsInSync(e){return hk(this._delegate,e)}get app(){if(!this._appCompat)throw new zd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Uk(this,VS(this._delegate,e))}catch(Dz){throw Nk(Dz,"collection()","Firestore.collection()")}}doc(e){try{return new Ak(this,BS(this._delegate,e))}catch(Dz){throw Nk(Dz,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Mk(this,function(e,t){if(e=DS(e,LS),xS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new zd(Ud.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new US(e,null,function(e){return new Om(rf.emptyPath(),e)}(t))}(this._delegate,e))}catch(Dz){throw Nk(Dz,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=DS(e,QS);const r=Object.assign(Object.assign({},pk),n);return function(e){if(e.maxAttempts<1)throw new zd(Ud.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new jd;return e.asyncQueue.enqueueAndForget((async()=>{const i=await _S(e);new uS(e.asyncQueue,i,n,t,r).Ya()})),r.promise}(YS(e),(n=>t(new yk(e,n))),r)}(this._delegate,(t=>e(new Ck(this,t))))}batch(){return YS(this._delegate),new Tk(new mk(this._delegate,(e=>dk(this._delegate,e))))}loadBundle(e){return function(e,t){const n=YS(e=DS(e,QS)),r=new GS;return ES(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return tI(this._delegate,e).then((e=>e?new Mk(this,e):null))}}class Ek extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new _k(new rI(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ak.forKey(t,this.firestore,null)}}class Ck{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ek(e)}get(e){const t=zk(e);return this._delegate.get(t).then((e=>new Dk(this._firestore,new ek(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=zk(e);return n?(vk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=zk(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=zk(e);return this._delegate.delete(t),this}}class Tk{constructor(e){this._delegate=e}set(e,t,n){const r=zk(e);return n?(vk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=zk(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=zk(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xk{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new tk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ok(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=xk.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new xk(e,new Ek(e),t),r.set(t,i)),i}}xk.INSTANCES=new WeakMap;class Ak{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ek(e)}static forPath(e,t,n){if(e.length%2!==0)throw new zd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Ak(t,new zS(t._delegate,n,new af(e)))}static forKey(e,t,n){return new Ak(t,new zS(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Uk(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Uk(this.firestore,VS(this._delegate,e))}catch(Dz){throw Nk(Dz,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=At(e))instanceof zS&&qS(this._delegate,e)}set(e,t){t=vk("DocumentReference.set",t);try{return t?lk(this._delegate,e,t):lk(this._delegate,e)}catch(Dz){throw Nk(Dz,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ck(this._delegate,e):ck(this._delegate,e,t,...r)}catch(Dz){throw Nk(Dz,"updateDoc()","DocumentReference.update()")}}delete(){return dk(DS((e=this._delegate).firestore,QS),[new Vg(e._key,xg.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Pk(t),i=Rk(t,(e=>new Dk(this.firestore,new ek(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return uk(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?sk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=DS(e,zS);const t=DS(e.firestore,QS);return IS(YS(t),e._key,{source:"server"}).then((n=>fk(t,e,n)))}(this._delegate):function(e){e=DS(e,zS);const t=DS(e.firestore,QS);return IS(YS(t),e._key).then((n=>fk(t,e,n)))}(this._delegate),t.then((e=>new Dk(this.firestore,new ek(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Ak(this.firestore,e?this._delegate.withConverter(xk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Nk(e,t,n){return e.message=e.message.replace(t,n),e}function Pk(e){for(const t of e)if("object"===typeof t&&!Sk(t))return t;return{}}function Rk(e,t){var n,r;let i;return i=Sk(e[0])?e[0]:Sk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Dk{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ak(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ik(this._delegate,e._delegate)}}class Ok extends Dk{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Md(),t}}class Mk{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ek(e)}where(e,t,n){try{return new Mk(this.firestore,zI(this._delegate,function(e,t,n){const r=t,i=MI("where",e);return jI._create(i,r,n)}(e,t,n)))}catch(Dz){throw Nk(Dz,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Mk(this.firestore,zI(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=MI("orderBy",e);return BI._create(n,t)}(e,t)))}catch(Dz){throw Nk(Dz,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Mk(this.firestore,zI(this._delegate,(OS("limit",t=e),qI._create("limit",t,"F"))))}catch(t){throw Nk(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Mk(this.firestore,zI(this._delegate,(OS("limitToLast",t=e),qI._create("limitToLast",t,"L"))))}catch(t){throw Nk(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Mk(this.firestore,zI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WI._create("startAt",t,!0)}(...arguments)))}catch(Dz){throw Nk(Dz,"startAt()","Query.startAt()")}}startAfter(){try{return new Mk(this.firestore,zI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WI._create("startAfter",t,!1)}(...arguments)))}catch(Dz){throw Nk(Dz,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Mk(this.firestore,zI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return KI._create("endBefore",t,!1)}(...arguments)))}catch(Dz){throw Nk(Dz,"endBefore()","Query.endBefore()")}}endAt(){try{return new Mk(this.firestore,zI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return KI._create("endAt",t,!0)}(...arguments)))}catch(Dz){throw Nk(Dz,"endAt()","Query.endAt()")}}isEqual(e){return WS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ak(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=DS(e,US);const t=DS(e.firestore,QS),n=YS(t),r=new ok(t);return kS(n,e._query,{source:"server"}).then((n=>new nk(t,r,e,n)))}(this._delegate):function(e){e=DS(e,US);const t=DS(e.firestore,QS),n=YS(t),r=new ok(t);return LI(e._query),kS(n,e._query).then((n=>new nk(t,r,e,n)))}(this._delegate),t.then((e=>new Fk(this.firestore,new nk(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Pk(t),i=Rk(t,(e=>new Fk(this.firestore,new nk(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return uk(this._delegate,r,i)}withConverter(e){return new Mk(this.firestore,e?this._delegate.withConverter(xk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Lk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ok(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Fk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Mk(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Ok(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Lk(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Ok(this._firestore,n))}))}isEqual(e){return ik(this._delegate,e._delegate)}}class Uk extends Mk{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ak(this.firestore,e):null}doc(e){try{return new Ak(this.firestore,void 0===e?BS(this._delegate):BS(this._delegate,e))}catch(Dz){throw Nk(Dz,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=DS(e.firestore,QS),r=BS(e),i=JI(e.converter,t);return dk(n,[pI(fI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,xg.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Ak(this.firestore,e)))}isEqual(e){return qS(this._delegate,e._delegate)}withConverter(e){return new Uk(this.firestore,e?this._delegate.withConverter(xk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function zk(e){return DS(e,zS)}class jk{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new iI(...t)}static documentId(){return new jk(sf.keyField().canonicalString())}isEqual(e){return(e=At(e))instanceof iI&&this._delegate._internalPath.isEqual(e._internalPath)}}class Vk{constructor(e){this._delegate=e}static serverTimestamp(){const e=new yI("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Vk(e)}static delete(){const e=new mI("deleteField");return e._methodName="FieldValue.delete",new Vk(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vI("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Vk(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bI("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Vk(e)}static increment(e){const t=new wI("increment",e);return t._methodName="FieldValue.increment",new Vk(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Bk={Firestore:kk,GeoPoint:sI,Timestamp:ef,Blob:_k,Transaction:Ck,WriteBatch:Tk,DocumentReference:Ak,DocumentSnapshot:Dk,Query:Mk,QueryDocumentSnapshot:Ok,QuerySnapshot:Fk,CollectionReference:Uk,FieldPath:jk,FieldValue:Vk,setLogLevel:function(e){var t;t=e,Ad.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Nt("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Bk)))}(e,((e,t)=>new kk(e,t,new Ik))),e.registerVersion("@firebase/firestore-compat","0.3.28")}(Jn);var qk=function(){return qk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},qk.apply(this,arguments)},Wk=function(e){return{loading:void 0===e||null===e,value:e}},Kk=function(e){var t=e?e():void 0,n=(0,r.useReducer)((function(e,t){switch(t.type){case"error":return qk(qk({},e),{error:t.error,loading:!1,value:void 0});case"reset":return Wk(t.defaultValue);case"value":return qk(qk({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),Wk(t)),i=n[0],o=n[1],s=(0,r.useCallback)((function(){var t=e?e():void 0;o({type:"reset",defaultValue:t})}),[e]),a=(0,r.useCallback)((function(e){o({type:"error",error:e})}),[]),l=(0,r.useCallback)((function(e){o({type:"value",value:e})}),[]);return(0,r.useMemo)((function(){return{error:i.error,loading:i.loading,reset:s,setError:a,setValue:l,value:i.value}}),[i.error,i.loading,s,a,l,i.value])},Hk=function(e,t,n){var i=(0,r.useRef)(e);return(0,r.useEffect)((function(){t(e,i.current)||(i.current=e,n&&n())})),i},Gk=function(e,t){var n=!e&&!t,r=!!e&&!!t&&WS(e,t);return n||r},Qk=function(e,t){return Hk(e,Gk,t)},Yk=function(e,t){var n=function(e,t){var n=Kk(),i=n.error,o=n.loading,s=n.reset,a=n.setError,l=n.setValue,c=n.value,u=Qk(e,s);return(0,r.useEffect)((function(){if(u.current){var e=(null===t||void 0===t?void 0:t.snapshotListenOptions)?uk(u.current,t.snapshotListenOptions,l,a):uk(u.current,l,a);return function(){e()}}l(void 0)}),[u.current]),[c,o,i]}(e,t),i=n[0],o=n[1],s=n[2];return[$k(i,null===t||void 0===t?void 0:t.snapshotOptions,null===t||void 0===t?void 0:t.initialValue),o,s,i]},$k=function(e,t,n){return(0,r.useMemo)((function(){var r;return null!==(r=null===e||void 0===e?void 0:e.docs.map((function(e){return e.data(t)})))&&void 0!==r?r:n}),[e,t])},Jk=n(579);Jn.initializeApp({apiKey:"AIzaSyAt2UffPiHXDh5wlpgUVUB5KBz7c_7AC-4",authDomain:"perfectchat-89ccb.firebaseapp.com",projectId:"perfectchat-89ccb",storageBucket:"perfectchat-89ccb.appspot.com",messagingSenderId:"310569895534",appId:"1:310569895534:web:4c89a85dc882f15ae3487f"});const Xk=Jn.auth(),Zk=Jn.firestore(),eE=(0,r.createContext)(),tE=()=>(0,r.useContext)(eE),nE=e=>{let{children:t}=e;const[n]=Yk(Zk.collection("users").orderBy("uid"));return(0,Jk.jsx)(eE.Provider,{value:{firebase:Jn,auth:Xk,firestore:Zk},children:t})};function rE(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(Dz){o(Dz)}}function a(e){try{l(r.throw(e))}catch(Dz){o(Dz)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function iE(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(Dz){o=[6,Dz],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var oE=function(){return oE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oE.apply(this,arguments)},sE=function(e){return{loading:void 0===e||null===e,value:e}},aE=function(e){var t=e?e():void 0,n=(0,r.useReducer)((function(e,t){switch(t.type){case"error":return oE(oE({},e),{error:t.error,loading:!1,value:void 0});case"reset":return sE(t.defaultValue);case"value":return oE(oE({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),sE(t)),i=n[0],o=n[1],s=(0,r.useCallback)((function(){var t=e?e():void 0;o({type:"reset",defaultValue:t})}),[e]),a=(0,r.useCallback)((function(e){o({type:"error",error:e})}),[]),l=(0,r.useCallback)((function(e){o({type:"value",value:e})}),[]);return(0,r.useMemo)((function(){return{error:i.error,loading:i.loading,reset:s,setError:a,setValue:l,value:i.value}}),[i.error,i.loading,s,a,l,i.value])},lE=function(e,t){var n=aE((function(){return e.currentUser})),i=n.error,o=n.loading,s=n.setError,a=n.setValue,l=n.value;return(0,r.useEffect)((function(){var n=function(e,t,n,r){return At(e).onAuthStateChanged(t,n,r)}(e,(function(e){return rE(void 0,void 0,void 0,(function(){var n;return iE(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),s(n),[3,4];case 4:return a(e),[2]}}))}))}),s);return function(){n()}}),[e]),[l,o,i]},cE=n(8587),uE=n(8168);function hE(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=hE(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const dE=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=hE(e))&&(r&&(r+=" "),r+=t);return r};function fE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}var pE=n(8052),mE=n(6632),gE=n(3216),yE=n(7758),vE=n(8812),bE=n(8280);function wE(e,t){return(0,uE.A)({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var _E=n(7266);const SE={black:"#000",white:"#fff"},IE={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},kE={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},EE={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},CE={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},TE={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},xE={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},AE={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},NE=["mode","contrastThreshold","tonalOffset"],PE={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:SE.white,default:SE.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},RE={text:{primary:SE.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:SE.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function DE(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,_E.a)(e.main,i):"dark"===t&&(e.dark=(0,_E.e$)(e.main,o)))}function OE(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=(0,cE.A)(e,NE),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:TE[200],light:TE[50],dark:TE[400]}:{main:TE[700],light:TE[400],dark:TE[800]}}(t),s=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:kE[200],light:kE[50],dark:kE[400]}:{main:kE[500],light:kE[300],dark:kE[700]}}(t),a=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:EE[500],light:EE[300],dark:EE[700]}:{main:EE[700],light:EE[400],dark:EE[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:xE[400],light:xE[300],dark:xE[700]}:{main:xE[700],light:xE[500],dark:xE[900]}}(t),c=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:AE[400],light:AE[300],dark:AE[700]}:{main:AE[800],light:AE[500],dark:AE[900]}}(t),u=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:CE[400],light:CE[300],dark:CE[700]}:{main:"#ed6c02",light:CE[500],dark:CE[900]}}(t);function h(e){return(0,_E.eM)(e,RE.text.primary)>=n?RE.text.primary:PE.text.primary}const d=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:s=700}=e;if(t=(0,uE.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,mE.A)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,mE.A)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return DE(t,"light",o,r),DE(t,"dark",s,r),t.contrastText||(t.contrastText=h(t.main)),t},f={dark:RE,light:PE};return(0,gE.A)((0,uE.A)({common:(0,uE.A)({},SE),mode:t,primary:d({color:o,name:"primary"}),secondary:d({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:a,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:IE,contrastThreshold:n,getContrastText:h,augmentColor:d,tonalOffset:r},f[t]),i)}const ME=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const LE={textTransform:"uppercase"},FE='"Roboto", "Helvetica", "Arial", sans-serif';function UE(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=FE,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:h}=n,d=(0,cE.A)(n,ME);const f=i/14,p=h||(e=>"".concat(e/c*f,"rem")),m=(e,t,n,i,o)=>{return(0,uE.A)({fontFamily:r,fontWeight:e,fontSize:p(t),lineHeight:n},r===FE?{letterSpacing:"".concat((s=i/t,Math.round(1e5*s)/1e5),"em")}:{},o,u);var s},g={h1:m(o,96,1.167,-1.5),h2:m(o,60,1.2,-.5),h3:m(s,48,1.167,0),h4:m(s,34,1.235,.25),h5:m(s,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(s,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(s,16,1.5,.15),body2:m(s,14,1.43,.15),button:m(a,14,1.75,.4,LE),caption:m(s,12,1.66,.4),overline:m(s,12,2.66,1,LE),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,gE.A)((0,uE.A)({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:l},g),d,{clone:!1})}function zE(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const jE=["none",zE(0,2,1,-1,0,1,1,0,0,1,3,0),zE(0,3,1,-2,0,2,2,0,0,1,5,0),zE(0,3,3,-2,0,3,4,0,0,1,8,0),zE(0,2,4,-1,0,4,5,0,0,1,10,0),zE(0,3,5,-1,0,5,8,0,0,1,14,0),zE(0,3,5,-1,0,6,10,0,0,1,18,0),zE(0,4,5,-2,0,7,10,1,0,2,16,1),zE(0,5,5,-3,0,8,10,1,0,3,14,2),zE(0,5,6,-3,0,9,12,1,0,3,16,2),zE(0,6,6,-3,0,10,14,1,0,4,18,3),zE(0,6,7,-4,0,11,15,1,0,4,20,3),zE(0,7,8,-4,0,12,17,2,0,5,22,4),zE(0,7,8,-4,0,13,19,2,0,5,24,4),zE(0,7,9,-4,0,14,21,2,0,5,26,4),zE(0,8,9,-5,0,15,22,2,0,6,28,5),zE(0,8,10,-5,0,16,24,2,0,6,30,5),zE(0,8,11,-5,0,17,26,2,0,6,32,5),zE(0,9,11,-5,0,18,28,2,0,7,34,6),zE(0,9,12,-6,0,19,29,2,0,7,36,6),zE(0,10,13,-6,0,20,31,3,0,8,38,7),zE(0,10,13,-6,0,21,33,3,0,8,40,7),zE(0,10,14,-6,0,22,35,3,0,8,42,7),zE(0,11,14,-7,0,23,36,3,0,9,44,8),zE(0,11,15,-7,0,24,38,3,0,9,46,8)],VE=["duration","easing","delay"],BE={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},qE={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function WE(e){return"".concat(Math.round(e),"ms")}function KE(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function HE(e){const t=(0,uE.A)({},BE,e.easing),n=(0,uE.A)({},qE,e.duration);return(0,uE.A)({getAutoHeightDuration:KE,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:o=t.easeInOut,delay:s=0}=r;(0,cE.A)(r,VE);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof i?i:WE(i)," ").concat(o," ").concat("string"===typeof s?s:WE(s)))).join(",")}},e,{easing:t,duration:n})}const GE={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},QE=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function YE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:r={},typography:i={}}=e,o=(0,cE.A)(e,QE);if(e.vars)throw new Error((0,mE.A)(18));const s=OE(n),a=(0,bE.A)(e);let l=(0,gE.A)(a,{mixins:wE(a.breakpoints,t),palette:s,shadows:jE.slice(),typography:UE(s,i),transitions:HE(r),zIndex:(0,uE.A)({},GE)});l=(0,gE.A)(l,o);for(var c=arguments.length,u=new Array(c>1?c-1:0),h=1;h<c;h++)u[h-1]=arguments[h];return l=u.reduce(((e,t)=>(0,gE.A)(e,t)),l),l.unstable_sxConfig=(0,uE.A)({},yE.A,null==o?void 0:o.unstable_sxConfig),l.unstable_sx=function(e){return(0,vE.A)({sx:e,theme:this})},l}const $E=YE,JE=$E(),XE="$$material",ZE=e=>(0,pE.MC)(e)&&"classes"!==e,eC=pE.MC,tC=(0,pE.Ay)({themeId:XE,defaultTheme:JE,rootShouldForwardProp:ZE});function nC(e,t){const n=(0,uE.A)({},t);return Object.keys(e).forEach((r=>{if(r.toString().match(/^(components|slots)$/))n[r]=(0,uE.A)({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},o=t[r];n[r]={},o&&Object.keys(o)?i&&Object.keys(i)?(n[r]=(0,uE.A)({},o),Object.keys(i).forEach((e=>{n[r][e]=nC(i[e],o[e])}))):n[r]=o:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}var rC=n(5756);const iC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(rC.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},oC=(0,bE.A)();const sC=function(){return iC(arguments.length>0&&void 0!==arguments[0]?arguments[0]:oC)};function aC(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,o=sC(r);i&&(o=o[i]||o);const s=function(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?nC(t.components[n].defaultProps,r):r}({theme:o,name:n,props:t});return s}function lC(e){let{props:t,name:n}=e;return aC({props:t,name:n,defaultTheme:JE,themeId:XE})}var cC=n(410);const uC=cC.A,hC=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)},dC=e=>e,fC=(()=>{let e=dC;return{configure(t){e=t},generate:t=>e(t),reset(){e=dC}}})(),pC={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function mC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=pC[t];return r?"".concat(n,"-").concat(r):"".concat(fC.generate(e),"-").concat(t)}function gC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=mC(e,t,n)})),r}function yC(e){return mC("MuiPaper",e)}gC("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const vC=["className","component","elevation","square","variant"],bC=tC("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((e=>{let{theme:t,ownerState:n}=e;var r;return(0,uE.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.divider)},"elevation"===n.variant&&(0,uE.A)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,_E.X4)("#fff",hC(n.elevation)),", ").concat((0,_E.X4)("#fff",hC(n.elevation)),")")},t.vars&&{backgroundImage:null==(r=t.vars.overlays)?void 0:r[n.elevation]}))})),wC=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiPaper"}),{className:r,component:i="div",elevation:o=1,square:s=!1,variant:a="elevation"}=n,l=(0,cE.A)(n,vC),c=(0,uE.A)({},n,{component:i,elevation:o,square:s,variant:a}),u=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e;return fE({root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]},yC,i)})(c);return(0,Jk.jsx)(bC,(0,uE.A)({as:i,ownerState:c,className:dE(u.root,r),ref:t},l))})),_C=wC;function SC(e){return mC("MuiAppBar",e)}gC("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const IC=["className","color","enableColorOnDark","position"],kC=(e,t)=>e?"".concat(null==e?void 0:e.replace(")",""),", ").concat(t,")"):t,EC=tC(_C,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["position".concat(uC(n.position))],t["color".concat(uC(n.color))]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,uE.A)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!t.vars&&(0,uE.A)({},"default"===n.color&&{backgroundColor:r,color:t.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,uE.A)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"})),t.vars&&(0,uE.A)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette.AppBar.defaultBg:kC(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?t.vars.palette.text.primary:kC(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette[n.color].main:kC(t.vars.palette.AppBar.darkBg,t.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?t.vars.palette[n.color].contrastText:kC(t.vars.palette.AppBar.darkColor,t.vars.palette[n.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),CC=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiAppBar"}),{className:r,color:i="primary",enableColorOnDark:o=!1,position:s="fixed"}=n,a=(0,cE.A)(n,IC),l=(0,uE.A)({},n,{color:i,position:s,enableColorOnDark:o}),c=(e=>{const{color:t,position:n,classes:r}=e;return fE({root:["root","color".concat(uC(t)),"position".concat(uC(n))]},SC,r)})(l);return(0,Jk.jsx)(EC,(0,uE.A)({square:!0,component:"header",ownerState:l,elevation:4,className:dE(c.root,r,"fixed"===s&&"mui-fixed"),ref:t},a))})),TC=CC;function xC(e){return mC("MuiToolbar",e)}gC("MuiToolbar",["root","gutters","regular","dense"]);const AC=["className","component","disableGutters","variant"],NC=tC("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,uE.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},"dense"===n.variant&&{minHeight:48})}),(e=>{let{theme:t,ownerState:n}=e;return"regular"===n.variant&&t.mixins.toolbar})),PC=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiToolbar"}),{className:r,component:i="div",disableGutters:o=!1,variant:s="regular"}=n,a=(0,cE.A)(n,AC),l=(0,uE.A)({},n,{component:i,disableGutters:o,variant:s}),c=(e=>{const{classes:t,disableGutters:n,variant:r}=e;return fE({root:["root",!n&&"gutters",r]},xC,t)})(l);return(0,Jk.jsx)(NC,(0,uE.A)({as:i,className:dE(c.root,r),ref:t,ownerState:l},a))})),RC=PC;var DC=n(9751),OC=n(8698);function MC(){const e=sC(JE);return e[XE]||e}const LC=r.createContext();function FC(e){return mC("MuiGrid",e)}const UC=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],zC=gC("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>"spacing-xs-".concat(e))),...["column-reverse","column","row-reverse","row"].map((e=>"direction-xs-".concat(e))),...["nowrap","wrap-reverse","wrap"].map((e=>"wrap-xs-".concat(e))),...UC.map((e=>"grid-xs-".concat(e))),...UC.map((e=>"grid-sm-".concat(e))),...UC.map((e=>"grid-md-".concat(e))),...UC.map((e=>"grid-lg-".concat(e))),...UC.map((e=>"grid-xl-".concat(e)))]),jC=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function VC(e){const t=parseFloat(e);return"".concat(t).concat(String(e).replace(String(t),"")||"px")}function BC(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const i=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return i.slice(0,i.indexOf(r))}const qC=tC("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:o,spacing:s,wrap:a,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n["spacing-xs-".concat(String(e))]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n["spacing-".concat(t,"-").concat(String(i))])})),r}(s,c,t));const h=[];return c.forEach((e=>{const r=n[e];r&&h.push(t["grid-".concat(e,"-").concat(String(r))])})),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth,...u,"row"!==i&&t["direction-xs-".concat(String(i))],"wrap"!==a&&t["wrap-xs-".concat(String(a))],...h]}})((e=>{let{ownerState:t}=e;return(0,uE.A)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:n}=e;const r=(0,DC.kW)({values:n.direction,breakpoints:t.breakpoints.values});return(0,DC.NI)({theme:t},r,(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t["& > .".concat(zC.item)]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,DC.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=BC({breakpoints:t.breakpoints.values,values:e})),o=(0,DC.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{marginTop:"-".concat(VC(o)),["& > .".concat(zC.item)]:{paddingTop:VC(o)}}:null!=(i=n)&&i.includes(r)?{}:{marginTop:0,["& > .".concat(zC.item)]:{paddingTop:0}}}))}return o}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,DC.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=BC({breakpoints:t.breakpoints.values,values:e})),o=(0,DC.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{width:"calc(100% + ".concat(VC(o),")"),marginLeft:"-".concat(VC(o)),["& > .".concat(zC.item)]:{paddingLeft:VC(o)}}:null!=(i=n)&&i.includes(r)?{}:{width:"100%",marginLeft:0,["& > .".concat(zC.item)]:{paddingLeft:0}}}))}return o}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,i)=>{let o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=(0,DC.kW)({values:r.columns,breakpoints:n.breakpoints.values}),a="object"===typeof s?s[i]:s;if(void 0===a||null===a)return e;const l="".concat(Math.round(t/a*1e8)/1e6,"%");let c={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t="calc(".concat(l," + ").concat(VC(e),")");c={flexBasis:t,maxWidth:t}}}o=(0,uE.A)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));const WC=e=>{const{classes:t,container:n,direction:r,item:i,spacing:o,wrap:s,zeroMinWidth:a,breakpoints:l}=e;let c=[];n&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e="spacing-".concat(t,"-").concat(String(r));n.push(e)}})),n}(o,l));const u=[];l.forEach((t=>{const n=e[t];n&&u.push("grid-".concat(t,"-").concat(String(n)))}));return fE({root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...c,"row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==s&&"wrap-xs-".concat(String(s)),...u]},FC,t)},KC=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiGrid"}),{breakpoints:i}=MC(),o=(0,OC.A)(n),{className:s,columns:a,columnSpacing:l,component:c="div",container:u=!1,direction:h="row",item:d=!1,rowSpacing:f,spacing:p=0,wrap:m="wrap",zeroMinWidth:g=!1}=o,y=(0,cE.A)(o,jC),v=f||p,b=l||p,w=r.useContext(LC),_=u?a||12:w,S={},I=(0,uE.A)({},y);i.keys.forEach((e=>{null!=y[e]&&(S[e]=y[e],delete I[e])}));const k=(0,uE.A)({},o,{columns:_,container:u,direction:h,item:d,rowSpacing:v,columnSpacing:b,wrap:m,zeroMinWidth:g,spacing:p},S,{breakpoints:i.keys}),E=WC(k);return(0,Jk.jsx)(LC.Provider,{value:_,children:(0,Jk.jsx)(qC,(0,uE.A)({ownerState:k,className:dE(E.root,s),as:c,ref:t},I))})}));const HC=KC;function GC(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function QC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{GC(t,e)}))}),t)}const YC=QC,$C="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;const JC=function(e){const t=r.useRef(e);return $C((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current},XC=JC,ZC={};const eT=[];class tT{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new tT}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function nT(){const e=function(e,t){const n=r.useRef(ZC);return n.current===ZC&&(n.current=e(t)),n}(tT.create).current;var t;return t=e.disposeEffect,r.useEffect(t,eT),e}let rT=!0,iT=!1;const oT=new tT,sT={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function aT(e){e.metaKey||e.altKey||e.ctrlKey||(rT=!0)}function lT(){rT=!1}function cT(){"hidden"===this.visibilityState&&iT&&(rT=!0)}function uT(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(Qx){}return rT||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!sT[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const hT=function(){const e=r.useCallback((e=>{null!=e&&function(e){e.addEventListener("keydown",aT,!0),e.addEventListener("mousedown",lT,!0),e.addEventListener("pointerdown",lT,!0),e.addEventListener("touchstart",lT,!0),e.addEventListener("visibilitychange",cT,!0)}(e.ownerDocument)}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!uT(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(iT=!0,oT.start(100,(()=>{iT=!1})),t.current=!1,!0)},ref:e}};function dT(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function fT(e,t){return fT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fT(e,t)}function pT(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,fT(e,t)}const mT=r.createContext(null);function gT(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function yT(e,t,n){return null!=n[t]?n[t]:e.props[t]}function vT(e,t,n){var i=gT(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(t,i);return Object.keys(o).forEach((function(s){var a=o[s];if((0,r.isValidElement)(a)){var l=s in t,c=s in i,u=t[s],h=(0,r.isValidElement)(u)&&!u.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,r.isValidElement)(u)&&(o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:u.props.in,exit:yT(a,"exit",e),enter:yT(a,"enter",e)})):o[s]=(0,r.cloneElement)(a,{in:!1}):o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:yT(a,"exit",e),enter:yT(a,"enter",e)})}})),o}var bT=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},wT=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}pT(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,i,o=t.children,s=t.handleExited;return{children:t.firstRender?(n=e,i=s,gT(n.children,(function(e){return(0,r.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:yT(e,"appear",n),enter:yT(e,"enter",n),exit:yT(e,"exit",n)})}))):vT(e,o,s),firstRender:!1}},n.handleExited=function(e,t){var n=gT(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,uE.A)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=(0,cE.A)(e,["component","childFactory"]),o=this.state.contextValue,s=bT(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?r.createElement(mT.Provider,{value:o},s):r.createElement(mT.Provider,{value:o},r.createElement(t,i,s))},t}(r.Component);wT.propTypes={},wT.defaultProps={component:"div",childFactory:function(e){return e}};const _T=wT;var ST=n(3290);const IT=function(e){const{className:t,classes:n,pulsate:i=!1,rippleX:o,rippleY:s,rippleSize:a,in:l,onExited:c,timeout:u}=e,[h,d]=r.useState(!1),f=dE(t,n.ripple,n.rippleVisible,i&&n.ripplePulsate),p={width:a,height:a,top:-a/2+s,left:-a/2+o},m=dE(n.child,h&&n.childLeaving,i&&n.childPulsate);return l||h||d(!0),r.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,Jk.jsx)("span",{className:f,style:p,children:(0,Jk.jsx)("span",{className:m})})};const kT=gC("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var ET,CT,TT,xT;const AT=["center","classes","className"];let NT,PT,RT,DT;const OT=(0,ST.i7)(NT||(NT=ET||(ET=dT(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),MT=(0,ST.i7)(PT||(PT=CT||(CT=dT(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),LT=(0,ST.i7)(RT||(RT=TT||(TT=dT(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),FT=tC("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),UT=tC(IT,{name:"MuiTouchRipple",slot:"Ripple"})(DT||(DT=xT||(xT=dT(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),kT.rippleVisible,OT,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),kT.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),kT.child,kT.childLeaving,MT,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),kT.childPulsate,LT,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),zT=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=n,a=(0,cE.A)(n,AT),[l,c]=r.useState([]),u=r.useRef(0),h=r.useRef(null);r.useEffect((()=>{h.current&&(h.current(),h.current=null)}),[l]);const d=r.useRef(!1),f=nT(),p=r.useRef(null),m=r.useRef(null),g=r.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:s}=e;c((e=>[...e,(0,Jk.jsx)(UT,{classes:{ripple:dE(o.ripple,kT.ripple),rippleVisible:dE(o.rippleVisible,kT.rippleVisible),ripplePulsate:dE(o.ripplePulsate,kT.ripplePulsate),child:dE(o.child,kT.child),childLeaving:dE(o.childLeaving,kT.childLeaving),childPulsate:dE(o.childPulsate,kT.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,h.current=s}),[o]),y=r.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&d.current)return void(d.current=!1);"touchstart"===(null==e?void 0:e.type)&&(d.current=!0);const a=s?null:m.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,h;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2===0&&(h+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;h=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===p.current&&(p.current=()=>{g({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})},f.start(80,(()=>{p.current&&(p.current(),p.current=null)}))):g({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})}),[i,g,f]),v=r.useCallback((()=>{y({},{pulsate:!0})}),[y]),b=r.useCallback(((e,t)=>{if(f.clear(),"touchend"===(null==e?void 0:e.type)&&p.current)return p.current(),p.current=null,void f.start(0,(()=>{b(e,t)}));p.current=null,c((e=>e.length>0?e.slice(1):e)),h.current=t}),[f]);return r.useImperativeHandle(t,(()=>({pulsate:v,start:y,stop:b})),[v,y,b]),(0,Jk.jsx)(FT,(0,uE.A)({className:dE(kT.root,o.root,s),ref:m},a,{children:(0,Jk.jsx)(_T,{component:null,exit:!0,children:l})}))})),jT=zT;function VT(e){return mC("MuiButtonBase",e)}const BT=gC("MuiButtonBase",["root","disabled","focusVisible"]),qT=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],WT=tC("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(BT.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),KT=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:d=!1,LinkComponent:f="a",onBlur:p,onClick:m,onContextMenu:g,onDragLeave:y,onFocus:v,onFocusVisible:b,onKeyDown:w,onKeyUp:_,onMouseDown:S,onMouseLeave:I,onMouseUp:k,onTouchEnd:E,onTouchMove:C,onTouchStart:T,tabIndex:x=0,TouchRippleProps:A,touchRippleRef:N,type:P}=n,R=(0,cE.A)(n,qT),D=r.useRef(null),O=r.useRef(null),M=YC(O,N),{isFocusVisibleRef:L,onFocus:F,onBlur:U,ref:z}=hT(),[j,V]=r.useState(!1);c&&j&&V(!1),r.useImperativeHandle(i,(()=>({focusVisible:()=>{V(!0),D.current.focus()}})),[]);const[B,q]=r.useState(!1);r.useEffect((()=>{q(!0)}),[]);const W=B&&!u&&!c;function K(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return XC((r=>{t&&t(r);return!n&&O.current&&O.current[e](r),!0}))}r.useEffect((()=>{j&&d&&!u&&B&&O.current.pulsate()}),[u,d,j,B]);const H=K("start",S),G=K("stop",g),Q=K("stop",y),Y=K("stop",k),$=K("stop",(e=>{j&&e.preventDefault(),I&&I(e)})),J=K("start",T),X=K("stop",E),Z=K("stop",C),ee=K("stop",(e=>{U(e),!1===L.current&&V(!1),p&&p(e)}),!1),te=XC((e=>{D.current||(D.current=e.currentTarget),F(e),!0===L.current&&(V(!0),b&&b(e)),v&&v(e)})),ne=()=>{const e=D.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},re=r.useRef(!1),ie=XC((e=>{d&&!re.current&&j&&O.current&&" "===e.key&&(re.current=!0,O.current.stop(e,(()=>{O.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),w&&w(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))})),oe=XC((e=>{d&&" "===e.key&&O.current&&j&&!e.defaultPrevented&&(re.current=!1,O.current.stop(e,(()=>{O.current.pulsate(e)}))),_&&_(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let se=l;"button"===se&&(R.href||R.to)&&(se=f);const ae={};"button"===se?(ae.type=void 0===P?"button":P,ae.disabled=c):(R.href||R.to||(ae.role="button"),c&&(ae["aria-disabled"]=c));const le=YC(t,z,D);const ce=(0,uE.A)({},n,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:d,tabIndex:x,focusVisible:j}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o=fE({root:["root",t&&"disabled",n&&"focusVisible"]},VT,i);return n&&r&&(o.root+=" ".concat(r)),o})(ce);return(0,Jk.jsxs)(WT,(0,uE.A)({as:se,className:dE(ue.root,a),ownerState:ce,onBlur:ee,onClick:m,onContextMenu:G,onFocus:te,onKeyDown:ie,onKeyUp:oe,onMouseDown:H,onMouseLeave:$,onMouseUp:Y,onDragLeave:Q,onTouchEnd:X,onTouchMove:Z,onTouchStart:J,ref:le,tabIndex:c?-1:x,type:P},ae,R,{children:[s,W?(0,Jk.jsx)(jT,(0,uE.A)({ref:M,center:o},A)):null]}))})),HT=KT;function GT(e){return mC("MuiButton",e)}const QT=gC("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const YT=r.createContext({});const $T=r.createContext(void 0),JT=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],XT=e=>(0,uE.A)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),ZT=tC(HT,{shouldForwardProp:e=>ZE(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat(uC(n.color))],t["size".concat(uC(n.size))],t["".concat(n.variant,"Size").concat(uC(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((e=>{let{theme:t,ownerState:n}=e;var r,i;const o="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],s="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return(0,uE.A)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,uE.A)({textDecoration:"none",backgroundColor:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,_E.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,_E.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:"1px solid ".concat((t.vars||t).palette[n.color].main),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,_E.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}),"&:active":(0,uE.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[8]}),["&.".concat(QT.focusVisible)]:(0,uE.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[6]}),["&.".concat(QT.disabled)]:(0,uE.A)({color:(t.vars||t).palette.action.disabled},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)},"contained"===n.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:t.vars?"1px solid rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):"1px solid ".concat((0,_E.X4)(t.palette[n.color].main,.5))},"contained"===n.variant&&{color:t.vars?t.vars.palette.text.primary:null==(r=(i=t.palette).getContrastText)?void 0:r.call(i,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:o,boxShadow:(t.vars||t).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(QT.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(QT.disabled)]:{boxShadow:"none"}}})),ex=tC("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t["iconSize".concat(uC(n.size))]]}})((e=>{let{ownerState:t}=e;return(0,uE.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},XT(t))})),tx=tC("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t["iconSize".concat(uC(n.size))]]}})((e=>{let{ownerState:t}=e;return(0,uE.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},XT(t))})),nx=r.forwardRef((function(e,t){const n=r.useContext(YT),i=r.useContext($T),o=lC({props:nC(n,e),name:"MuiButton"}),{children:s,color:a="primary",component:l="button",className:c,disabled:u=!1,disableElevation:h=!1,disableFocusRipple:d=!1,endIcon:f,focusVisibleClassName:p,fullWidth:m=!1,size:g="medium",startIcon:y,type:v,variant:b="text"}=o,w=(0,cE.A)(o,JT),_=(0,uE.A)({},o,{color:a,component:l,disabled:u,disableElevation:h,disableFocusRipple:d,fullWidth:m,size:g,type:v,variant:b}),S=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:s}=e,a=fE({root:["root",o,"".concat(o).concat(uC(t)),"size".concat(uC(i)),"".concat(o,"Size").concat(uC(i)),"color".concat(uC(t)),n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon","iconSize".concat(uC(i))],endIcon:["icon","endIcon","iconSize".concat(uC(i))]},GT,s);return(0,uE.A)({},s,a)})(_),I=y&&(0,Jk.jsx)(ex,{className:S.startIcon,ownerState:_,children:y}),k=f&&(0,Jk.jsx)(tx,{className:S.endIcon,ownerState:_,children:f}),E=i||"";return(0,Jk.jsxs)(ZT,(0,uE.A)({ownerState:_,className:dE(n.className,S.root,c,E),component:l,disabled:u,focusRipple:!d,focusVisibleClassName:dE(S.focusVisible,p),ref:t,type:v},w,{classes:S,children:[I,s,k]}))})),rx=nx,ix="/login",ox="/chat";function sx(){const{auth:e}=tE(),[t]=lE(e);return(0,Jk.jsx)(TC,{color:"default",position:"static",children:(0,Jk.jsx)(RC,{children:(0,Jk.jsx)(HC,{container:!0,justifyContent:"flex-end",children:t?(0,Jk.jsx)(rx,{color:"warning",variant:"outlined",onClick:()=>e.signOut(),children:"EXIT"}):(0,Jk.jsx)(xe,{to:ix,children:(0,Jk.jsx)(rx,{color:"primary",variant:"outlined",children:"LOGIN"})})})})})}var ax=n(3174);const lx=["ownerState"],cx=["variants"],ux=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function hx(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const dx=(0,bE.A)(),fx=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function px(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function mx(e){return e?(t,n)=>n[e]:null}function gx(e,t){let{ownerState:n}=t,r=(0,cE.A)(t,lx);const i="function"===typeof e?e((0,uE.A)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>gx(e,(0,uE.A)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,cE.A)(i,cx);return e.forEach((e=>{let i=!0;"function"===typeof e.props?i=e.props((0,uE.A)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,uE.A)({ownerState:n},r,n)):e.style))})),t}return i}const yx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=dx,rootShouldForwardProp:r=hx,slotShouldForwardProp:i=hx}=e,o=e=>(0,vE.A)((0,uE.A)({},e,{theme:px((0,uE.A)({},e,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,ax.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:h=mx(fx(l))}=s,d=(0,cE.A)(s,ux),f=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,p=u||!1;let m=hx;"Root"===l||"root"===l?m=r:l?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=(0,ax.default)(e,(0,uE.A)({shouldForwardProp:m,label:undefined},d)),y=e=>"function"===typeof e&&e.__emotion_real!==e||(0,gE.Q)(e)?r=>gx(e,(0,uE.A)({},r,{theme:px({theme:r.theme,defaultTheme:n,themeId:t})})):e,v=function(r){let i=y(r);for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];const u=l?l.map(y):[];a&&h&&u.push((e=>{const r=px((0,uE.A)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[a]||!r.components[a].styleOverrides)return null;const i=r.components[a].styleOverrides,o={};return Object.entries(i).forEach((t=>{let[n,i]=t;o[n]=gx(i,(0,uE.A)({},e,{theme:r}))})),h(e,o)})),a&&!f&&u.push((e=>{var r;const i=px((0,uE.A)({},e,{defaultTheme:n,themeId:t}));return gx({variants:null==i||null==(r=i.components)||null==(r=r[a])?void 0:r.variants},(0,uE.A)({},e,{theme:i}))})),p||u.push(o);const d=u.length-l.length;if(Array.isArray(r)&&d>0){const e=new Array(d).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const m=g(i,...u);return e.muiName&&(m.muiName=e.muiName),m};return g.withConfig&&(v.withConfig=g.withConfig),v}}(),vx=yx,bx=["className","component","disableGutters","fixed","maxWidth","classes"],wx=(0,bE.A)(),_x=vx("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat((0,cC.A)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),Sx=e=>aC({props:e,name:"MuiContainer",defaultTheme:wx});const Ix=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=_x,useThemeProps:n=Sx,componentName:i="MuiContainer"}=e,o=t((e=>{let{theme:t,ownerState:n}=e;return(0,uE.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:"".concat(i).concat(t.breakpoints.unit)}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,uE.A)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}})})),s=r.forwardRef((function(e,t){const r=n(e),{className:s,component:a="div",disableGutters:l=!1,fixed:c=!1,maxWidth:u="lg"}=r,h=(0,cE.A)(r,bx),d=(0,uE.A)({},r,{component:a,disableGutters:l,fixed:c,maxWidth:u}),f=((e,t)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:o}=e;return fE({root:["root",o&&"maxWidth".concat((0,cC.A)(String(o))),r&&"fixed",i&&"disableGutters"]},(e=>mC(t,e)),n)})(d,i);return(0,Jk.jsx)(o,(0,uE.A)({as:a,ownerState:d,className:dE(f.root,s),ref:t},h))}));return s}({createStyledComponent:tC("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat(uC(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>lC({props:e,name:"MuiContainer"})}),kx=Ix,Ex=["className","component"];const Cx=gC("MuiBox",["root"]),Tx=$E(),xx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n,defaultClassName:i="MuiBox-root",generateClassName:o}=e,s=(0,ax.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(vE.A),a=r.forwardRef((function(e,r){const a=sC(n),l=(0,OC.A)(e),{className:c,component:u="div"}=l,h=(0,cE.A)(l,Ex);return(0,Jk.jsx)(s,(0,uE.A)({as:u,ref:r,className:dE(c,o?o(i):i),theme:t&&a[t]||a},h))}));return a}({themeId:XE,defaultTheme:Tx,defaultClassName:Cx.root,generateClassName:fC.generate}),Ax=xx,Nx="@firebase/database",Px="1.0.4";let Rx="";function Dx(e){Rx=e}class Ox{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ct(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:lt(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Mx{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ht(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Lx=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ox(t)}}catch(Dz){}return new Mx},Fx=Lx("localStorage"),Ux=Lx("sessionStorage"),zx=new Vt("@firebase/database"),jx=function(){let e=1;return function(){return e++}}(),Vx=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Me(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new wt;n.update(t);const r=n.digest();return Ue.encodeByteArray(r)},Bx=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=Bx.apply(null,n):e+="object"===typeof n?ct(n):n,e+=" "}return e};let qx=null,Wx=!0;const Kx=function(e,t){Me(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(zx.logLevel=Lt.VERBOSE,qx=zx.log.bind(zx),t&&Ux.set("logging_enabled",!0)):"function"===typeof e?qx=e:(qx=null,Ux.remove("logging_enabled"))},Hx=function(){if(!0===Wx&&(Wx=!1,null===qx&&!0===Ux.get("logging_enabled")&&Kx(!0)),qx){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Bx.apply(null,t);qx(r)}},Gx=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Hx(e,...n)}},Qx=function(){const e="FIREBASE INTERNAL ERROR: "+Bx(...arguments);zx.error(e)},Yx=function(){const e="FIREBASE FATAL ERROR: ".concat(Bx(...arguments));throw zx.error(e),new Error(e)},$x=function(){const e="FIREBASE WARNING: "+Bx(...arguments);zx.warn(e)},Jx=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Xx="[MIN_NAME]",Zx="[MAX_NAME]",eA=function(e,t){if(e===t)return 0;if(e===Xx||t===Zx)return-1;if(t===Xx||e===Zx)return 1;{const n=lA(e),r=lA(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},tA=function(e,t){return e===t?0:e<t?-1:1},nA=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ct(t))},rA=function(e){if("object"!==typeof e||null===e)return ct(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=ct(t[r]),n+=":",n+=rA(e[t[r]]);return n+="}",n},iA=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function oA(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const sA=function(e){Me(!Jx(e),"Invalid JSON number");const t=1023;let n,r,i,o,s;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(s=0;s<64;s+=8){let e=parseInt(l.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const aA=new RegExp("^-?(0*)\\d{1,10}$"),lA=function(e){if(aA.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},cA=function(e){try{e()}catch(Dz){setTimeout((()=>{const t=Dz.stack||"";throw $x("Exception was thrown by user callback.",t),Dz}),Math.floor(0))}},uA=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class hA{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){$x('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class dA{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Hx("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$x(e)}}class fA{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}fA.OWNER="owner";const pA="5",mA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gA="ac",yA="websocket",vA="long_polling";class bA{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fx.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fx.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function wA(e,t,n){let r;if(Me("string"===typeof t,"typeof type must == string"),Me("object"===typeof n,"typeof params must == object"),t===yA)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==vA)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return oA(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class _A{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ht(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return qe(void 0,this.counters_)}}const SA={},IA={};function kA(e){const t=e.toString();return SA[t]||(SA[t]=new _A),SA[t]}class EA{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&cA((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const CA="start";class TA{constructor(e,t,n,r,i,o,s){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gx(e),this.stats_=kA(t),this.urlFn=e=>(this.appCheckToken&&(e[gA]=this.appCheckToken),wA(t,vA,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new EA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(nt()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new xA((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,s,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===CA)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[CA]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=pA,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[gA]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&mA.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){TA.forceAllow_=!0}static forceDisallow(){TA.forceDisallow_=!0}static isAvailable(){return!nt()&&(!!TA.forceAllow_||!TA.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=je(t),r=iA(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(nt())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ct(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class xA{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,nt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=jx(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=xA.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(Dz){Hx("frame writing exception"),Dz.stack&&Hx(Dz.stack),Hx(Dz)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Hx("No IE domain setting required")}catch(Dz){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){nt()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Hx("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(Dz){}}),Math.floor(1))}}let AA=null;"undefined"!==typeof MozWebSocket?AA=MozWebSocket:"undefined"!==typeof WebSocket&&(AA=WebSocket);class NA{constructor(e,t,n,r,i,o,s){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gx(this.connId),this.stats_=kA(t),this.connURL=NA.connectionURL_(t,o,s,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=pA,!nt()&&"undefined"!==typeof location&&location.hostname&&mA.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[gA]=r),i&&(o.p=i),wA(e,yA,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fx.set("previous_websocket_failure",!0);try{let e;if(nt()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(pA,"/").concat(Rx,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/chat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new AA(this.connURL,[],e)}catch(Dz){this.log_("Error instantiating WebSocket.");const t=Dz.message||Dz.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){NA.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==AA&&!NA.forceDisallow_}static previouslyFailed(){return Fx.isInMemoryStorage||!0===Fx.get("previous_websocket_failure")}markConnectionHealthy(){Fx.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=lt(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Me(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=iA(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(Dz){this.log_("Exception thrown from WebSocket.send():",Dz.message||Dz.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}NA.responsesRequiredToBeHealthy=2,NA.healthyTimeout=3e4;class PA{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[TA,NA]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=NA&&NA.isAvailable();let n=t&&!NA.previouslyFailed();if(e.webSocketOnly&&(t||$x("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[NA];else{const e=this.transports_=[];for(const t of PA.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);PA.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}PA.globalTransportInitialized_=!1;class RA{constructor(e,t,n,r,i,o,s,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gx("c:"+this.id+":"),this.transportManager_=new PA(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=uA((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=nA("t",e),n=nA("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=nA("t",e),n=nA("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=nA("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Qx("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),pA!==n&&$x("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),uA((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):uA((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fx.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class DA{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class OA{constructor(e){this.allowedEvents_=e,this.listeners_={},Me(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Me(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class MA extends OA{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||$e()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new MA}getInitialEvent(e){return Me("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const LA=32,FA=768;class UA{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function zA(){return new UA("")}function jA(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function VA(e){return e.pieces_.length-e.pieceNum_}function BA(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new UA(e.pieces_,t)}function qA(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function WA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function KA(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new UA(t,0)}function HA(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof UA)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new UA(n,0)}function GA(e){return e.pieceNum_>=e.pieces_.length}function QA(e,t){const n=jA(e),r=jA(t);if(null===n)return t;if(n===r)return QA(BA(e),BA(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function YA(e,t){const n=WA(e,0),r=WA(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=eA(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function $A(e,t){if(VA(e)!==VA(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function JA(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(VA(e)>VA(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class XA{constructor(e,t){this.errorPrefix_=t,this.parts_=WA(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=xt(this.parts_[n]);ZA(this)}}function ZA(e){if(e.byteLength_>FA)throw new Error(e.errorPrefix_+"has a key path longer than "+FA+" bytes ("+e.byteLength_+").");if(e.parts_.length>LA)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+LA+") or object contains a cycle "+eN(e))}function eN(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class tN extends OA{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new tN}getInitialEvent(e){return Me("visible"===e,"Unknown event type: "+e),[this.visible_]}}const nN=1e3;class rN extends DA{constructor(e,t,n,r,i,o,s,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=rN.nextPersistentConnectionId_++,this.log_=Gx("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=nN,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!nt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tN.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&MA.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ct(i)),Me(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Ge,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Me(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,s=i.s;rN.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),e.onComplete&&e.onComplete(s,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&ht(e,"w")){const n=dt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();$x("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=ut(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=ut(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ct(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Qx("Unrecognized action received from server: "+ct(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Me(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nN,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=nN,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nN),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+rN.nextConnectionId_++,i=this.lastSessionId;let o=!1,s=null;const a=function(){s?s.close():(o=!0,n())},l=function(e){Me(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Hx("getToken() completed but was canceled"):(Hx("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,s=new RA(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{$x(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Qx){this.log_("Failed to get token: "+Qx),o||(this.repoInfo_.nodeAdmin&&$x(Qx),a())}}}interrupt(e){Hx("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hx("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ft(this.interruptReasons_)&&(this.reconnectDelay_=nN,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>rA(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new UA(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Hx("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Hx("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";nt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Rx.replace(/\./g,"-")]=1,$e()?e["framework.cordova"]=1:et()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=MA.getInstance().currentlyOnline();return ft(this.interruptReasons_)&&e}}rN.nextPersistentConnectionId_=0,rN.nextConnectionId_=0;class iN{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new iN(e,t)}}class oN{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new iN(Xx,e),r=new iN(Xx,t);return 0!==this.compare(n,r)}minPost(){return iN.MIN}}let sN;class aN extends oN{static get __EMPTY_NODE(){return sN}static set __EMPTY_NODE(e){sN=e}compare(e,t){return eA(e.name,t.name)}isDefinedOn(e){throw Le("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return iN.MIN}maxPost(){return new iN(Zx,sN)}makePost(e,t){return Me("string"===typeof e,"KeyIndex indexValue must always be a string."),new iN(e,sN)}toString(){return".key"}}const lN=new aN;class cN{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class uN{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:uN.RED,this.left=null!=r?r:hN.EMPTY_NODE,this.right=null!=i?i:hN.EMPTY_NODE}copy(e,t,n,r,i){return new uN(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return hN.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return hN.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,uN.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,uN.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}uN.RED=!0,uN.BLACK=!1;class hN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hN.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new hN(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,uN.BLACK,null,null))}remove(e){return new hN(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,uN.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new cN(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new cN(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new cN(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new cN(this.root_,null,this.comparator_,!0,e)}}function dN(e,t){return eA(e.name,t.name)}function fN(e,t){return eA(e,t)}let pN;hN.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new uN(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const mN=function(e){return"number"===typeof e?"number:"+sA(e):"string:"+e},gN=function(e){if(e.isLeafNode()){const t=e.val();Me("string"===typeof t||"number"===typeof t||"object"===typeof t&&ht(t,".sv"),"Priority must be a string or number.")}else Me(e===pN||e.isEmpty(),"priority of unexpected type.");Me(e===pN||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let yN,vN,bN;class wN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wN.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Me(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),gN(this.priorityNode_)}static set __childrenNodeConstructor(e){yN=e}static get __childrenNodeConstructor(){return yN}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new wN(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:wN.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return GA(e)?this:".priority"===jA(e)?this.priorityNode_:wN.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:wN.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=jA(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Me(".priority"!==n||1===VA(e),".priority must be the last token in a path"),this.updateImmediateChild(n,wN.__childrenNodeConstructor.EMPTY_NODE.updateChild(BA(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+mN(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?sA(this.value_):this.value_,this.lazyHash_=Vx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===wN.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof wN.__childrenNodeConstructor?-1:(Me(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=wN.VALUE_TYPE_ORDER.indexOf(t),i=wN.VALUE_TYPE_ORDER.indexOf(n);return Me(r>=0,"Unknown leaf type: "+t),Me(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}wN.VALUE_TYPE_ORDER=["object","boolean","number","string"];const _N=new class extends oN{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?eA(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return iN.MIN}maxPost(){return new iN(Zx,new wN("[PRIORITY-POST]",bN))}makePost(e,t){const n=vN(e);return new iN(t,new wN("[PRIORITY-POST]",n))}toString(){return".priority"}},SN=Math.log(2);class IN{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/SN,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const kN=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let s,a;if(0===o)return null;if(1===o)return s=e[t],a=n?n(s):s,new uN(a,s.node,uN.BLACK,null,null);{const l=parseInt(o/2,10)+t,c=i(t,l),u=i(l+1,r);return s=e[l],a=n?n(s):s,new uN(a,s.node,uN.BLACK,c,u)}},o=function(t){let r=null,o=null,s=e.length;const a=function(t,r){const o=s-t,a=s;s-=t;const c=i(o+1,a),u=e[o],h=n?n(u):u;l(new uN(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,uN.BLACK):(a(r,uN.BLACK),a(r,uN.RED))}return o}(new IN(e.length));return new hN(r||t,o)};let EN;const CN={};class TN{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Me(CN&&_N,"ChildrenNode.ts has not been loaded"),EN=EN||new TN({".priority":CN},{".priority":_N}),EN}get(e){const t=dt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof hN?t:null}hasIndex(e){return ht(this.indexSet_,e.toString())}addIndex(e,t){Me(e!==lN,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(iN.Wrap);let o,s=i.getNext();for(;s;)r=r||e.isDefinedOn(s.node),n.push(s),s=i.getNext();o=r?kN(n,e.getCompare()):CN;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=o,new TN(c,l)}addToIndexes(e,t){const n=pt(this.indexes_,((n,r)=>{const i=dt(this.indexSet_,r);if(Me(i,"Missing index implementation for "+r),n===CN){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(iN.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),kN(n,i.getCompare())}return CN}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new iN(e.name,r))),i.insert(e,e.node)}}));return new TN(n,this.indexSet_)}removeFromIndexes(e,t){const n=pt(this.indexes_,(n=>{if(n===CN)return n;{const r=t.get(e.name);return r?n.remove(new iN(e.name,r)):n}}));return new TN(n,this.indexSet_)}}let xN;class AN{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&gN(this.priorityNode_),this.children_.isEmpty()&&Me(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xN||(xN=new AN(new hN(fN),null,TN.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xN}updatePriority(e){return this.children_.isEmpty()?this:new AN(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?xN:t}}getChild(e){const t=jA(e);return null===t?this:this.getImmediateChild(t).getChild(BA(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Me(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new iN(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?xN:this.priorityNode_;return new AN(r,o,i)}}updateChild(e,t){const n=jA(e);if(null===n)return t;{Me(".priority"!==jA(e)||1===VA(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(BA(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(_N,((o,s)=>{t[o]=s.val(e),n++,i&&AN.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+mN(this.getPriority().val())+":"),this.forEachChild(_N,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Vx(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new iN(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new iN(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new iN(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,iN.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,iN.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===NN?-1:0}withIndex(e){if(e===lN||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new AN(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===lN||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(_N),n=t.getIterator(_N);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===lN?null:this.indexMap_.get(e.toString())}}AN.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const NN=new class extends AN{constructor(){super(new hN(fN),AN.EMPTY_NODE,TN.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return AN.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(iN,{MIN:{value:new iN(Xx,AN.EMPTY_NODE)},MAX:{value:new iN(Zx,NN)}}),aN.__EMPTY_NODE=AN.EMPTY_NODE,wN.__childrenNodeConstructor=AN,pN=NN,function(e){bN=e}(NN);const PN=!0;function RN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return AN.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Me(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new wN(e,RN(t))}if(e instanceof Array||!PN){let n=AN.EMPTY_NODE;return oA(e,((t,r)=>{if(ht(e,t)&&"."!==t.substring(0,1)){const e=RN(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(RN(t))}{const n=[];let r=!1;if(oA(e,((e,t)=>{if("."!==e.substring(0,1)){const i=RN(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new iN(e,i)))}})),0===n.length)return AN.EMPTY_NODE;const i=kN(n,dN,(e=>e.name),fN);if(r){const e=kN(n,_N.getCompare());return new AN(i,RN(t),new TN({".priority":e},{".priority":_N}))}return new AN(i,RN(t),TN.Default)}}!function(e){vN=e}(RN);class DN extends oN{constructor(e){super(),this.indexPath_=e,Me(!GA(e)&&".priority"!==jA(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?eA(e.name,t.name):i}makePost(e,t){const n=RN(e),r=AN.EMPTY_NODE.updateChild(this.indexPath_,n);return new iN(t,r)}maxPost(){const e=AN.EMPTY_NODE.updateChild(this.indexPath_,NN);return new iN(Zx,e)}toString(){return WA(this.indexPath_,0).join("/")}}const ON=new class extends oN{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?eA(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return iN.MIN}maxPost(){return iN.MAX}makePost(e,t){const n=RN(e);return new iN(t,n)}toString(){return".value"}};function MN(e){return{type:"value",snapshotNode:e}}function LN(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function FN(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function UN(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class zN{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){Me(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(FN(t,s)):Me(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(LN(t,n)):o.trackChildChange(UN(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(_N,((e,r)=>{t.hasChild(e)||n.trackChildChange(FN(e,r))})),t.isLeafNode()||t.forEachChild(_N,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(UN(t,r,i))}else n.trackChildChange(LN(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?AN.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class jN{constructor(e){this.indexedFilter_=new zN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=jN.getStartPost_(e),this.endPost_=jN.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new iN(t,n))||(n=AN.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=AN.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(AN.EMPTY_NODE);const i=this;return t.forEachChild(_N,((e,t)=>{i.matches(new iN(e,t))||(r=r.updateImmediateChild(e,AN.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class VN{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new jN(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return this.rangedFilter_.matches(new iN(t,n))||(n=AN.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=AN.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=AN.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(AN.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,AN.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){const e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();const s=e;Me(s.numChildren()===this.limit_,"");const a=new iN(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(s.hasChild(t)){const e=s.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||s.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:o(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(UN(t,n,e)),s.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(FN(t,e));const n=s.updateImmediateChild(t,AN.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(LN(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&o(l,a)>=0?(null!=i&&(i.trackChildChange(FN(l.name,l.node)),i.trackChildChange(LN(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,AN.EMPTY_NODE)):e}}class BN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_N}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Me(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Me(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xx}hasEnd(){return this.endSet_}getIndexEndValue(){return Me(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Me(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zx}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Me(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_N}copy(){const e=new BN;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function qN(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function WN(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function KN(e,t){const n=e.copy();return n.index_=t,n}function HN(e){const t={};if(e.isDefault())return t;let n;if(e.index_===_N?n="$priority":e.index_===ON?n="$value":e.index_===lN?n="$key":(Me(e.index_ instanceof DN,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=ct(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=ct(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+ct(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=ct(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+ct(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function GN(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==_N&&(t.i=e.index_.toString()),t}class QN extends DA{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Gx("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Me(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=QN.getListenId_(e,n),s={};this.listens_[o]=s;const a=HN(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),dt(this.listens_,o)===s){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=QN.getListenId_(e,t);delete this.listens_[n]}get(e){const t=HN(e._queryParams),n=e._path.toString(),r=new Ge;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+yt(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=lt(a.responseText)}catch(Dz){$x("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&$x("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))}}class YN{constructor(){this.rootNode_=AN.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function $N(){return{value:null,children:new Map}}function JN(e,t,n){if(GA(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=jA(t);e.children.has(r)||e.children.set(r,$N());JN(e.children.get(r),t=BA(t),n)}}function XN(e,t){if(GA(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(_N,((t,n)=>{JN(e,new UA(t),n)})),XN(e,t)}}if(e.children.size>0){const n=jA(t);if(t=BA(t),e.children.has(n)){XN(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function ZN(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{ZN(r,new UA(t.toString()+"/"+e),n)}))}class eP{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&oA(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class tP{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new eP(e);const n=1e4+2e4*Math.random();uA(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;oA(e,((e,r)=>{r>0&&ht(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),uA(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var nP;function rP(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(nP||(nP={}));class iP{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=nP.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(GA(this.path)){if(null!=this.affectedTree.value)return Me(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new UA(e));return new iP(zA(),t,this.revert)}}return Me(jA(this.path)===e,"operationForChild called for unrelated child."),new iP(BA(this.path),this.affectedTree,this.revert)}}class oP{constructor(e,t){this.source=e,this.path=t,this.type=nP.LISTEN_COMPLETE}operationForChild(e){return GA(this.path)?new oP(this.source,zA()):new oP(this.source,BA(this.path))}}class sP{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=nP.OVERWRITE}operationForChild(e){return GA(this.path)?new sP(this.source,zA(),this.snap.getImmediateChild(e)):new sP(this.source,BA(this.path),this.snap)}}class aP{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=nP.MERGE}operationForChild(e){if(GA(this.path)){const t=this.children.subtree(new UA(e));return t.isEmpty()?null:t.value?new sP(this.source,zA(),t.value):new aP(this.source,zA(),t)}return Me(jA(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new aP(this.source,BA(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class lP{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(GA(e))return this.isFullyInitialized()&&!this.filtered_;const t=jA(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class cP{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function uP(e,t,n,r,i,o){const s=r.filter((e=>e.type===n));s.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Le("Should only compare child_ events.");const r=new iN(t.childName,t.snapshotNode),i=new iN(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),s.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function hP(e,t){return{eventCache:e,serverCache:t}}function dP(e,t,n,r){return hP(new lP(t,n,r),e.serverCache)}function fP(e,t,n,r){return hP(e.eventCache,new lP(t,n,r))}function pP(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function mP(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let gP;class yP{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(gP||(gP=new hN(tA)),gP);this.value=e,this.children=t}static fromObject(e){let t=new yP(null);return oA(e,((e,n)=>{t=t.set(new UA(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:zA(),value:this.value};if(GA(e))return null;{const n=jA(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(BA(e),t);if(null!=i){return{path:HA(new UA(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(GA(e))return this;{const t=jA(e),n=this.children.get(t);return null!==n?n.subtree(BA(e)):new yP(null)}}set(e,t){if(GA(e))return new yP(t,this.children);{const n=jA(e),r=(this.children.get(n)||new yP(null)).set(BA(e),t),i=this.children.insert(n,r);return new yP(this.value,i)}}remove(e){if(GA(e))return this.children.isEmpty()?new yP(null):new yP(null,this.children);{const t=jA(e),n=this.children.get(t);if(n){const r=n.remove(BA(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new yP(null):new yP(this.value,i)}return this}}get(e){if(GA(e))return this.value;{const t=jA(e),n=this.children.get(t);return n?n.get(BA(e)):null}}setTree(e,t){if(GA(e))return t;{const n=jA(e),r=(this.children.get(n)||new yP(null)).setTree(BA(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new yP(this.value,i)}}fold(e){return this.fold_(zA(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(HA(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,zA(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(GA(e))return null;{const r=jA(e),i=this.children.get(r);return i?i.findOnPath_(BA(e),HA(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,zA(),t)}foreachOnPath_(e,t,n){if(GA(e))return this;{this.value&&n(t,this.value);const r=jA(e),i=this.children.get(r);return i?i.foreachOnPath_(BA(e),HA(t,r),n):new yP(null)}}foreach(e){this.foreach_(zA(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(HA(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class vP{constructor(e){this.writeTree_=e}static empty(){return new vP(new yP(null))}}function bP(e,t,n){if(GA(t))return new vP(new yP(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const s=QA(i,t);return o=o.updateChild(s,n),new vP(e.writeTree_.set(i,o))}{const r=new yP(n),i=e.writeTree_.setTree(t,r);return new vP(i)}}}function wP(e,t,n){let r=e;return oA(n,((e,n)=>{r=bP(r,HA(t,e),n)})),r}function _P(e,t){if(GA(t))return vP.empty();{const n=e.writeTree_.setTree(t,new yP(null));return new vP(n)}}function SP(e,t){return null!=IP(e,t)}function IP(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(QA(n.path,t)):null}function kP(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(_N,((e,n)=>{t.push(new iN(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new iN(e,n.value))})),t}function EP(e,t){if(GA(t))return e;{const n=IP(e,t);return new vP(null!=n?new yP(n):e.writeTree_.subtree(t))}}function CP(e){return e.writeTree_.isEmpty()}function TP(e,t){return xP(zA(),e.writeTree_,t)}function xP(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Me(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=xP(HA(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(HA(e,".priority"),r)),n}}function AP(e,t){return BP(t,e)}function NP(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Me(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=n&&PP(t,r.path)?i=!1:JA(r.path,t.path)&&(o=!0)),s--}if(i){if(o)return function(e){e.visibleWrites=DP(e.allWrites,RP,zA()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=_P(e.visibleWrites,r.path);else{oA(r.children,(t=>{e.visibleWrites=_P(e.visibleWrites,HA(r.path,t))}))}return!0}return!1}function PP(e,t){if(e.snap)return JA(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&JA(HA(e.path,n),t))return!0;return!1}function RP(e){return e.visible}function DP(e,t,n){let r=vP.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)JA(n,e)?(t=QA(n,e),r=bP(r,t,o.snap)):JA(e,n)&&(t=QA(e,n),r=bP(r,zA(),o.snap.getChild(t)));else{if(!o.children)throw Le("WriteRecord should have .snap or .children");if(JA(n,e))t=QA(n,e),r=wP(r,t,o.children);else if(JA(e,n))if(t=QA(e,n),GA(t))r=wP(r,zA(),o.children);else{const e=dt(o.children,jA(t));if(e){const n=e.getChild(BA(t));r=bP(r,zA(),n)}}}}}return r}function OP(e,t,n,r,i){if(r||i){const o=EP(e.visibleWrites,t);if(!i&&CP(o))return n;if(i||null!=n||SP(o,zA())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(JA(e.path,t)||JA(t,e.path))};return TP(DP(e.allWrites,o,t),n||AN.EMPTY_NODE)}return null}{const r=IP(e.visibleWrites,t);if(null!=r)return r;{const r=EP(e.visibleWrites,t);if(CP(r))return n;if(null!=n||SP(r,zA())){return TP(r,n||AN.EMPTY_NODE)}return null}}}function MP(e,t,n,r){return OP(e.writeTree,e.treePath,t,n,r)}function LP(e,t){return function(e,t,n){let r=AN.EMPTY_NODE;const i=IP(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(_N,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=EP(e.visibleWrites,t);return n.forEachChild(_N,((e,t)=>{const n=TP(EP(i,new UA(e)),t);r=r.updateImmediateChild(e,n)})),kP(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return kP(EP(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function FP(e,t,n,r){return function(e,t,n,r,i){Me(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=HA(t,n);if(SP(e.visibleWrites,o))return null;{const t=EP(e.visibleWrites,o);return CP(t)?i.getChild(n):TP(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function UP(e,t){return function(e,t){return IP(e.visibleWrites,t)}(e.writeTree,HA(e.treePath,t))}function zP(e,t,n,r,i,o){return function(e,t,n,r,i,o,s){let a;const l=EP(e.visibleWrites,t),c=IP(l,zA());if(null!=c)a=c;else{if(null==n)return[];a=TP(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function jP(e,t,n){return function(e,t,n,r){const i=HA(t,n),o=IP(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return TP(EP(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function VP(e,t){return BP(HA(e.treePath,t),e.writeTree)}function BP(e,t){return{treePath:e,writeTree:t}}class qP{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Me("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Me(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,UN(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,FN(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,LN(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Le("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,UN(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const WP=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class KP{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new lP(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jP(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:mP(this.viewCache_),i=zP(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function HP(e,t,n,r,i){const o=new qP;let s,a;if(n.type===nP.OVERWRITE){const l=n;l.source.fromUser?s=YP(e,t,l.path,l.snap,r,i,o):(Me(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!GA(l.path),s=QP(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===nP.MERGE){const l=n;l.source.fromUser?s=function(e,t,n,r,i,o,s){let a=t;return r.foreach(((r,l)=>{const c=HA(n,r);$P(t,jA(c))&&(a=YP(e,a,c,l,i,o,s))})),r.foreach(((r,l)=>{const c=HA(n,r);$P(t,jA(c))||(a=YP(e,a,c,l,i,o,s))})),a}(e,t,l.path,l.children,r,i,o):(Me(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=XP(e,t,l.path,l.children,r,i,a,o))}else if(n.type===nP.ACK_USER_WRITE){const a=n;s=a.revert?function(e,t,n,r,i,o){let s;if(null!=UP(r,n))return t;{const a=new KP(r,t,i),l=t.eventCache.getNode();let c;if(GA(n)||".priority"===jA(n)){let n;if(t.serverCache.isFullyInitialized())n=MP(r,mP(t));else{const e=t.serverCache.getNode();Me(e instanceof AN,"serverChildren would be complete if leaf node"),n=LP(r,e)}c=e.filter.updateFullNode(l,n,o)}else{const i=jA(n);let u=jP(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,BA(n),a,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,AN.EMPTY_NODE,BA(n),a,o):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=MP(r,mP(t)),s.isLeafNode()&&(c=e.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=UP(r,zA()),dP(t,c,s,e.filter.filtersNodes())}}(e,t,a.path,r,i,o):function(e,t,n,r,i,o,s){if(null!=UP(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(GA(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return QP(e,t,n,l.getNode().getChild(n),i,o,a,s);if(GA(n)){let r=new yP(null);return l.getNode().forEachChild(lN,((e,t)=>{r=r.set(new UA(e),t)})),XP(e,t,n,r,i,o,a,s)}return t}{let c=new yP(null);return r.foreach(((e,t)=>{const r=HA(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),XP(e,t,n,c,i,o,a,s)}}(e,t,a.path,a.affectedTree,r,i,o)}else{if(n.type!==nP.LISTEN_COMPLETE)throw Le("Unknown operation type: "+n.type);s=function(e,t,n,r,i){const o=t.serverCache,s=fP(t,o.getNode(),o.isFullyInitialized()||GA(n),o.isFiltered());return GP(e,s,n,r,WP,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=pP(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(MN(pP(t)))}}(t,s,l),{viewCache:s,changes:l}}function GP(e,t,n,r,i,o){const s=t.eventCache;if(null!=UP(r,n))return t;{let a,l;if(GA(n))if(Me(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=mP(t),i=LP(r,n instanceof AN?n:AN.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=MP(r,mP(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const c=jA(n);if(".priority"===c){Me(1===VA(n),"Can't have a priority with additional path components");const i=s.getNode();l=t.serverCache.getNode();const o=FP(r,n,i,l);a=null!=o?e.filter.updatePriority(i,o):s.getNode()}else{const u=BA(n);let h;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();const e=FP(r,n,s.getNode(),l);h=null!=e?s.getNode().getImmediateChild(c).updateChild(u,e):s.getNode().getImmediateChild(c)}else h=jP(r,c,t.serverCache);a=null!=h?e.filter.updateChild(s.getNode(),c,h,u,i,o):s.getNode()}}return dP(t,a,s.isFullyInitialized()||GA(n),e.filter.filtersNodes())}}function QP(e,t,n,r,i,o,s,a){const l=t.serverCache;let c;const u=s?e.filter:e.filter.getIndexedFilter();if(GA(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=jA(n);if(!l.isCompleteForPath(n)&&VA(n)>1)return t;const i=BA(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),o):u.updateChild(l.getNode(),e,o,i,WP,null)}const h=fP(t,c,l.isFullyInitialized()||GA(n),u.filtersNodes());return GP(e,h,n,i,new KP(i,h,o),a)}function YP(e,t,n,r,i,o,s){const a=t.eventCache;let l,c;const u=new KP(i,t,o);if(GA(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,s),l=dP(t,c,!0,e.filter.filtersNodes());else{const i=jA(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=dP(t,c,a.isFullyInitialized(),a.isFiltered());else{const o=BA(n),c=a.getNode().getImmediateChild(i);let h;if(GA(o))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===qA(o)&&e.getChild(KA(o)).isEmpty()?e:e.updateChild(o,r):AN.EMPTY_NODE}if(c.equals(h))l=t;else{l=dP(t,e.filter.updateChild(a.getNode(),i,h,o,u,s),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function $P(e,t){return e.eventCache.isCompleteForChild(t)}function JP(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function XP(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=GA(n)?r:new yP(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=JP(0,t.serverCache.getNode().getImmediateChild(n),r);c=QP(e,c,new UA(n),l,i,o,s,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=JP(0,t.serverCache.getNode().getImmediateChild(n),r);c=QP(e,c,new UA(n),l,i,o,s,a)}})),c}class ZP{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new zN(n.getIndex()),i=(o=n).loadsAllData()?new zN(o.getIndex()):o.hasLimit()?new VN(o):new jN(o);var o;this.processor_=function(e){return{filter:e}}(i);const s=t.serverCache,a=t.eventCache,l=r.updateFullNode(AN.EMPTY_NODE,s.getNode(),null),c=i.updateFullNode(AN.EMPTY_NODE,a.getNode(),null),u=new lP(l,s.isFullyInitialized(),r.filtersNodes()),h=new lP(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=hP(h,u),this.eventGenerator_=new cP(this.query_)}get query(){return this.query_}}function eR(e,t){const n=mP(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!GA(t)&&!n.getImmediateChild(jA(t)).isEmpty())?n.getChild(t):null}function tR(e){return 0===e.eventRegistrations_.length}function nR(e,t,n){const r=[];if(n){Me(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function rR(e,t,n,r){t.type===nP.MERGE&&null!==t.source.queryId&&(Me(mP(e.viewCache_),"We should always have a full cache before handling merges"),Me(pP(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=HP(e.processor_,i,t,n,r);var s,a;return s=e.processor_,a=o.viewCache,Me(a.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Me(a.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),Me(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,iR(e,o.changes,o.viewCache.eventCache.getNode(),null)}function iR(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),uP(e,i,"child_removed",t,r,n),uP(e,i,"child_added",t,r,n),uP(e,i,"child_moved",o,r,n),uP(e,i,"child_changed",t,r,n),uP(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let oR,sR;class aR{constructor(){this.views=new Map}}function lR(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return Me(null!=o,"SyncTree gave us an op for an invalid query."),rR(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(rR(o,t,n,r));return i}}function cR(e,t,n,r,i){const o=t._queryIdentifier,s=e.views.get(o);if(!s){let e=MP(n,i?r:null),o=!1;e?o=!0:r instanceof AN?(e=LP(n,r),o=!1):(e=AN.EMPTY_NODE,o=!1);const s=hP(new lP(e,o,!1),new lP(r,i,!1));return new ZP(t,s)}return s}function uR(e,t,n,r,i,o){const s=cR(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function(e,t){e.eventRegistrations_.push(t)}(s,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(_N,((e,t)=>{r.push(LN(e,t))}));return n.isFullyInitialized()&&r.push(MN(n.getNode())),iR(e,r,n.getNode(),t)}(s,n)}function hR(e,t,n,r){const i=t._queryIdentifier,o=[];let s=[];const a=gR(e);if("default"===i)for(const[l,c]of e.views.entries())s=s.concat(nR(c,n,r)),tR(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const t=e.views.get(i);t&&(s=s.concat(nR(t,n,r)),tR(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return a&&!gR(e)&&o.push(new(Me(oR,"Reference.ts has not been loaded"),oR)(t._repo,t._path)),{removed:o,events:s}}function dR(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function fR(e,t){let n=null;for(const r of e.views.values())n=n||eR(r,t);return n}function pR(e,t){if(t._queryParams.loadsAllData())return yR(e);{const n=t._queryIdentifier;return e.views.get(n)}}function mR(e,t){return null!=pR(e,t)}function gR(e){return null!=yR(e)}function yR(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let vR=1;class bR{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yP(null),this.pendingWriteTree_={visibleWrites:vP.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wR(e,t,n,r,i){return function(e,t,n,r,i){Me(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=bP(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?AR(e,new sP({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function _R(e,t,n,r){!function(e,t,n,r){Me(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=wP(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=yP.fromObject(n);return AR(e,new aP({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function SR(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(NP(e.pendingWriteTree_,t)){let t=new yP(null);return null!=r.snap?t=t.set(zA(),!0):oA(r.children,(e=>{t=t.set(new UA(e),!0)})),AR(e,new iP(r.path,t,n))}return[]}function IR(e,t,n){return AR(e,new sP({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function kR(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t._path,s=e.syncPointTree_.get(o);let a=[];if(s&&("default"===t._queryIdentifier||mR(s,t))){const l=hR(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(o,((e,t)=>gR(t)));if(n&&!i){const t=e.syncPointTree_.subtree(o);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&gR(t)){return[yR(t)]}{let e=[];return t&&(e=dR(t)),oA(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,o=RR(e,r);e.listenProvider_.startListening(UR(i),DR(e,i),o.hashFn,o.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(UR(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(OR(t));e.listenProvider_.stopListening(UR(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=OR(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function ER(e,t,n,r){const i=MR(e,r);if(null!=i){const r=LR(i),o=r.path,s=r.queryId,a=QA(o,t);return FR(e,o,new sP(rP(s),a,n))}return[]}function CR(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let o=null,s=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=QA(e,i);o=o||fR(t,n),s=s||gR(t)}));let a,l=e.syncPointTree_.get(i);if(l?(s=s||gR(l),o=o||fR(l,zA())):(l=new aR,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=o)a=!0;else{a=!1,o=AN.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=fR(t,zA());n&&(o=o.updateImmediateChild(e,n))}))}const c=mR(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=OR(t);Me(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=vR++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=uR(l,t,n,AP(e.pendingWriteTree_,i),o,a);if(!c&&!s&&!r){const n=pR(l,t);u=u.concat(function(e,t,n){const r=t._path,i=DR(e,t),o=RR(e,n),s=e.listenProvider_.startListening(UR(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)Me(!gR(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!GA(e)&&t&&gR(t))return[yR(t).query];{let e=[];return t&&(e=e.concat(dR(t).map((e=>e.query)))),oA(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(UR(r),DR(e,r))}}return s}(e,t,n))}return u}function TR(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=fR(n,QA(e,t));if(r)return r}));return OP(r,t,i,n,!0)}function xR(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=QA(e,n);r=r||fR(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||fR(i,zA()):(i=new aR,e.syncPointTree_=e.syncPointTree_.set(n,i));const o=null!=r,s=o?new lP(r,!0,!1):null;return function(e){return pP(e.viewCache_)}(cR(i,t,AP(e.pendingWriteTree_,t._path),o?s.getNode():AN.EMPTY_NODE,o))}function AR(e,t){return NR(t,e.syncPointTree_,null,AP(e.pendingWriteTree_,zA()))}function NR(e,t,n,r){if(GA(e.path))return PR(e,t,n,r);{const i=t.get(zA());null==n&&null!=i&&(n=fR(i,zA()));let o=[];const s=jA(e.path),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){const e=n?n.getImmediateChild(s):null,t=VP(r,s);o=o.concat(NR(a,l,e,t))}return i&&(o=o.concat(lR(i,e,r,n))),o}}function PR(e,t,n,r){const i=t.get(zA());null==n&&null!=i&&(n=fR(i,zA()));let o=[];return t.children.inorderTraversal(((t,i)=>{const s=n?n.getImmediateChild(t):null,a=VP(r,t),l=e.operationForChild(t);l&&(o=o.concat(PR(l,i,s,a)))})),i&&(o=o.concat(lR(i,e,r,n))),o}function RR(e,t){const n=t.query,r=DR(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||AN.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=MR(e,n);if(r){const n=LR(r),i=n.path,o=n.queryId,s=QA(i,t);return FR(e,i,new oP(rP(o),s))}return[]}(e,n._path,r):function(e,t){return AR(e,new oP({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return kR(e,n,null,r)}}}}function DR(e,t){const n=OR(t);return e.queryToTagMap.get(n)}function OR(e){return e._path.toString()+"$"+e._queryIdentifier}function MR(e,t){return e.tagToQueryMap.get(t)}function LR(e){const t=e.indexOf("$");return Me(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new UA(e.substr(0,t))}}function FR(e,t,n){const r=e.syncPointTree_.get(t);Me(r,"Missing sync point for query tag that we're tracking");return lR(r,n,AP(e.pendingWriteTree_,t),null)}function UR(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Me(sR,"Reference.ts has not been loaded"),sR)(e._repo,e._path):e}class zR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new zR(t)}node(){return this.node_}}class jR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=HA(this.path_,e);return new jR(this.syncTree_,t)}node(){return TR(this.syncTree_,this.path_)}}const VR=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},BR=function(e,t,n){return e&&"object"===typeof e?(Me(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?qR(e[".sv"],t,n):"object"===typeof e[".sv"]?WR(e[".sv"],t):void Me(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},qR=function(e,t,n){if("timestamp"===e)return n.timestamp;Me(!1,"Unexpected server value: "+e)},WR=function(e,t,n){e.hasOwnProperty("increment")||Me(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Me(!1,"Unexpected increment value: "+r);const i=t.node();if(Me(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},KR=function(e,t,n,r){return GR(t,new jR(n,e),r)},HR=function(e,t,n){return GR(e,new zR(t),n)};function GR(e,t,n){const r=e.getPriority().val(),i=BR(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=BR(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new wN(o,RN(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new wN(i))),r.forEachChild(_N,((e,r)=>{const i=GR(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class QR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function YR(e,t){let n=t instanceof UA?t:new UA(t),r=e,i=jA(n);for(;null!==i;){const e=dt(r.node.children,i)||{children:{},childCount:0};r=new QR(i,r,e),n=BA(n),i=jA(n)}return r}function $R(e){return e.node.value}function JR(e,t){e.node.value=t,nD(e)}function XR(e){return e.node.childCount>0}function ZR(e,t){oA(e.node.children,((n,r)=>{t(new QR(n,e,r))}))}function eD(e,t,n,r){n&&!r&&t(e),ZR(e,(e=>{eD(e,t,!0,r)})),n&&r&&t(e)}function tD(e){return new UA(null===e.parent?e.name:tD(e.parent)+"/"+e.name)}function nD(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===$R(e)&&!XR(e)}(n),i=ht(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,nD(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,nD(e))}(e.parent,e.name,e)}const rD=/[\[\].#$\/\u0000-\u001F\u007F]/,iD=/[\[\].#$\u0000-\u001F\u007F]/,oD=10485760,sD=function(e){return"string"===typeof e&&0!==e.length&&!rD.test(e)},aD=function(e){return"string"===typeof e&&0!==e.length&&!iD.test(e)},lD=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Jx(e)||e&&"object"===typeof e&&ht(e,".sv")},cD=function(e,t,n,r){r&&void 0===t||uD(Et(e,"value"),t,n)},uD=function(e,t,n){const r=n instanceof UA?new XA(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+eN(r));if("function"===typeof t)throw new Error(e+"contains a function "+eN(r)+" with contents = "+t.toString());if(Jx(t))throw new Error(e+"contains "+t.toString()+" "+eN(r));if("string"===typeof t&&t.length>oD/3&&xt(t)>oD)throw new Error(e+"contains a string greater than "+oD+" utf8 bytes "+eN(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(oA(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!sD(t)))throw new Error(e+" contains an invalid key ("+t+") "+eN(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=xt(t),ZA(e)}(r,t),uD(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=xt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+eN(r)+" in addition to actual children.")}},hD=function(e,t,n,r){if(r&&void 0===t)return;const i=Et(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];oA(t,((e,t)=>{const r=new UA(e);if(uD(i,t,HA(n,r)),".priority"===qA(r)&&!lD(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=WA(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!sD(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(YA);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&JA(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},dD=function(e,t,n){if(!n||void 0!==t){if(Jx(t))throw new Error(Et(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lD(t))throw new Error(Et(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},fD=function(e,t,n,r){if((!r||void 0!==n)&&!sD(n))throw new Error(Et(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},pD=function(e,t,n,r){if((!r||void 0!==n)&&!aD(n))throw new Error(Et(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},mD=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pD(e,t,n,r)},gD=function(e,t){if(".info"===jA(t))throw new Error(e+" failed = Can't modify data under /.info/")},yD=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!sD(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),aD(e)}(n))throw new Error(Et(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class vD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bD(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||$A(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function wD(e,t,n){bD(e,n),SD(e,(e=>$A(e,t)))}function _D(e,t,n){bD(e,n),SD(e,(e=>JA(e,t)||JA(t,e)))}function SD(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(ID(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ID(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();qx&&Hx("event: "+n.toString()),cA(r)}}}const kD="repo_interrupt",ED=25;class CD{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$N(),this.transactionQueueTree_=new QR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function TD(e,t,n){if(e.stats_=kA(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new QN(e.repoInfo_,((t,n,r,i)=>{ND(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>PD(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ct(n)}catch(Dz){throw new Error("Invalid authOverride provided: "+Dz)}}e.persistentConnection_=new rN(e.repoInfo_,t,((t,n,r,i)=>{ND(e,t,n,r,i)}),(t=>{PD(e,t)}),(t=>{!function(e,t){oA(t,((t,n)=>{RD(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return IA[n]||(IA[n]=t()),IA[n]}(e.repoInfo_,(()=>new tP(e.stats_,e.server_))),e.infoData_=new YN,e.infoSyncTree_=new bR({startListening:(t,n,r,i)=>{let o=[];const s=e.infoData_.getNode(t._path);return s.isEmpty()||(o=IR(e.infoSyncTree_,t._path,s),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),RD(e,"connected",!1),e.serverSyncTree_=new bR({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);_D(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function xD(e){const t=e.infoData_.getNode(new UA(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function AD(e){return VR({timestamp:xD(e)})}function ND(e,t,n,r,i){e.dataUpdateCount++;const o=new UA(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const t=pt(n,(e=>RN(e)));s=function(e,t,n,r){const i=MR(e,r);if(i){const r=LR(i),o=r.path,s=r.queryId,a=QA(o,t),l=yP.fromObject(n);return FR(e,o,new aP(rP(s),a,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=RN(n);s=ER(e.serverSyncTree_,o,t,i)}else if(r){const t=pt(n,(e=>RN(e)));s=function(e,t,n){const r=yP.fromObject(n);return AR(e,new aP({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=RN(n);s=IR(e.serverSyncTree_,o,t)}let a=o;s.length>0&&(a=qD(e,o)),_D(e.eventQueue_,a,s)}function PD(e,t){RD(e,"connected",t),!1===t&&function(e){zD(e,"onDisconnectEvents");const t=AD(e),n=$N();ZN(e.onDisconnect_,zA(),((r,i)=>{const o=KR(r,i,e.serverSyncTree_,t);JN(n,r,o)}));let r=[];ZN(n,zA(),((t,n)=>{r=r.concat(IR(e.serverSyncTree_,t,n));const i=QD(e,t);qD(e,i)})),e.onDisconnect_=$N(),_D(e.eventQueue_,zA(),r)}(e)}function RD(e,t,n){const r=new UA("/.info/"+t),i=RN(n);e.infoData_.updateSnapshot(r,i);const o=IR(e.infoSyncTree_,r,i);_D(e.eventQueue_,r,o)}function DD(e){return e.nextWriteId_++}function OD(e,t,n,r,i){zD(e,"set",{path:t.toString(),value:n,priority:r});const o=AD(e),s=RN(n,r),a=TR(e.serverSyncTree_,t),l=HR(s,a,o),c=DD(e),u=wR(e.serverSyncTree_,t,l,c,!0);bD(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),((n,r)=>{const o="ok"===n;o||$x("set at "+t+" failed: "+n);const s=SR(e.serverSyncTree_,c,!o);_D(e.eventQueue_,t,s),jD(e,i,n,r)}));const h=QD(e,t);qD(e,h),_D(e.eventQueue_,h,[])}function MD(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&XN(e.onDisconnect_,t),jD(e,n,r,i)}))}function LD(e,t,n,r){const i=RN(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,o)=>{"ok"===n&&JN(e.onDisconnect_,t,i),jD(e,r,n,o)}))}function FD(e,t,n){let r;r=".info"===jA(t._path)?kR(e.infoSyncTree_,t,n):kR(e.serverSyncTree_,t,n),wD(e.eventQueue_,t._path,r)}function UD(e){e.persistentConnection_&&e.persistentConnection_.interrupt(kD)}function zD(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Hx(t,...r)}function jD(e,t,n,r){t&&cA((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const o=new Error(i);o.code=e,t(o)}}))}function VD(e,t,n){return TR(e.serverSyncTree_,t,n)||AN.EMPTY_NODE}function BD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||GD(e,t),$R(t)){const n=KD(e,t);Me(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=VD(e,t,r);let o=i;const s=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Me(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=QA(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const a=o.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{zD(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(SR(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();GD(e,YR(e.transactionQueueTree_,t)),BD(e,e.transactionQueueTree_),_D(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)cA(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{$x("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}qD(e,t)}}),s)}(e,tD(t),n)}else XR(t)&&ZR(t,(t=>{BD(e,t)}))}function qD(e,t){const n=WD(e,t),r=tD(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),s=o.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const o=t[l],c=QA(n,o.path);let u,h=!1;if(Me(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)h=!0,u=o.abortReason,i=i.concat(SR(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=ED)h=!0,u="maxretry",i=i.concat(SR(e.serverSyncTree_,o.currentWriteId,!0));else{const n=VD(e,o.path,s);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){uD("transaction failed: Data returned ",r,o.path);let t=RN(r);"object"===typeof r&&null!=r&&ht(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=o.currentWriteId,l=AD(e),c=HR(t,n,l);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=c,o.currentWriteId=DD(e),s.splice(s.indexOf(a),1),i=i.concat(wR(e.serverSyncTree_,o.path,c,o.currentWriteId,o.applyLocally)),i=i.concat(SR(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(SR(e.serverSyncTree_,o.currentWriteId,!0))}_D(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;GD(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)cA(r[l]);BD(e,e.transactionQueueTree_)}(e,KD(e,n),r),r}function WD(e,t){let n,r=e.transactionQueueTree_;for(n=jA(t);null!==n&&void 0===$R(r);)r=YR(r,n),n=jA(t=BA(t));return r}function KD(e,t){const n=[];return HD(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function HD(e,t,n){const r=$R(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ZR(t,(t=>{HD(e,t,n)}))}function GD(e,t){const n=$R(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,JR(t,n.length>0?n:void 0)}ZR(t,(t=>{GD(e,t)}))}function QD(e,t){const n=tD(WD(e,t)),r=YR(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{YD(e,t)})),YD(e,r),eD(r,(t=>{YD(e,t)})),n}function YD(e,t){const n=$R(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Me(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(Me(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(SR(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?JR(t,void 0):n.length=o+1,_D(e.eventQueue_,tD(t),i);for(let e=0;e<r.length;e++)cA(r[e])}}const $D=function(e,t){const n=JD(e),r=n.namespace;"firebase.com"===n.domain&&Yx(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Yx("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$x("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new bA(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new UA(n.pathString)}},JD=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(Dz){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$x("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},XD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ZD=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=XD.charAt(n%64),n=Math.floor(n/64);Me(0===n,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=XD.charAt(t[i]);return Me(20===s.length,"nextPushId: Length should be 20."),s}}();class eO{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ct(this.snapshot.exportVal())}}class tO{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class nO{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Me(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class rO{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Ge;return MD(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){gD("OnDisconnect.remove",this._path);const e=new Ge;return LD(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){gD("OnDisconnect.set",this._path),cD("OnDisconnect.set",e,this._path,!1);const t=new Ge;return LD(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){gD("OnDisconnect.setWithPriority",this._path),cD("OnDisconnect.setWithPriority",e,this._path,!1),dD("OnDisconnect.setWithPriority",t,!1);const n=new Ge;return function(e,t,n,r,i){const o=RN(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),((n,r)=>{"ok"===n&&JN(e.onDisconnect_,t,o),jD(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){gD("OnDisconnect.update",this._path),hD("OnDisconnect.update",e,this._path,!1);const t=new Ge;return function(e,t,n,r){if(ft(n))return Hx("onDisconnect().update() called with empty data.  Don't do anything."),void jD(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,o)=>{"ok"===i&&oA(n,((n,r)=>{const i=RN(r);JN(e.onDisconnect_,HA(t,n),i)})),jD(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class iO{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return GA(this._path)?null:qA(this._path)}get ref(){return new lO(this._repo,this._path)}get _queryIdentifier(){const e=GN(this._queryParams),t=rA(e);return"{}"===t?"default":t}get _queryObject(){return GN(this._queryParams)}isEqual(e){if(!((e=At(e))instanceof iO))return!1;const t=this._repo===e._repo,n=$A(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function oO(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function sO(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===lN){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Xx)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Zx)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===_N){if(null!=t&&!lD(t)||null!=n&&!lD(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Me(e.getIndex()instanceof DN||e.getIndex()===ON,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function aO(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class lO extends iO{constructor(e,t){super(e,t,new BN,!1)}get parent(){const e=KA(this._path);return null===e?null:new lO(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class cO{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new UA(e),n=dO(this.ref,e);return new cO(this._node.getChild(t),n,_N)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new cO(n,dO(this.ref,t),_N))))}hasChild(e){const t=new UA(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function uO(e,t){return(e=At(e))._checkNotDeleted("ref"),void 0!==t?dO(e._root,t):e._root}function hO(e,t){(e=At(e))._checkNotDeleted("refFromURL");const n=$D(t,e._repo.repoInfo_.nodeAdmin);yD("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Yx("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),uO(e,n.path.toString())}function dO(e,t){return null===jA((e=At(e))._path)?mD("child","path",t,!1):pD("child","path",t,!1),new lO(e._repo,HA(e._path,t))}function fO(e,t){e=At(e),gD("set",e._path),cD("set",t,e._path,!1);const n=new Ge;return OD(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function pO(e,t){hD("update",t,e._path,!1);const n=new Ge;return function(e,t,n,r){zD(e,"update",{path:t.toString(),value:n});let i=!0;const o=AD(e),s={};if(oA(n,((n,r)=>{i=!1,s[n]=KR(HA(t,n),RN(r),e.serverSyncTree_,o)})),i)Hx("update() called with empty data.  Don't do anything."),jD(0,r,"ok",void 0);else{const i=DD(e),o=_R(e.serverSyncTree_,t,s,i);bD(e.eventQueue_,o),e.server_.merge(t.toString(),n,((n,o)=>{const s="ok"===n;s||$x("update at "+t+" failed: "+n);const a=SR(e.serverSyncTree_,i,!s),l=a.length>0?qD(e,t):t;_D(e.eventQueue_,l,a),jD(0,r,n,o)})),oA(n,(n=>{const r=QD(e,HA(t,n));qD(e,r)})),_D(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function mO(e){e=At(e);const t=new nO((()=>{})),n=new gO(t);return function(e,t,n){const r=xR(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=RN(r).withIndex(t._queryParams.getIndex());let o;if(CR(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())o=IR(e.serverSyncTree_,t._path,i);else{const n=DR(e.serverSyncTree_,t);o=ER(e.serverSyncTree_,t._path,i,n)}return _D(e.eventQueue_,t._path,o),kR(e.serverSyncTree_,t,n,null,!0),i}),(n=>(zD(e,"get for query "+ct(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new cO(t,new lO(e._repo,e._path),e._queryParams.getIndex())))}class gO{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new eO("value",this,new cO(e.snapshotNode,new lO(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new tO(this,e,t):null}matches(e){return e instanceof gO&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class yO{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new tO(this,e,t):null}createEvent(e,t){Me(null!=e.childName,"Child events should have a childName.");const n=dO(new lO(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new eO(e.type,this,new cO(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof yO&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function vO(e,t,n,r,i){let o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{FD(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const s=new nO(n,o||void 0),a="value"===t?new gO(s):new yO(t,s);return function(e,t,n){let r;r=".info"===jA(t._path)?CR(e.infoSyncTree_,t,n):CR(e.serverSyncTree_,t,n),wD(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>FD(e._repo,e,a)}function bO(e,t,n,r){return vO(e,"value",t,n,r)}function wO(e,t,n,r){return vO(e,"child_added",t,n,r)}function _O(e,t,n,r){return vO(e,"child_changed",t,n,r)}function SO(e,t,n,r){return vO(e,"child_moved",t,n,r)}function IO(e,t,n,r){return vO(e,"child_removed",t,n,r)}function kO(e,t,n){let r=null;const i=n?new nO(n):null;"value"===t?r=new gO(i):t&&(r=new yO(t,i)),FD(e._repo,e,r)}class EO{}class CO extends EO{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){cD("endAt",this._value,e._path,!0);const t=WN(e._queryParams,this._value,this._key);if(aO(t),sO(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new iO(e._repo,e._path,t,e._orderByCalled)}}class TO extends EO{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){cD("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===lN||n?WN(e,t,n):WN(e,t,Xx),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(aO(t),sO(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new iO(e._repo,e._path,t,e._orderByCalled)}}class xO extends EO{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){cD("startAt",this._value,e._path,!0);const t=qN(e._queryParams,this._value,this._key);if(aO(t),sO(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new iO(e._repo,e._path,t,e._orderByCalled)}}class AO extends EO{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){cD("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===lN||n?qN(e,t,n):qN(e,t,Zx),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(aO(t),sO(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new iO(e._repo,e._path,t,e._orderByCalled)}}class NO extends EO{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new iO(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class PO extends EO{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new iO(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class RO extends EO{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){oO(e,"orderByChild");const t=new UA(this._path);if(GA(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new DN(t),r=KN(e._queryParams,n);return sO(r),new iO(e._repo,e._path,r,!0)}}class DO extends EO{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){oO(e,"orderByKey");const t=KN(e._queryParams,lN);return sO(t),new iO(e._repo,e._path,t,!0)}}class OO extends EO{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){oO(e,"orderByPriority");const t=KN(e._queryParams,_N);return sO(t),new iO(e._repo,e._path,t,!0)}}class MO extends EO{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){oO(e,"orderByValue");const t=KN(e._queryParams,ON);return sO(t),new iO(e._repo,e._path,t,!0)}}class LO extends EO{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(cD("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new CO(this._value,this._key)._apply(new xO(this._value,this._key)._apply(e))}}function FO(e){let t=At(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const o of r)t=o._apply(t);return t}!function(e){Me(!oR,"__referenceConstructor has already been defined"),oR=e}(lO),function(e){Me(!sR,"__referenceConstructor has already been defined"),sR=e}(lO);const UO="FIREBASE_DATABASE_EMULATOR_HOST",zO={};let jO=!1;function VO(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||Yx("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hx("Using default host for project ",e.options.projectId),o="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let s,a,l=$D(o,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/chat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[UO]),a?(s=!0,o="http://".concat(a,"?ns=").concat(c.namespace),l=$D(o,i),c=l.repoInfo):s=!l.repoInfo.secure;const u=i&&s?new fA(fA.OWNER):new dA(e.name,e.options,t);yD("Invalid Firebase Database URL",l),GA(l.path)||Yx("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=zO[t.name];i||(i={},zO[t.name]=i);let o=i[e.toURLString()];o&&Yx("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new CD(e,jO,n,r),i[e.toURLString()]=o,o}(c,e,u,new hA(e.name,n));return new BO(h,e)}class BO{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(TD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new lO(this._repo,zA())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=zO[t];n&&n[e.key]===e||Yx("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),UD(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Yx("Cannot call "+e+" on a deleted database.")}}function qO(){PA.IS_TRANSPORT_INITIALIZED&&$x("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function WO(){qO(),TA.forceDisallow()}function KO(){qO(),NA.forceDisallow(),TA.forceAllow()}function HO(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=At(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Yx("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Yx('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new fA(fA.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Qe(r.mockUserToken,e.app.options.projectId);o=new fA(t)}!function(e,t,n,r){e.repoInfo_=new bA("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}function GO(e){var t;(e=At(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(kD)}function QO(e,t){Kx(e,t)}const YO={".sv":"timestamp"};class $O{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function JO(e,t,n){var r;if(e=At(e),gD("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,o=new Ge,s=bO(e,(()=>{}));return function(e,t,n,r,i,o){zD(e,"transaction on "+t);const s={path:t,update:n,onComplete:r,status:null,order:jx(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=VD(e,t,void 0);s.currentInputSnapshot=a;const l=s.update(a.val());if(void 0===l)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{uD("transaction failed: Data returned ",l,s.path),s.status=0;const n=YR(e.transactionQueueTree_,t),r=$R(n)||[];let i;r.push(s),JR(n,r),"object"===typeof l&&null!==l&&ht(l,".priority")?(i=dt(l,".priority"),Me(lD(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(TR(e.serverSyncTree_,t)||AN.EMPTY_NODE).getPriority().val();const o=AD(e),c=RN(l,i),u=HR(c,a,o);s.currentOutputSnapshotRaw=c,s.currentOutputSnapshotResolved=u,s.currentWriteId=DD(e);const h=wR(e.serverSyncTree_,t,u,s.currentWriteId,s.applyLocally);_D(e.eventQueue_,t,h),BD(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,r)=>{let i=null;t?o.reject(t):(i=new cO(r,new lO(e._repo,e._path),_N),o.resolve(new $O(n,i)))}),s,i),o.promise}rN.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},rN.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Dx(Cn),yn(new Nt("database",((e,t)=>{let{instanceIdentifier:n}=t;return VO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Rn(Nx,Px,e),Rn(Nx,Px,"esm2017")}();const XO=new Vt("@firebase/database-compat"),ZO=function(e){const t="FIREBASE WARNING: "+e;XO.warn(t)};class eM{constructor(e){this._delegate=e}cancel(e){kt("OnDisconnect.cancel",0,1,arguments.length),Ct("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){kt("OnDisconnect.remove",0,1,arguments.length),Ct("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){kt("OnDisconnect.set",1,2,arguments.length),Ct("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){kt("OnDisconnect.setWithPriority",2,3,arguments.length),Ct("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if(kt("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,ZO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ct("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class tM{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return kt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class nM{constructor(e,t){this._database=e,this._delegate=t}val(){return kt("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return kt("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return kt("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return kt("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return kt("DataSnapshot.child",0,1,arguments.length),e=String(e),pD("DataSnapshot.child","path",e,!1),new nM(this._database,this._delegate.child(e))}hasChild(e){return kt("DataSnapshot.hasChild",1,1,arguments.length),pD("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return kt("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return kt("DataSnapshot.forEach",1,1,arguments.length),Ct("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new nM(this._database,t))))}hasChildren(){return kt("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return kt("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return kt("DataSnapshot.ref",0,0,arguments.length),new iM(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class rM{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;kt("Query.on",2,4,arguments.length),Ct("Query.on","callback",t,!1);const o=rM.getCancelAndContextArgs_("Query.on",n,r),s=(e,n)=>{t.call(o.context,new nM(this.database,e),n)};s.userCallback=t,s.context=o.context;const a=null===(i=o.cancel)||void 0===i?void 0:i.bind(o.context);switch(e){case"value":return bO(this._delegate,s,a),t;case"child_added":return wO(this._delegate,s,a),t;case"child_removed":return IO(this._delegate,s,a),t;case"child_changed":return _O(this._delegate,s,a),t;case"child_moved":return SO(this._delegate,s,a),t;default:throw new Error(Et("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(kt("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Et(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Ct("Query.off","callback",t,!0),Tt("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,kO(this._delegate,e,r)}else kO(this._delegate,e)}get(){return mO(this._delegate).then((e=>new nM(this.database,e)))}once(e,t,n,r){kt("Query.once",1,4,arguments.length),Ct("Query.once","callback",t,!0);const i=rM.getCancelAndContextArgs_("Query.once",n,r),o=new Ge,s=(e,n)=>{const r=new nM(this.database,e);t&&t.call(i.context,r,n),o.resolve(r)};s.userCallback=t,s.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),o.reject(e)};switch(e){case"value":bO(this._delegate,s,a,{onlyOnce:!0});break;case"child_added":wO(this._delegate,s,a,{onlyOnce:!0});break;case"child_removed":IO(this._delegate,s,a,{onlyOnce:!0});break;case"child_changed":_O(this._delegate,s,a,{onlyOnce:!0});break;case"child_moved":SO(this._delegate,s,a,{onlyOnce:!0});break;default:throw new Error(Et("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return kt("Query.limitToFirst",1,1,arguments.length),new rM(this.database,FO(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new NO(e)}(e)))}limitToLast(e){return kt("Query.limitToLast",1,1,arguments.length),new rM(this.database,FO(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new PO(e)}(e)))}orderByChild(e){return kt("Query.orderByChild",1,1,arguments.length),new rM(this.database,FO(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return pD("orderByChild","path",e,!1),new RO(e)}(e)))}orderByKey(){return kt("Query.orderByKey",0,0,arguments.length),new rM(this.database,FO(this._delegate,new DO))}orderByPriority(){return kt("Query.orderByPriority",0,0,arguments.length),new rM(this.database,FO(this._delegate,new OO))}orderByValue(){return kt("Query.orderByValue",0,0,arguments.length),new rM(this.database,FO(this._delegate,new MO))}startAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return kt("Query.startAt",0,2,arguments.length),new rM(this.database,FO(this._delegate,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return fD("startAt","key",t,!0),new xO(e,t)}(e,t)))}startAfter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return kt("Query.startAfter",0,2,arguments.length),new rM(this.database,FO(this._delegate,function(e,t){return fD("startAfter","key",t,!0),new AO(e,t)}(e,t)))}endAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return kt("Query.endAt",0,2,arguments.length),new rM(this.database,FO(this._delegate,function(e,t){return fD("endAt","key",t,!0),new CO(e,t)}(e,t)))}endBefore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return kt("Query.endBefore",0,2,arguments.length),new rM(this.database,FO(this._delegate,function(e,t){return fD("endBefore","key",t,!0),new TO(e,t)}(e,t)))}equalTo(e,t){return kt("Query.equalTo",1,2,arguments.length),new rM(this.database,FO(this._delegate,function(e,t){return fD("equalTo","key",t,!0),new LO(e,t)}(e,t)))}toString(){return kt("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return kt("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(kt("Query.isEqual",1,1,arguments.length),!(e instanceof rM)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Ct(e,"cancel",r.cancel,!0),r.context=n,Tt(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Et(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new iM(this.database,new lO(this._delegate._repo,this._delegate._path))}}class iM extends rM{constructor(e,t){super(e,new iO(t._repo,t._path,new BN,!1)),this.database=e,this._delegate=t}getKey(){return kt("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return kt("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new iM(this.database,dO(this._delegate,e))}getParent(){kt("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new iM(this.database,e):null}getRoot(){return kt("Reference.root",0,0,arguments.length),new iM(this.database,this._delegate.root)}set(e,t){kt("Reference.set",1,2,arguments.length),Ct("Reference.set","onComplete",t,!0);const n=fO(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if(kt("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,ZO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}gD("Reference.update",this._delegate._path),Ct("Reference.update","onComplete",t,!0);const n=pO(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){kt("Reference.setWithPriority",2,3,arguments.length),Ct("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(gD("setWithPriority",e._path),cD("setWithPriority",t,e._path,!1),dD("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new Ge;return OD(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){kt("Reference.remove",0,1,arguments.length),Ct("Reference.remove","onComplete",e,!0);const t=function(e){return gD("remove",e._path),fO(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){kt("Reference.transaction",1,3,arguments.length),Ct("Reference.transaction","transactionUpdate",e,!1),Ct("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Et(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=JO(this._delegate,e,{applyLocally:n}).then((e=>new tM(e.committed,new nM(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){kt("Reference.setPriority",1,2,arguments.length),Ct("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=At(e),gD("setPriority",e._path),dD("setPriority",t,!1);const n=new Ge;return OD(e._repo,HA(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){kt("Reference.push",0,2,arguments.length),Ct("Reference.push","onComplete",t,!0);const n=function(e,t){e=At(e),gD("push",e._path),cD("push",t,e._path,!0);const n=xD(e._repo),r=ZD(n),i=dO(e,r),o=dO(e,r);let s;return s=null!=t?fO(o,t).then((()=>o)):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}(this._delegate,e),r=n.then((e=>new iM(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new iM(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return gD("Reference.onDisconnect",this._delegate._path),new eM(new rO(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class oM{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:WO,forceLongPolling:KO}}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};HO(this._delegate,e,t,n)}ref(e){if(kt("database.ref",0,1,arguments.length),e instanceof iM){const t=hO(this._delegate,e.toString());return new iM(this,t)}{const t=uO(this._delegate,e);return new iM(this,t)}}refFromURL(e){kt("database.refFromURL",1,1,arguments.length);const t=hO(this._delegate,e);return new iM(this,t)}goOffline(){return kt("database.goOffline",0,0,arguments.length),function(e){(e=At(e))._checkNotDeleted("goOffline"),UD(e._repo)}(this._delegate)}goOnline(){return kt("database.goOnline",0,0,arguments.length),GO(this._delegate)}}oM.ServerValue={TIMESTAMP:YO,increment:e=>function(e){return{".sv":{increment:e}}}(e)};var sM=Object.freeze({__proto__:null,initStandalone:function(e){let{app:t,url:n,version:r,customAuthImpl:i,customAppCheckImpl:o,namespace:s,nodeAdmin:a=!1}=e;Dx(r);const l=new Ot("database-standalone"),c=new Rt("auth-internal",l);let u;return c.setComponent(new Nt("auth-internal",(()=>i),"PRIVATE")),o&&(u=new Rt("app-check-internal",l),u.setComponent(new Nt("app-check-internal",(()=>o),"PRIVATE"))),{instance:new oM(VO(t,c,u,n,a),t),namespace:s}}});const aM=oM.ServerValue;function lM(e,t){let{uid:n,displayName:r,email:i,photoURL:o}=e;if(t.find((e=>e.uid===n)))return;const s={uid:n,name:r,email:i,photoURL:o};Jn.firestore().collection("users").add(s)}!function(e){e.INTERNAL.registerComponent(new Nt("database-compat",((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new oM(i,r)}),"PUBLIC").setServiceProps({Reference:iM,Query:rM,Database:oM,DataSnapshot:nM,enableLogging:QO,INTERNAL:sM,ServerValue:aM}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","1.0.4")}(Jn);let cM=0;const uM=i["useId".toString()];function hM(e){if(void 0!==uM){const t=uM();return null!=e?e:t}return function(e){const[t,n]=r.useState(e),i=e||t;return r.useEffect((()=>{null==t&&(cM+=1,n("mui-".concat(cM)))}),[t]),i}(e)}function dM(e){return e&&e.ownerDocument||document}function fM(e){return dM(e).defaultView||window}function pM(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}const mM=["onChange","maxRows","minRows","style","value"];function gM(e){return parseInt(e,10)||0}const yM={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const vM=r.forwardRef((function(e,t){const{onChange:n,maxRows:i,minRows:o=1,style:s,value:a}=e,l=(0,cE.A)(e,mM),{current:c}=r.useRef(null!=a),u=r.useRef(null),h=QC(t,u),d=r.useRef(null),f=r.useCallback((()=>{const t=u.current,n=fM(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0,overflowing:!1};const r=d.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");const s=n.boxSizing,a=gM(n.paddingBottom)+gM(n.paddingTop),l=gM(n.borderBottomWidth)+gM(n.borderTopWidth),c=r.scrollHeight;r.value="x";const h=r.scrollHeight;let f=c;o&&(f=Math.max(Number(o)*h,f)),i&&(f=Math.min(Number(i)*h,f)),f=Math.max(f,h);return{outerHeightStyle:f+("border-box"===s?a+l:0),overflowing:Math.abs(f-c)<=1}}),[i,o,e.placeholder]),p=r.useCallback((()=>{const e=f();if(void 0===(t=e)||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflowing)return;var t;const n=u.current;n.style.height="".concat(e.outerHeightStyle,"px"),n.style.overflow=e.overflowing?"hidden":""}),[f]);$C((()=>{const e=()=>{p()};let t;const n=pM(e),r=u.current,i=fM(r);let o;return i.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(o=new ResizeObserver(e),o.observe(r)),()=>{n.clear(),cancelAnimationFrame(t),i.removeEventListener("resize",n),o&&o.disconnect()}}),[f,p]),$C((()=>{p()}));return(0,Jk.jsxs)(r.Fragment,{children:[(0,Jk.jsx)("textarea",(0,uE.A)({value:a,onChange:e=>{c||p(),n&&n(e)},ref:h,rows:o,style:s},l)),(0,Jk.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:d,tabIndex:-1,style:(0,uE.A)({},yM,s,{paddingTop:0,paddingBottom:0})})]})}));function bM(e){return"string"===typeof e}function wM(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const _M=r.createContext(void 0);function SM(){return r.useContext(_M)}const IM=$C;var kM=n(869);const EM=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=sC(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,Jk.jsx)(kM.A,{styles:o})};const CM=function(e){return(0,Jk.jsx)(EM,(0,uE.A)({},e,{defaultTheme:JE,themeId:XE}))};function TM(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function xM(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(TM(e.value)&&""!==e.value||t&&TM(e.defaultValue)&&""!==e.defaultValue)}function AM(e){return mC("MuiInputBase",e)}const NM=gC("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),PM=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],RM=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat(uC(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},DM=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},OM=tC("div",{name:"MuiInputBase",slot:"Root",overridesResolver:RM})((e=>{let{theme:t,ownerState:n}=e;return(0,uE.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(NM.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&(0,uE.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),MM=tC("input",{name:"MuiInputBase",slot:"Input",overridesResolver:DM})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,i=(0,uE.A)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),o={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,uE.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(NM.formControl," &")]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},["&.".concat(NM.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),LM=(0,Jk.jsx)(CM,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),FM=r.forwardRef((function(e,t){var n;const i=lC({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:s,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:h,disabled:d,disableInjectingGlobalStyles:f,endAdornment:p,fullWidth:m=!1,id:g,inputComponent:y="input",inputProps:v={},inputRef:b,maxRows:w,minRows:_,multiline:S=!1,name:I,onBlur:k,onChange:E,onClick:C,onFocus:T,onKeyDown:x,onKeyUp:A,placeholder:N,readOnly:P,renderSuffix:R,rows:D,slotProps:O={},slots:M={},startAdornment:L,type:F="text",value:U}=i,z=(0,cE.A)(i,PM),j=null!=v.value?v.value:U,{current:V}=r.useRef(null!=j),B=r.useRef(),q=r.useCallback((e=>{0}),[]),W=YC(B,b,v.ref,q),[K,H]=r.useState(!1),G=SM();const Q=wM({props:i,muiFormControl:G,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Q.focused=G?G.focused:K,r.useEffect((()=>{!G&&d&&K&&(H(!1),k&&k())}),[G,d,K,k]);const Y=G&&G.onFilled,$=G&&G.onEmpty,J=r.useCallback((e=>{xM(e)?Y&&Y():$&&$()}),[Y,$]);IM((()=>{V&&J({value:j})}),[j,J,V]);r.useEffect((()=>{J(B.current)}),[]);let X=y,Z=v;S&&"input"===X&&(Z=D?(0,uE.A)({type:void 0,minRows:D,maxRows:D},Z):(0,uE.A)({type:void 0,maxRows:w,minRows:_},Z),X=vM);r.useEffect((()=>{G&&G.setAdornedStart(Boolean(L))}),[G,L]);const ee=(0,uE.A)({},i,{color:Q.color||"primary",disabled:Q.disabled,endAdornment:p,error:Q.error,focused:Q.focused,formControl:G,fullWidth:m,hiddenLabel:Q.hiddenLabel,multiline:S,size:Q.size,startAdornment:L,type:F}),te=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:d,startAdornment:f,type:p}=e;return fE({root:["root","color".concat(uC(n)),r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",d&&"medium"!==d&&"size".concat(uC(d)),u&&"multiline",f&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",u&&"inputMultiline","small"===d&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",o&&"inputAdornedEnd",h&&"readOnly"]},AM,t)})(ee),ne=M.root||c.Root||OM,re=O.root||u.root||{},ie=M.input||c.Input||MM;return Z=(0,uE.A)({},Z,null!=(n=O.input)?n:u.input),(0,Jk.jsxs)(r.Fragment,{children:[!f&&LM,(0,Jk.jsxs)(ne,(0,uE.A)({},re,!bM(ne)&&{ownerState:(0,uE.A)({},ee,re.ownerState)},{ref:t,onClick:e=>{B.current&&e.currentTarget===e.target&&B.current.focus(),C&&C(e)}},z,{className:dE(te.root,re.className,l,P&&"MuiInputBase-readOnly"),children:[L,(0,Jk.jsx)(_M.Provider,{value:null,children:(0,Jk.jsx)(ie,(0,uE.A)({ownerState:ee,"aria-invalid":Q.error,"aria-describedby":o,autoComplete:s,autoFocus:a,defaultValue:h,disabled:Q.disabled,id:g,onAnimationStart:e=>{J("mui-auto-fill-cancel"===e.animationName?B.current:{value:"x"})},name:I,placeholder:N,readOnly:P,required:Q.required,rows:D,value:j,onKeyDown:x,onKeyUp:A,type:F},Z,!bM(ie)&&{as:X,ownerState:(0,uE.A)({},ee,Z.ownerState)},{ref:W,className:dE(te.input,Z.className,P&&"MuiInputBase-readOnly"),onBlur:e=>{k&&k(e),v.onBlur&&v.onBlur(e),G&&G.onBlur?G.onBlur(e):H(!1)},onChange:function(e){if(!V){const t=e.target||B.current;if(null==t)throw new Error((0,mE.A)(1));J({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];v.onChange&&v.onChange(e,...n),E&&E(e,...n)},onFocus:e=>{Q.disabled?e.stopPropagation():(T&&T(e),v.onFocus&&v.onFocus(e),G&&G.onFocus?G.onFocus(e):H(!0))}}))}),p,R?R((0,uE.A)({},Q,{startAdornment:L})):null]}))]})})),UM=FM;function zM(e){return mC("MuiInput",e)}const jM=(0,uE.A)({},NM,gC("MuiInput",["root","underline","input"])),VM=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],BM=tC(OM,{shouldForwardProp:e=>ZE(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...RM(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;let r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),(0,uE.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(jM.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(jM.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(jM.disabled,", .").concat(jM.error,"):before")]:{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}},["&.".concat(jM.disabled,":before")]:{borderBottomStyle:"dotted"}})})),qM=tC(MM,{name:"MuiInput",slot:"Input",overridesResolver:DM})({}),WM=r.forwardRef((function(e,t){var n,r,i,o;const s=lC({props:e,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:h="input",multiline:d=!1,slotProps:f,slots:p={},type:m="text"}=s,g=(0,cE.A)(s,VM),y=(e=>{const{classes:t,disableUnderline:n}=e,r=fE({root:["root",!n&&"underline"],input:["input"]},zM,t);return(0,uE.A)({},t,r)})(s),v={root:{ownerState:{disableUnderline:a}}},b=(null!=f?f:c)?(0,gE.A)(null!=f?f:c,v):v,w=null!=(n=null!=(r=p.root)?r:l.Root)?n:BM,_=null!=(i=null!=(o=p.input)?o:l.Input)?i:qM;return(0,Jk.jsx)(UM,(0,uE.A)({slots:{root:w,input:_},slotProps:b,fullWidth:u,inputComponent:h,multiline:d,ref:t,type:m},g,{classes:y}))}));WM.muiName="Input";const KM=WM;function HM(e){return mC("MuiFilledInput",e)}const GM=(0,uE.A)({},NM,gC("MuiFilledInput",["root","underline","input"])),QM=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],YM=tC(OM,{shouldForwardProp:e=>ZE(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...RM(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;var r;const i="light"===t.palette.mode,o=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,uE.A)({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},["&.".concat(GM.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},["&.".concat(GM.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat(null==(r=(t.vars||t).palette[n.color||"primary"])?void 0:r.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(GM.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(GM.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(GM.disabled,", .").concat(GM.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(GM.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,uE.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),$M=tC(MM,{name:"MuiFilledInput",slot:"Input",overridesResolver:DM})((e=>{let{theme:t,ownerState:n}=e;return(0,uE.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),JM=r.forwardRef((function(e,t){var n,r,i,o;const s=lC({props:e,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:h=!1,slotProps:d,slots:f={},type:p="text"}=s,m=(0,cE.A)(s,QM),g=(0,uE.A)({},s,{fullWidth:c,inputComponent:u,multiline:h,type:p}),y=(e=>{const{classes:t,disableUnderline:n}=e,r=fE({root:["root",!n&&"underline"],input:["input"]},HM,t);return(0,uE.A)({},t,r)})(s),v={root:{ownerState:g},input:{ownerState:g}},b=(null!=d?d:l)?(0,gE.A)(v,null!=d?d:l):v,w=null!=(n=null!=(r=f.root)?r:a.Root)?n:YM,_=null!=(i=null!=(o=f.input)?o:a.Input)?i:$M;return(0,Jk.jsx)(UM,(0,uE.A)({slots:{root:w,input:_},componentsProps:b,fullWidth:c,inputComponent:u,multiline:h,ref:t,type:p},m,{classes:y}))}));JM.muiName="Input";const XM=JM;var ZM;const eL=["children","classes","className","label","notched"],tL=tC("fieldset",{shouldForwardProp:ZE})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),nL=tC("legend",{shouldForwardProp:ZE})((e=>{let{ownerState:t,theme:n}=e;return(0,uE.A)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,uE.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function rL(e){return mC("MuiOutlinedInput",e)}const iL=(0,uE.A)({},NM,gC("MuiOutlinedInput",["root","notchedOutline","input"])),oL=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],sL=tC(OM,{shouldForwardProp:e=>ZE(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:RM})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,uE.A)({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(iL.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(iL.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):r}},["&.".concat(iL.focused," .").concat(iL.notchedOutline)]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},["&.".concat(iL.error," .").concat(iL.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(iL.disabled," .").concat(iL.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,uE.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),aL=tC((function(e){const{className:t,label:n,notched:r}=e,i=(0,cE.A)(e,eL),o=null!=n&&""!==n,s=(0,uE.A)({},e,{notched:r,withLabel:o});return(0,Jk.jsx)(tL,(0,uE.A)({"aria-hidden":!0,className:t,ownerState:s},i,{children:(0,Jk.jsx)(nL,{ownerState:s,children:o?(0,Jk.jsx)("span",{children:n}):ZM||(ZM=(0,Jk.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),lL=tC(MM,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:DM})((e=>{let{theme:t,ownerState:n}=e;return(0,uE.A)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),cL=r.forwardRef((function(e,t){var n,i,o,s,a;const l=lC({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:h="input",label:d,multiline:f=!1,notched:p,slots:m={},type:g="text"}=l,y=(0,cE.A)(l,oL),v=(e=>{const{classes:t}=e,n=fE({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},rL,t);return(0,uE.A)({},t,n)})(l),b=SM(),w=wM({props:l,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),_=(0,uE.A)({},l,{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:b,fullWidth:u,hiddenLabel:w.hiddenLabel,multiline:f,size:w.size,type:g}),S=null!=(n=null!=(i=m.root)?i:c.Root)?n:sL,I=null!=(o=null!=(s=m.input)?s:c.Input)?o:lL;return(0,Jk.jsx)(UM,(0,uE.A)({slots:{root:S,input:I},renderSuffix:e=>(0,Jk.jsx)(aL,{ownerState:_,className:v.notchedOutline,label:null!=d&&""!==d&&w.required?a||(a=(0,Jk.jsxs)(r.Fragment,{children:[d,"\u2009","*"]})):d,notched:"undefined"!==typeof p?p:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:h,multiline:f,ref:t,type:g},y,{classes:(0,uE.A)({},v,{notchedOutline:null})}))}));cL.muiName="Input";const uL=cL;function hL(e){return mC("MuiFormLabel",e)}const dL=gC("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),fL=["children","className","color","component","disabled","error","filled","focused","required"],pL=tC("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,uE.A)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((e=>{let{theme:t,ownerState:n}=e;return(0,uE.A)({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(dL.focused)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(dL.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(dL.error)]:{color:(t.vars||t).palette.error.main}})})),mL=tC("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{["&.".concat(dL.error)]:{color:(t.vars||t).palette.error.main}}})),gL=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiFormLabel"}),{children:r,className:i,component:o="label"}=n,s=(0,cE.A)(n,fL),a=wM({props:n,muiFormControl:SM(),states:["color","required","focused","disabled","error","filled"]}),l=(0,uE.A)({},n,{color:a.color||"primary",component:o,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=e;return fE({root:["root","color".concat(uC(n)),i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]},hL,t)})(l);return(0,Jk.jsxs)(pL,(0,uE.A)({as:o,ownerState:l,className:dE(c.root,i),ref:t},s,{children:[r,a.required&&(0,Jk.jsxs)(mL,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),yL=gL;function vL(e){return mC("MuiInputLabel",e)}gC("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const bL=["disableAnimation","margin","shrink","variant","className"],wL=tC(yL,{shouldForwardProp:e=>ZE(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(dL.asterisk)]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,uE.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,uE.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,uE.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,uE.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),_L=r.forwardRef((function(e,t){const n=lC({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:i,className:o}=n,s=(0,cE.A)(n,bL),a=SM();let l=i;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const c=wM({props:n,muiFormControl:a,states:["size","variant","required","focused"]}),u=(0,uE.A)({},n,{disableAnimation:r,formControl:a,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),h=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=e,l=fE({root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&"size".concat(uC(r)),s],asterisk:[a&&"asterisk"]},vL,t);return(0,uE.A)({},t,l)})(u);return(0,Jk.jsx)(wL,(0,uE.A)({"data-shrink":l,ownerState:u,ref:t,className:dE(h.root,o)},s,{classes:h}))})),SL=_L;const IL=function(e,t){var n,i;return r.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(i=e.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)};function kL(e){return mC("MuiFormControl",e)}gC("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const EL=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],CL=tC("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,uE.A)({},t.root,t["margin".concat(uC(n.margin))],n.fullWidth&&t.fullWidth)}})((e=>{let{ownerState:t}=e;return(0,uE.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),TL=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiFormControl"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:d=!1,margin:f="none",required:p=!1,size:m="medium",variant:g="outlined"}=n,y=(0,cE.A)(n,EL),v=(0,uE.A)({},n,{color:s,component:a,disabled:l,error:c,fullWidth:h,hiddenLabel:d,margin:f,required:p,size:m,variant:g}),b=(e=>{const{classes:t,margin:n,fullWidth:r}=e;return fE({root:["root","none"!==n&&"margin".concat(uC(n)),r&&"fullWidth"]},kL,t)})(v),[w,_]=r.useState((()=>{let e=!1;return i&&r.Children.forEach(i,(t=>{if(!IL(t,["Input","Select"]))return;const n=IL(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[S,I]=r.useState((()=>{let e=!1;return i&&r.Children.forEach(i,(t=>{IL(t,["Input","Select"])&&(xM(t.props,!0)||xM(t.props.inputProps,!0))&&(e=!0)})),e})),[k,E]=r.useState(!1);l&&k&&E(!1);const C=void 0===u||l?k:u;let T;const x=r.useMemo((()=>({adornedStart:w,setAdornedStart:_,color:s,disabled:l,error:c,filled:S,focused:C,fullWidth:h,hiddenLabel:d,size:m,onBlur:()=>{E(!1)},onEmpty:()=>{I(!1)},onFilled:()=>{I(!0)},onFocus:()=>{E(!0)},registerEffect:T,required:p,variant:g})),[w,s,l,c,S,C,h,d,T,p,m,g]);return(0,Jk.jsx)(_M.Provider,{value:x,children:(0,Jk.jsx)(CL,(0,uE.A)({as:a,ownerState:v,className:dE(b.root,o),ref:t},y,{children:i}))})})),xL=TL;function AL(e){return mC("MuiFormHelperText",e)}const NL=gC("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var PL;const RL=["children","className","component","disabled","error","filled","focused","margin","required","variant"],DL=tC("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat(uC(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return(0,uE.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(NL.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(NL.error)]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),OL=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p"}=n,s=(0,cE.A)(n,RL),a=wM({props:n,muiFormControl:SM(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,uE.A)({},n,{component:o,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=e;return fE({root:["root",i&&"disabled",o&&"error",r&&"size".concat(uC(r)),n&&"contained",a&&"focused",s&&"filled",l&&"required"]},AL,t)})(l);return(0,Jk.jsx)(DL,(0,uE.A)({as:o,ownerState:l,className:dE(c.root,i),ref:t},s,{children:" "===r?PL||(PL=(0,Jk.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),ML=OL;n(805);const LL=dM;function FL(e,t,n){return void 0===e||bM(e)?t:(0,uE.A)({},t,{ownerState:(0,uE.A)({},t.ownerState,n)})}function UL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n}function zL(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t}function jL(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=dE(null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),t=(0,uE.A)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),s=(0,uE.A)({},n,i,r);return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}const s=UL((0,uE.A)({},i,r)),a=zL(r),l=zL(i),c=t(s),u=dE(null==c?void 0:c.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),h=(0,uE.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),d=(0,uE.A)({},c,n,l,a);return u.length>0&&(d.className=u),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:c.ref}}function VL(e,t,n){return"function"===typeof e?e(t,n):e}const BL=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function qL(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=e,s=(0,cE.A)(e,BL),a=o?{}:VL(r,i),{props:l,internalRef:c}=jL((0,uE.A)({},s,{externalSlotProps:a})),u=QC(c,null==a?void 0:a.ref,null==(t=e.additionalProps)?void 0:t.ref);return FL(n,(0,uE.A)({},l,{ref:u}),i)}const WL=r.createContext();const KL=r.createContext({});function HL(e){return mC("MuiList",e)}gC("MuiList",["root","padding","dense","subheader"]);const GL=["children","className","component","dense","disablePadding","subheader"],QL=tC("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((e=>{let{ownerState:t}=e;return(0,uE.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),YL=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=n,u=(0,cE.A)(n,GL),h=r.useMemo((()=>({dense:a})),[a]),d=(0,uE.A)({},n,{component:s,dense:a,disablePadding:l}),f=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e;return fE({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},HL,t)})(d);return(0,Jk.jsx)(KL.Provider,{value:h,children:(0,Jk.jsxs)(QL,(0,uE.A)({as:s,className:dE(f.root,o),ref:t,ownerState:d},u,{children:[c,i]}))})})),$L=YL;function JL(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const XL=JL,ZL=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function eF(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function tF(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function nF(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function rF(e,t,n,r,i,o){let s=!1,a=i(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&nF(a,o)&&!t)return a.focus(),!0;a=i(e,a,n)}return!1}const iF=r.forwardRef((function(e,t){const{actions:n,autoFocus:i=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu"}=e,d=(0,cE.A)(e,ZL),f=r.useRef(null),p=r.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});IM((()=>{i&&f.current.focus()}),[i]),r.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!f.current.style.width;if(e.clientHeight<f.current.clientHeight&&r){const t="".concat(XL(LL(e)),"px");f.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,f.current.style.width="calc(100% + ".concat(t,")")}return f.current}})),[]);const m=YC(f,t);let g=-1;r.Children.forEach(s,((e,t)=>{r.isValidElement(e)?(e.props.disabled||("selectedMenu"===h&&e.props.selected||-1===g)&&(g=t),g===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(g+=1,g>=s.length&&(g=-1))):g===t&&(g+=1,g>=s.length&&(g=-1))}));const y=r.Children.map(s,((e,t)=>{if(t===g){const t={};return o&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===h&&(t.tabIndex=0),r.cloneElement(e,t)}return e}));return(0,Jk.jsx)($L,(0,uE.A)({role:"menu",ref:m,className:a,onKeyDown:e=>{const t=f.current,n=e.key,r=LL(t).activeElement;if("ArrowDown"===n)e.preventDefault(),rF(t,r,c,l,eF);else if("ArrowUp"===n)e.preventDefault(),rF(t,r,c,l,tF);else if("Home"===n)e.preventDefault(),rF(t,null,c,l,eF);else if("End"===n)e.preventDefault(),rF(t,null,c,l,tF);else if(1===n.length){const i=p.current,o=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(o);const a=r&&!i.repeating&&nF(r,i);i.previousKeyMatched&&(a||rF(t,r,!1,l,eF,i))?e.preventDefault():i.previousKeyMatched=!1}u&&u(e)},tabIndex:i?0:-1},d,{children:y}))})),oF=iF,sF=pM,aF=fM,lF=!1;var cF="unmounted",uF="exited",hF="entering",dF="entered",fF="exiting",pF=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=uF,r.appearStatus=hF):i=dF:i=t.unmountOnExit||t.mountOnEnter?cF:uF,r.state={status:i},r.nextCallback=null,r}pT(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===cF?{status:uF}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==hF&&n!==dF&&(t=hF):n!==hF&&n!==dF||(t=fF)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===hF){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===uF&&this.setState({status:cF})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],a=i[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!e&&!n||lF?this.safeSetState({status:dF},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:hF},(function(){t.props.onEntering(o,a),t.onTransitionEnd(c,(function(){t.safeSetState({status:dF},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!lF?(this.props.onExit(r),this.safeSetState({status:fF},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:uF},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:uF},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===cF)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,cE.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(mT.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function mF(){}pF.contextType=mT,pF.propTypes={},pF.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:mF,onEntering:mF,onEntered:mF,onExit:mF,onExiting:mF,onExited:mF},pF.UNMOUNTED=cF,pF.EXITED=uF,pF.ENTERING=hF,pF.ENTERED=dF,pF.EXITING=fF;const gF=pF,yF=e=>e.scrollTop;function vF(e,t){var n,r;const{timeout:i,easing:o,style:s={}}=e;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}const bF=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function wF(e){return"scale(".concat(e,", ").concat(e**2,")")}const _F={entering:{opacity:1,transform:wF(1)},entered:{opacity:1,transform:"none"}},SF="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),IF=r.forwardRef((function(e,t){const{addEndListener:n,appear:i=!0,children:o,easing:s,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:d,onExiting:f,style:p,timeout:m="auto",TransitionComponent:g=gF}=e,y=(0,cE.A)(e,bF),v=nT(),b=r.useRef(),w=MC(),_=r.useRef(null),S=YC(_,o.ref,t),I=e=>t=>{if(e){const n=_.current;void 0===t?e(n):e(n,t)}},k=I(u),E=I(((e,t)=>{yF(e);const{duration:n,delay:r,easing:i}=vF({style:p,timeout:m,easing:s},{mode:"enter"});let o;"auto"===m?(o=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=o):o=n,e.style.transition=[w.transitions.create("opacity",{duration:o,delay:r}),w.transitions.create("transform",{duration:SF?o:.666*o,delay:r,easing:i})].join(","),l&&l(e,t)})),C=I(c),T=I(f),x=I((e=>{const{duration:t,delay:n,easing:r}=vF({style:p,timeout:m,easing:s},{mode:"exit"});let i;"auto"===m?(i=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=t,e.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:SF?i:.666*i,delay:SF?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=wF(.75),h&&h(e)})),A=I(d);return(0,Jk.jsx)(g,(0,uE.A)({appear:i,in:a,nodeRef:_,onEnter:E,onEntered:C,onEntering:k,onExit:x,onExited:A,onExiting:T,addEndListener:e=>{"auto"===m&&v.start(b.current||0,e),n&&n(_.current,e)},timeout:"auto"===m?null:m},y,{children:(e,t)=>r.cloneElement(o,(0,uE.A)({style:(0,uE.A)({opacity:0,transform:wF(.75),visibility:"exited"!==e||a?void 0:"hidden"},_F[e],p,o.props.style),ref:S},t))}))}));IF.muiSupportAuto=!0;const kF=IF;function EF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}function CF(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function TF(e){return parseInt(fM(e).getComputedStyle(e).paddingRight,10)||0}function xF(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=-1===o.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&CF(e,i)}))}function AF(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function NF(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=dM(e);return t.body===e?fM(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=JL(dM(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(TF(r)+e,"px");const t=dM(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(TF(t)+e,"px")}))}let e;if(r.parentNode instanceof DocumentFragment)e=dM(r).body;else{const t=r.parentElement,n=fM(r);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const PF=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&CF(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);xF(t,e.mount,e.modalRef,r,!0);const i=AF(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=AF(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=NF(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=AF(this.containers,(t=>-1!==t.modals.indexOf(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&CF(e.modalRef,t),xF(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&CF(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};function RF(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:i=!1,manager:o=PF,closeAfterTransition:s=!1,onTransitionEnter:a,onTransitionExited:l,children:c,onClose:u,open:h,rootRef:d}=e,f=r.useRef({}),p=r.useRef(null),m=r.useRef(null),g=QC(m,d),[y,v]=r.useState(!h),b=function(e){return!!e&&e.props.hasOwnProperty("in")}(c);let w=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(w=!1);const _=()=>(f.current.modalRef=m.current,f.current.mount=p.current,f.current),S=()=>{o.mount(_(),{disableScrollLock:i}),m.current&&(m.current.scrollTop=0)},I=JC((()=>{const e=function(e){return"function"===typeof e?e():e}(t)||dM(p.current).body;o.add(_(),e),m.current&&S()})),k=r.useCallback((()=>o.isTopModal(_())),[o]),E=JC((e=>{p.current=e,e&&(h&&k()?S():m.current&&CF(m.current,w))})),C=r.useCallback((()=>{o.remove(_(),w)}),[w,o]);r.useEffect((()=>()=>{C()}),[C]),r.useEffect((()=>{h?I():b&&s||C()}),[h,C,b,s,I]);const T=e=>t=>{var r;null==(r=e.onKeyDown)||r.call(e,t),"Escape"===t.key&&229!==t.which&&k()&&(n||(t.stopPropagation(),u&&u(t,"escapeKeyDown")))},x=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.target===t.currentTarget&&u&&u(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=UL(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r=(0,uE.A)({},n,t);return(0,uE.A)({role:"presentation"},r,{onKeyDown:T(r),ref:g})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,uE.A)({"aria-hidden":!0},e,{onClick:x(e),open:h})},getTransitionProps:()=>({onEnter:EF((()=>{v(!1),a&&a()}),null==c?void 0:c.props.onEnter),onExited:EF((()=>{v(!0),l&&l(),s&&C()}),null==c?void 0:c.props.onExited)}),rootRef:g,portalRef:E,isTopModal:k,exited:y,hasTransition:b}}const DF=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function OF(e){const t=[],n=[];return Array.from(e.querySelectorAll(DF)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function MF(){return!0}function LF(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:s=OF,isEnabled:a=MF,open:l}=e,c=r.useRef(!1),u=r.useRef(null),h=r.useRef(null),d=r.useRef(null),f=r.useRef(null),p=r.useRef(!1),m=r.useRef(null),g=QC(t.ref,m),y=r.useRef(null);r.useEffect((()=>{l&&m.current&&(p.current=!n)}),[n,l]),r.useEffect((()=>{if(!l||!m.current)return;const e=dM(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),p.current&&m.current.focus()),()=>{o||(d.current&&d.current.focus&&(c.current=!0,d.current.focus()),d.current=null)}}),[l]),r.useEffect((()=>{if(!l||!m.current)return;const e=dM(m.current),t=t=>{y.current=t,!i&&a()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(c.current=!0,h.current&&h.current.focus())},n=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!a()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(i&&e.activeElement!==u.current&&e.activeElement!==h.current)return;if(e.activeElement!==f.current)f.current=null;else if(null!==f.current)return;if(!p.current)return;let n=[];if(e.activeElement!==u.current&&e.activeElement!==h.current||(n=s(m.current)),n.length>0){var r,o;const e=Boolean((null==(r=y.current)?void 0:r.shiftKey)&&"Tab"===(null==(o=y.current)?void 0:o.key)),t=n[0],i=n[n.length-1];"string"!==typeof t&&"string"!==typeof i&&(e?i.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[n,i,o,a,l,s]);const v=e=>{null===d.current&&(d.current=e.relatedTarget),p.current=!0};return(0,Jk.jsxs)(r.Fragment,{children:[(0,Jk.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:u,"data-testid":"sentinelStart"}),r.cloneElement(t,{ref:g,onFocus:e=>{null===d.current&&(d.current=e.relatedTarget),p.current=!0,f.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,Jk.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:h,"data-testid":"sentinelEnd"})]})}const FF=r.forwardRef((function(e,t){const{children:n,container:i,disablePortal:o=!1}=e,[a,l]=r.useState(null),c=QC(r.isValidElement(n)?n.ref:null,t);if($C((()=>{o||l(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,o]),$C((()=>{if(a&&!o)return GC(t,a),()=>{GC(t,null)}}),[t,a,o]),o){if(r.isValidElement(n)){const e={ref:c};return r.cloneElement(n,e)}return(0,Jk.jsx)(r.Fragment,{children:n})}return(0,Jk.jsx)(r.Fragment,{children:a?s.createPortal(n,a):a})}));const UF=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],zF={entering:{opacity:1},entered:{opacity:1}},jF=r.forwardRef((function(e,t){const n=MC(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:d,onExit:f,onExited:p,onExiting:m,style:g,timeout:y=i,TransitionComponent:v=gF}=e,b=(0,cE.A)(e,UF),w=r.useRef(null),_=YC(w,a.ref,t),S=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},I=S(d),k=S(((e,t)=>{yF(e);const r=vF({style:g,timeout:y,easing:l},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),u&&u(e,t)})),E=S(h),C=S(m),T=S((e=>{const t=vF({style:g,timeout:y,easing:l},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),f&&f(e)})),x=S(p);return(0,Jk.jsx)(v,(0,uE.A)({appear:s,in:c,nodeRef:w,onEnter:k,onEntered:E,onEntering:I,onExit:T,onExited:x,onExiting:C,addEndListener:e=>{o&&o(w.current,e)},timeout:y},b,{children:(e,t)=>r.cloneElement(a,(0,uE.A)({style:(0,uE.A)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},zF[e],g,a.props.style),ref:_},t))}))})),VF=jF;function BF(e){return mC("MuiBackdrop",e)}gC("MuiBackdrop",["root","invisible"]);const qF=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],WF=tC("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((e=>{let{ownerState:t}=e;return(0,uE.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),KF=r.forwardRef((function(e,t){var n,r,i;const o=lC({props:e,name:"MuiBackdrop"}),{children:s,className:a,component:l="div",components:c={},componentsProps:u={},invisible:h=!1,open:d,slotProps:f={},slots:p={},TransitionComponent:m=VF,transitionDuration:g}=o,y=(0,cE.A)(o,qF),v=(0,uE.A)({},o,{component:l,invisible:h}),b=(e=>{const{classes:t,invisible:n}=e;return fE({root:["root",n&&"invisible"]},BF,t)})(v),w=null!=(n=f.root)?n:u.root;return(0,Jk.jsx)(m,(0,uE.A)({in:d,timeout:g},y,{children:(0,Jk.jsx)(WF,(0,uE.A)({"aria-hidden":!0},w,{as:null!=(r=null!=(i=p.root)?i:c.Root)?r:l,className:dE(b.root,a,null==w?void 0:w.className),ownerState:(0,uE.A)({},v,null==w?void 0:w.ownerState),classes:b,ref:t,children:s}))}))})),HF=KF;function GF(e){return mC("MuiModal",e)}gC("MuiModal",["root","hidden","backdrop"]);const QF=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],YF=tC("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,uE.A)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),$F=tC(HF,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),JF=r.forwardRef((function(e,t){var n,i,o,s,a,l;const c=lC({name:"MuiModal",props:e}),{BackdropComponent:u=$F,BackdropProps:h,className:d,closeAfterTransition:f=!1,children:p,container:m,component:g,components:y={},componentsProps:v={},disableAutoFocus:b=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:_=!1,disablePortal:S=!1,disableRestoreFocus:I=!1,disableScrollLock:k=!1,hideBackdrop:E=!1,keepMounted:C=!1,onBackdropClick:T,open:x,slotProps:A,slots:N}=c,P=(0,cE.A)(c,QF),R=(0,uE.A)({},c,{closeAfterTransition:f,disableAutoFocus:b,disableEnforceFocus:w,disableEscapeKeyDown:_,disablePortal:S,disableRestoreFocus:I,disableScrollLock:k,hideBackdrop:E,keepMounted:C}),{getRootProps:D,getBackdropProps:O,getTransitionProps:M,portalRef:L,isTopModal:F,exited:U,hasTransition:z}=RF((0,uE.A)({},R,{rootRef:t})),j=(0,uE.A)({},R,{exited:U}),V=(e=>{const{open:t,exited:n,classes:r}=e;return fE({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},GF,r)})(j),B={};if(void 0===p.props.tabIndex&&(B.tabIndex="-1"),z){const{onEnter:e,onExited:t}=M();B.onEnter=e,B.onExited=t}const q=null!=(n=null!=(i=null==N?void 0:N.root)?i:y.Root)?n:YF,W=null!=(o=null!=(s=null==N?void 0:N.backdrop)?s:y.Backdrop)?o:u,K=null!=(a=null==A?void 0:A.root)?a:v.root,H=null!=(l=null==A?void 0:A.backdrop)?l:v.backdrop,G=qL({elementType:q,externalSlotProps:K,externalForwardedProps:P,getSlotProps:D,additionalProps:{ref:t,as:g},ownerState:j,className:dE(d,null==K?void 0:K.className,null==V?void 0:V.root,!j.open&&j.exited&&(null==V?void 0:V.hidden))}),Q=qL({elementType:W,externalSlotProps:H,additionalProps:h,getSlotProps:e=>O((0,uE.A)({},e,{onClick:t=>{T&&T(t),null!=e&&e.onClick&&e.onClick(t)}})),className:dE(null==H?void 0:H.className,null==h?void 0:h.className,null==V?void 0:V.backdrop),ownerState:j});return C||x||z&&!U?(0,Jk.jsx)(FF,{ref:L,container:m,disablePortal:S,children:(0,Jk.jsxs)(q,(0,uE.A)({},G,{children:[!E&&u?(0,Jk.jsx)(W,(0,uE.A)({},Q)):null,(0,Jk.jsx)(LF,{disableEnforceFocus:w,disableAutoFocus:b,disableRestoreFocus:I,isEnabled:F,open:x,children:r.cloneElement(p,B)})]}))}):null})),XF=JF;function ZF(e){return mC("MuiPopover",e)}gC("MuiPopover",["root","paper"]);const eU=["onEntering"],tU=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],nU=["slotProps"];function rU(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function iU(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function oU(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?"".concat(e,"px"):e)).join(" ")}function sU(e){return"function"===typeof e?e():e}const aU=tC(XF,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),lU=tC(_C,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),cU=r.forwardRef((function(e,t){var n,i,o;const s=lC({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:h="anchorEl",children:d,className:f,container:p,elevation:m=8,marginThreshold:g=16,open:y,PaperProps:v={},slots:b,slotProps:w,transformOrigin:_={vertical:"top",horizontal:"left"},TransitionComponent:S=kF,transitionDuration:I="auto",TransitionProps:{onEntering:k}={},disableScrollLock:E=!1}=s,C=(0,cE.A)(s.TransitionProps,eU),T=(0,cE.A)(s,tU),x=null!=(n=null==w?void 0:w.paper)?n:v,A=r.useRef(),N=YC(A,x.ref),P=(0,uE.A)({},s,{anchorOrigin:c,anchorReference:h,elevation:m,marginThreshold:g,externalPaperSlotProps:x,transformOrigin:_,TransitionComponent:S,transitionDuration:I,TransitionProps:C}),R=(e=>{const{classes:t}=e;return fE({root:["root"],paper:["paper"]},ZF,t)})(P),D=r.useCallback((()=>{if("anchorPosition"===h)return u;const e=sU(l),t=(e&&1===e.nodeType?e:LL(A.current).body).getBoundingClientRect();return{top:t.top+rU(t,c.vertical),left:t.left+iU(t,c.horizontal)}}),[l,c.horizontal,c.vertical,u,h]),O=r.useCallback((e=>({vertical:rU(e,_.vertical),horizontal:iU(e,_.horizontal)})),[_.horizontal,_.vertical]),M=r.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=O(t);if("none"===h)return{top:null,left:null,transformOrigin:oU(n)};const r=D();let i=r.top-n.vertical,o=r.left-n.horizontal;const s=i+t.height,a=o+t.width,c=aF(sU(l)),u=c.innerHeight-g,d=c.innerWidth-g;if(null!==g&&i<g){const e=i-g;i-=e,n.vertical+=e}else if(null!==g&&s>u){const e=s-u;i-=e,n.vertical+=e}if(null!==g&&o<g){const e=o-g;o-=e,n.horizontal+=e}else if(a>d){const e=a-d;o-=e,n.horizontal+=e}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:oU(n)}}),[l,h,D,O,g]),[L,F]=r.useState(y),U=r.useCallback((()=>{const e=A.current;if(!e)return;const t=M(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,F(!0)}),[M]);r.useEffect((()=>(E&&window.addEventListener("scroll",U),()=>window.removeEventListener("scroll",U))),[l,E,U]);r.useEffect((()=>{y&&U()})),r.useImperativeHandle(a,(()=>y?{updatePosition:()=>{U()}}:null),[y,U]),r.useEffect((()=>{if(!y)return;const e=sF((()=>{U()})),t=aF(l);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[l,y,U]);let z=I;"auto"!==I||S.muiSupportAuto||(z=void 0);const j=p||(l?LL(sU(l)).body:void 0),V=null!=(i=null==b?void 0:b.root)?i:aU,B=null!=(o=null==b?void 0:b.paper)?o:lU,q=qL({elementType:B,externalSlotProps:(0,uE.A)({},x,{style:L?x.style:(0,uE.A)({},x.style,{opacity:0})}),additionalProps:{elevation:m,ref:N},ownerState:P,className:dE(R.paper,null==x?void 0:x.className)}),W=qL({elementType:V,externalSlotProps:(null==w?void 0:w.root)||{},externalForwardedProps:T,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:j,open:y},ownerState:P,className:dE(R.root,f)}),{slotProps:K}=W,H=(0,cE.A)(W,nU);return(0,Jk.jsx)(V,(0,uE.A)({},H,!bM(V)&&{slotProps:K,disableScrollLock:E},{children:(0,Jk.jsx)(S,(0,uE.A)({appear:!0,in:y,onEntering:(e,t)=>{k&&k(e,t),U()},onExited:()=>{F(!1)},timeout:z},C,{children:(0,Jk.jsx)(B,(0,uE.A)({},q,{children:d}))}))}))})),uU=cU;function hU(e){return mC("MuiMenu",e)}gC("MuiMenu",["root","paper","list"]);const dU=["onEntering"],fU=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],pU={vertical:"top",horizontal:"right"},mU={vertical:"top",horizontal:"left"},gU=tC(uU,{shouldForwardProp:e=>ZE(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),yU=tC(lU,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),vU=tC(oF,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),bU=r.forwardRef((function(e,t){var n,i;const o=lC({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:h,open:d,PaperProps:f={},PopoverClasses:p,transitionDuration:m="auto",TransitionProps:{onEntering:g}={},variant:y="selectedMenu",slots:v={},slotProps:b={}}=o,w=(0,cE.A)(o.TransitionProps,dU),_=(0,cE.A)(o,fU),S=(()=>{const e=r.useContext(WL);return null!=e&&e})(),I=(0,uE.A)({},o,{autoFocus:s,disableAutoFocusItem:c,MenuListProps:u,onEntering:g,PaperProps:f,transitionDuration:m,TransitionProps:w,variant:y}),k=(e=>{const{classes:t}=e;return fE({root:["root"],paper:["paper"],list:["list"]},hU,t)})(I),E=s&&!c&&d,C=r.useRef(null);let T=-1;r.Children.map(a,((e,t)=>{r.isValidElement(e)&&(e.props.disabled||("selectedMenu"===y&&e.props.selected||-1===T)&&(T=t))}));const x=null!=(n=v.paper)?n:yU,A=null!=(i=b.paper)?i:f,N=qL({elementType:v.root,externalSlotProps:b.root,ownerState:I,className:[k.root,l]}),P=qL({elementType:x,externalSlotProps:A,ownerState:I,className:k.paper});return(0,Jk.jsx)(gU,(0,uE.A)({onClose:h,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?pU:mU,slots:{paper:x,root:v.root},slotProps:{root:N,paper:P},open:d,ref:t,transitionDuration:m,TransitionProps:(0,uE.A)({onEntering:(e,t)=>{C.current&&C.current.adjustStyleForScrollbar(e,{direction:S?"rtl":"ltr"}),g&&g(e,t)}},w),ownerState:I},_,{classes:p,children:(0,Jk.jsx)(vU,(0,uE.A)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),h&&h(e,"tabKeyDown"))},actions:C,autoFocus:s&&(-1===T||c),autoFocusItem:E,variant:y},u,{className:dE(k.list,u.className),children:a}))}))})),wU=bU;function _U(e){return mC("MuiNativeSelect",e)}const SU=gC("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),IU=["className","disabled","error","IconComponent","inputRef","variant"],kU=e=>{let{ownerState:t,theme:n}=e;return(0,uE.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,uE.A)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(SU.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},EU=tC("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ZE,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{["&.".concat(SU.multiple)]:t.multiple}]}})(kU),CU=e=>{let{ownerState:t,theme:n}=e;return(0,uE.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(SU.disabled)]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},TU=tC("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(uC(n.variant))],n.open&&t.iconOpen]}})(CU),xU=r.forwardRef((function(e,t){const{className:n,disabled:i,error:o,IconComponent:s,inputRef:a,variant:l="standard"}=e,c=(0,cE.A)(e,IU),u=(0,uE.A)({},e,{disabled:i,variant:l,error:o}),h=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e;return fE({select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat(uC(n)),o&&"iconOpen",r&&"disabled"]},_U,t)})(u);return(0,Jk.jsxs)(r.Fragment,{children:[(0,Jk.jsx)(EU,(0,uE.A)({ownerState:u,className:dE(h.select,n),disabled:i,ref:a||t},c)),e.multiple?null:(0,Jk.jsx)(TU,{as:s,ownerState:u,className:h.icon})]})})),AU=xU;const NU=function(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:s}=r.useRef(void 0!==t),[a,l]=r.useState(n);return[s?t:a,r.useCallback((e=>{s||l(e)}),[])]};function PU(e){return mC("MuiSelect",e)}const RU=gC("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var DU;const OU=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],MU=tC("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat(RU.select)]:t.select},{["&.".concat(RU.select)]:t[n.variant]},{["&.".concat(RU.error)]:t.error},{["&.".concat(RU.multiple)]:t.multiple}]}})(kU,{["&.".concat(RU.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),LU=tC("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(uC(n.variant))],n.open&&t.iconOpen]}})(CU),FU=tC("input",{shouldForwardProp:e=>eC(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function UU(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function zU(e){return null==e||"string"===typeof e&&!e.trim()}const jU=r.forwardRef((function(e,t){var n;const{"aria-describedby":i,"aria-label":o,autoFocus:s,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:h,disabled:d,displayEmpty:f,error:p=!1,IconComponent:m,inputRef:g,labelId:y,MenuProps:v={},multiple:b,name:w,onBlur:_,onChange:S,onClose:I,onFocus:k,onOpen:E,open:C,readOnly:T,renderValue:x,SelectDisplayProps:A={},tabIndex:N,value:P,variant:R="standard"}=e,D=(0,cE.A)(e,OU),[O,M]=NU({controlled:P,default:h,name:"Select"}),[L,F]=NU({controlled:C,default:u,name:"Select"}),U=r.useRef(null),z=r.useRef(null),[j,V]=r.useState(null),{current:B}=r.useRef(null!=C),[q,W]=r.useState(),K=YC(t,g),H=r.useCallback((e=>{z.current=e,e&&V(e)}),[]),G=null==j?void 0:j.parentNode;r.useImperativeHandle(K,(()=>({focus:()=>{z.current.focus()},node:U.current,value:O})),[O]),r.useEffect((()=>{u&&L&&j&&!B&&(W(a?null:G.clientWidth),z.current.focus())}),[j,a]),r.useEffect((()=>{s&&z.current.focus()}),[s]),r.useEffect((()=>{if(!y)return;const e=LL(z.current).getElementById(y);if(e){const t=()=>{getSelection().isCollapsed&&z.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[y]);const Q=(e,t)=>{e?E&&E(t):I&&I(t),B||(W(a?null:G.clientWidth),F(e))},Y=r.Children.toArray(l),$=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(O)?O.slice():[];const t=O.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),O!==n&&(M(n),S)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:w}}),S(i,e)}b||Q(!1,t)}},J=null!==j&&L;let X,Z;delete D["aria-invalid"];const ee=[];let te=!1,ne=!1;(xM({value:O})||f)&&(x?X=x(O):te=!0);const re=Y.map((e=>{if(!r.isValidElement(e))return null;let t;if(b){if(!Array.isArray(O))throw new Error((0,mE.A)(2));t=O.some((t=>UU(t,e.props.value))),t&&te&&ee.push(e.props.children)}else t=UU(O,e.props.value),t&&te&&(Z=e.props.children);return t&&(ne=!0),r.cloneElement(e,{"aria-selected":t?"true":"false",onClick:$(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));te&&(X=b?0===ee.length?null:ee.reduce(((e,t,n)=>(e.push(t),n<ee.length-1&&e.push(", "),e)),[]):Z);let ie,oe=q;!a&&B&&j&&(oe=G.clientWidth),ie="undefined"!==typeof N?N:d?null:0;const se=A.id||(w?"mui-component-select-".concat(w):void 0),ae=(0,uE.A)({},e,{variant:R,value:O,open:J,error:p}),le=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e;return fE({select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat(uC(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},PU,t)})(ae),ce=(0,uE.A)({},v.PaperProps,null==(n=v.slotProps)?void 0:n.paper),ue=hM();return(0,Jk.jsxs)(r.Fragment,{children:[(0,Jk.jsx)(MU,(0,uE.A)({ref:H,tabIndex:ie,role:"combobox","aria-controls":ue,"aria-disabled":d?"true":void 0,"aria-expanded":J?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[y,se].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:e=>{if(!T){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),Q(!0,e))}},onMouseDown:d||T?null:e=>{0===e.button&&(e.preventDefault(),z.current.focus(),Q(!0,e))},onBlur:e=>{!J&&_&&(Object.defineProperty(e,"target",{writable:!0,value:{value:O,name:w}}),_(e))},onFocus:k},A,{ownerState:ae,className:dE(A.className,le.select,c),id:se,children:zU(X)?DU||(DU=(0,Jk.jsx)("span",{className:"notranslate",children:"\u200b"})):X})),(0,Jk.jsx)(FU,(0,uE.A)({"aria-invalid":p,value:Array.isArray(O)?O.join(","):O,name:w,ref:U,"aria-hidden":!0,onChange:e=>{const t=Y.find((t=>t.props.value===e.target.value));void 0!==t&&(M(t.props.value),S&&S(e,t))},tabIndex:-1,disabled:d,className:le.nativeInput,autoFocus:s,ownerState:ae},D)),(0,Jk.jsx)(LU,{as:m,className:le.icon,ownerState:ae}),(0,Jk.jsx)(wU,(0,uE.A)({id:"menu-".concat(w||""),anchorEl:G,open:J,onClose:e=>{Q(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},v,{MenuListProps:(0,uE.A)({"aria-labelledby":y,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:ue},v.MenuListProps),slotProps:(0,uE.A)({},v.slotProps,{paper:(0,uE.A)({},ce,{style:(0,uE.A)({minWidth:oe},null!=ce?ce.style:null)})}),children:re}))]})})),VU=jU;function BU(e){return mC("MuiSvgIcon",e)}gC("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const qU=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],WU=tC("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(uC(n.color))],t["fontSize".concat(uC(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,o,s,a,l,c,u,h,d,f,p,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=t.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(s=t.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(h=u.pxToRem)?void 0:h.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(d=null==(f=(t.vars||t).palette)||null==(f=f[n.color])?void 0:f.main)?d:{action:null==(p=(t.vars||t).palette)||null==(p=p.action)?void 0:p.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),KU=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:d="0 0 24 24"}=n,f=(0,cE.A)(n,qU),p=r.isValidElement(i)&&"svg"===i.type,m=(0,uE.A)({},n,{color:s,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:p}),g={};u||(g.viewBox=d);const y=(e=>{const{color:t,fontSize:n,classes:r}=e;return fE({root:["root","inherit"!==t&&"color".concat(uC(t)),"fontSize".concat(uC(n))]},BU,r)})(m);return(0,Jk.jsxs)(WU,(0,uE.A)({as:a,className:dE(y.root,o),focusable:"false",color:c,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:t},g,f,p&&i.props,{ownerState:m,children:[p?i.props.children:i,h?(0,Jk.jsx)("title",{children:h}):null]}))}));KU.muiName="SvgIcon";const HU=KU;function GU(e,t){function n(n,r){return(0,Jk.jsx)(HU,(0,uE.A)({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return n.muiName=HU.muiName,r.memo(r.forwardRef(n))}const QU=GU((0,Jk.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),YU=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],$U=["root"],JU={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>ZE(e)&&"variant"!==e,slot:"Root"},XU=tC(KM,JU)(""),ZU=tC(uL,JU)(""),ez=tC(XM,JU)(""),tz=r.forwardRef((function(e,t){const n=lC({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:s={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=QU,id:h,input:d,inputProps:f,label:p,labelId:m,MenuProps:g,multiple:y=!1,native:v=!1,onClose:b,onOpen:w,open:_,renderValue:S,SelectDisplayProps:I,variant:k="outlined"}=n,E=(0,cE.A)(n,YU),C=v?AU:VU,T=wM({props:n,muiFormControl:SM(),states:["variant","error"]}),x=T.variant||k,A=(0,uE.A)({},n,{variant:x,classes:s}),N=(e=>{const{classes:t}=e;return t})(A),P=(0,cE.A)(N,$U),R=d||{standard:(0,Jk.jsx)(XU,{ownerState:A}),outlined:(0,Jk.jsx)(ZU,{label:p,ownerState:A}),filled:(0,Jk.jsx)(ez,{ownerState:A})}[x],D=YC(t,R.ref);return(0,Jk.jsx)(r.Fragment,{children:r.cloneElement(R,(0,uE.A)({inputComponent:C,inputProps:(0,uE.A)({children:o,error:T.error,IconComponent:u,variant:x,type:void 0,multiple:y},v?{id:h}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:g,onClose:b,onOpen:w,open:_,renderValue:S,SelectDisplayProps:(0,uE.A)({id:h},I)},f,{classes:f?(0,gE.A)(P,f.classes):P},d?d.props.inputProps:{})},(y&&v||c)&&"outlined"===x?{notched:!0}:{},{ref:D,className:dE(R.props.className,a,N.root)},!d&&{variant:x},E))})}));tz.muiName="Select";const nz=tz;function rz(e){return mC("MuiTextField",e)}gC("MuiTextField",["root"]);const iz=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],oz={standard:KM,filled:XM,outlined:uL},sz=tC(xL,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),az=r.forwardRef((function(e,t){const n=lC({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:h,fullWidth:d=!1,helperText:f,id:p,InputLabelProps:m,inputProps:g,InputProps:y,inputRef:v,label:b,maxRows:w,minRows:_,multiline:S=!1,name:I,onBlur:k,onChange:E,onFocus:C,placeholder:T,required:x=!1,rows:A,select:N=!1,SelectProps:P,type:R,value:D,variant:O="outlined"}=n,M=(0,cE.A)(n,iz),L=(0,uE.A)({},n,{autoFocus:i,color:a,disabled:c,error:u,fullWidth:d,multiline:S,required:x,select:N,variant:O}),F=(e=>{const{classes:t}=e;return fE({root:["root"]},rz,t)})(L);const U={};"outlined"===O&&(m&&"undefined"!==typeof m.shrink&&(U.notched=m.shrink),U.label=b),N&&(P&&P.native||(U.id=void 0),U["aria-describedby"]=void 0);const z=hM(p),j=f&&z?"".concat(z,"-helper-text"):void 0,V=b&&z?"".concat(z,"-label"):void 0,B=oz[O],q=(0,Jk.jsx)(B,(0,uE.A)({"aria-describedby":j,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:d,multiline:S,name:I,rows:A,maxRows:w,minRows:_,type:R,value:D,id:z,inputRef:v,onBlur:k,onChange:E,onFocus:C,placeholder:T,inputProps:g},U,y));return(0,Jk.jsxs)(sz,(0,uE.A)({className:dE(F.root,s),disabled:c,error:u,fullWidth:d,ref:t,required:x,color:a,variant:O,ownerState:L},M,{children:[null!=b&&""!==b&&(0,Jk.jsx)(SL,(0,uE.A)({htmlFor:z,id:V},m,{children:b})),N?(0,Jk.jsx)(nz,(0,uE.A)({"aria-describedby":j,id:z,labelId:V,value:D,input:q},P,{children:o})):q,f&&(0,Jk.jsx)(ML,(0,uE.A)({id:j},h,{children:f}))]}))})),lz=az;const cz=GU((0,Jk.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function uz(e){return mC("MuiAvatar",e)}gC("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const hz=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],dz=["component","slots","slotProps"],fz=["component"];const pz=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],mz=lC,gz=tC("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:(0,uE.A)({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:(0,uE.A)({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]}})),yz=tC("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),vz=tC(cz,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const bz=r.forwardRef((function(e,t){const n=mz({props:e,name:"MuiAvatar"}),{alt:i,children:o,className:s,component:a="div",slots:l={},slotProps:c={},imgProps:u,sizes:h,src:d,srcSet:f,variant:p="circular"}=n,m=(0,cE.A)(n,pz);let g=null;const y=function(e){let{crossOrigin:t,referrerPolicy:n,src:i,srcSet:o}=e;const[s,a]=r.useState(!1);return r.useEffect((()=>{if(!i&&!o)return;a(!1);let e=!0;const r=new Image;return r.onload=()=>{e&&a("loaded")},r.onerror=()=>{e&&a("error")},r.crossOrigin=t,r.referrerPolicy=n,r.src=i,o&&(r.srcset=o),()=>{e=!1}}),[t,n,i,o]),s}((0,uE.A)({},u,{src:d,srcSet:f})),v=d||f,b=v&&"error"!==y,w=(0,uE.A)({},n,{colorDefault:!b,component:a,variant:p}),_=(e=>{const{classes:t,variant:n,colorDefault:r}=e;return fE({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},uz,t)})(w),[S,I]=function(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,getSlotOwnerState:s,internalForwardedProps:a}=t,l=(0,cE.A)(t,hz),{component:c,slots:u={[e]:void 0},slotProps:h={[e]:void 0}}=o,d=(0,cE.A)(o,dz),f=u[e]||r,p=VL(h[e],i),m=jL((0,uE.A)({className:n},l,{externalForwardedProps:"root"===e?d:void 0,externalSlotProps:p})),{props:{component:g},internalRef:y}=m,v=(0,cE.A)(m.props,fz),b=QC(y,null==p?void 0:p.ref,t.ref),w=s?s(v):{},_=(0,uE.A)({},i,w),S="root"===e?g||c:g,I=FL(f,(0,uE.A)({},"root"===e&&!c&&!u[e]&&a,"root"!==e&&!u[e]&&a,v,S&&{as:S},{ref:b}),_);return Object.keys(w).forEach((e=>{delete I[e]})),[f,I]}("img",{className:_.img,elementType:yz,externalForwardedProps:{slots:l,slotProps:{img:(0,uE.A)({},u,c.img)}},additionalProps:{alt:i,src:d,srcSet:f,sizes:h},ownerState:w});return g=b?(0,Jk.jsx)(S,(0,uE.A)({},I)):o||0===o?o:v&&i?i[0]:(0,Jk.jsx)(vz,{ownerState:w,className:_.fallback}),(0,Jk.jsx)(gz,(0,uE.A)({as:a,ownerState:w,className:dE(_.root,s),ref:t},m,{children:g}))})),wz=bz;function _z(e){try{const t=Math.floor(1e3*e.seconds+e.nanoseconds/1e6),n=new Date(t),r=n.getHours(),i=n.getMinutes();return"".concat(r,":").concat(i)}catch(Qx){}}const Sz={flexDirection:"row-reverse",backgroundColor:"#2F70AF",borderRadius:"20px 20px 0 20px"},Iz={backgroundColor:"#806491",borderRadius:"20px 20px 20px 0"};function kz(e,t){return e.uid===t.id?Sz:Iz}function Ez(e){let{messages:t}=e;const{auth:n}=tE(),[i]=lE(n),o=(0,r.useRef)(null);(0,r.useEffect)((()=>{o.current&&o.current.scrollIntoView({behavior:"smooth"})}),[t]);const s=(e=>{const t={};return e.forEach((e=>{let{createdAt:n,...r}=e;if(n&&n.seconds){const e=new Date(1e3*n.seconds).toLocaleDateString("uk-UA");t[e]||(t[e]=[]),t[e].push({createdAt:n,...r})}})),t})(t);return(0,Jk.jsx)("div",{style:{width:"80%",height:"80vh",backgroundColor:"#fafafa",overflowY:"auto",borderRadius:10,padding:30},children:Object.entries(s).map((e=>{let[t,n]=e;return(0,Jk.jsxs)("div",{children:[(0,Jk.jsx)("p",{style:{fontSize:"12px",fontWeight:500,margin:"10px 0",textAlign:"center"},children:t}),n.map(((e,t)=>{let{photoUrl:r,displayName:s,text:a,createdAt:l}=e;return(0,Jk.jsx)("div",{ref:t===n.length-1?o:null,children:(0,Jk.jsxs)(HC,{container:!0,alignItems:"center",flexDirection:kz(n[t],i).flexDirection,children:[(0,Jk.jsx)(wz,{src:r}),(0,Jk.jsxs)(HC,{container:!0,color:"white",style:{width:"auto",backgroundColor:"".concat(kz(n[t],i).backgroundColor),margin:"0 10px 10px 10px",maxWidth:"30%",borderRadius:"".concat(kz(n[t],i).borderRadius),padding:"10px"},children:[(0,Jk.jsxs)(HC,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,Jk.jsx)("p",{style:{fontSize:"10px",fontWeight:600},children:s}),(0,Jk.jsx)("p",{style:{fontSize:"8px",fontWeight:600},children:_z(l)})]}),(0,Jk.jsx)("p",{children:a})]})]},l)},l)}))]},t)}))})}const Cz={};function Tz(){return(0,Jk.jsx)(kx,{children:(0,Jk.jsx)(HC,{container:!0,style:{height:window.innerHeight-50},alignItems:"center",justifyContent:"center",children:(0,Jk.jsx)(HC,{container:!0,alignItems:"center",justifyContent:"center",children:(0,Jk.jsx)("div",{className:Cz.loader})})})})}function xz(e){let{users:t}=e}const Az=[{path:ix,Component:function(){const{auth:e,firebase:t,users:n}=tE();return(0,Jk.jsx)(kx,{children:(0,Jk.jsx)(HC,{container:!0,alignItems:"center",justifyContent:"center",style:{height:window.innerHeight-50},children:(0,Jk.jsx)(HC,{container:!0,alignItems:"center",justifyContent:"center",style:{width:400,background:"#fafafa",borderRadius:15},children:(0,Jk.jsx)(Ax,{p:5,children:(0,Jk.jsxs)(rx,{color:"warning",variant:"outlined",onClick:async()=>{const r=new t.auth.GoogleAuthProvider,{user:i}=await e.signInWithPopup(r);console.log(i),lM(i,n)},children:["LOGIN WITH"," ",(0,Jk.jsx)("img",{style:{marginLeft:"10px"},width:80,src:"https://iconape.com/wp-content/files/ur/370111/svg/google-logo-icon-png-svg.png"})]})})})})})}}],Nz=[{path:ox,Component:function(){const[e,t]=(0,r.useState)(""),{auth:n,firestore:i,firebase:o,users:s}=tE(),[a]=lE(n);console.log(a);const[l,c]=Yk(i.collection("messages").orderBy("createdAt"));return c?(0,Jk.jsx)(Tz,{}):(0,Jk.jsx)(kx,{style:{width:"100vw"},children:(0,Jk.jsxs)(HC,{container:!0,flexWrap:"nowrap",width:"100vw",children:[(0,Jk.jsx)(xz,{users:s}),(0,Jk.jsxs)(HC,{container:!0,justifyContent:"flex-end",alignContent:"flex-start",style:{height:window.innerHeight-50,marginTop:"10px",width:"290%"},children:[(0,Jk.jsx)(Ez,{messages:l}),(0,Jk.jsxs)(HC,{container:!0,justifyContent:"space-between",alignItems:"center",style:{width:"80%",marginTop:"20px",backgroundColor:"#fafafa"},children:[(0,Jk.jsx)(lz,{variant:"outlined",maxRows:2,style:{width:"80%"},value:e,onChange:e=>t(e.target.value)}),(0,Jk.jsx)(rx,{onClick:async()=>{const n={uid:a.uid,displayName:a.displayName,photoUrl:a.photoURL,text:e,createdAt:o.firestore.FieldValue.serverTimestamp()};i.collection("chats").doc().set({users:["uid_1","uid_2"],newMessage:n}),i.collection("messages").add(n),t("")},variant:"contained",style:{marginLeft:"8px",width:"18%",height:"100%"},children:"\u041d\u0430\u0434\u0456\u0441\u043b\u0430\u0442\u0438"})]})]})]})})}}];function Pz(){const e=ee(),{auth:t}=tE(),[n]=lE(t);return(0,r.useEffect)((()=>{e(n?ox:ix)}),[n,e]),(0,Jk.jsx)(ge,{children:n?Nz.map((e=>{let{path:t,Component:n}=e;return(0,Jk.jsx)(pe,{path:t,element:(0,Jk.jsx)(n,{})},t)})):Az.map((e=>{let{path:t,Component:n}=e;return(0,Jk.jsx)(pe,{path:t,element:(0,Jk.jsx)(n,{})},t)}))})}const Rz=function(){const{auth:e}=tE(),[t,n,r]=lE(e);return n?(0,Jk.jsx)(Tz,{}):(0,Jk.jsx)("div",{className:"App",children:(0,Jk.jsxs)(ke,{basename:"/chat",children:[(0,Jk.jsx)(sx,{}),(0,Jk.jsx)(Pz,{})]})})};o.createRoot(document.getElementById("root")).render((0,Jk.jsx)(r.StrictMode,{children:(0,Jk.jsx)(nE,{children:(0,Jk.jsx)(Rz,{})})}))})()})();
//# sourceMappingURL=main.d7a778b2.js.map